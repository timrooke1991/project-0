"use strict";var _slicedToArray=function(){function e(e,a){var o=[],s=!0,t=!1,r=void 0;try{for(var n,l=e[Symbol.iterator]();!(s=(n=l.next()).done)&&(o.push(n.value),!a||o.length!==a);s=!0);}catch(e){t=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(t)throw r}}return o}return function(a,o){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(function(){function e(e){$(".team-panel").html("");var a=["goalkeeper","defender","midfielder","striker"];e.players.sort(function(e,o){return a.indexOf(e.position)<a.indexOf(o.position)?-1:1});for(var o=0;o<e.players.length;o++){var s=e.players[o],t=s.playing?"&#10004;":"&#10007;";$(".team-panel").append('<p class="player-line '+s.position+"\" id='"+s.name+'\'>\n        <span class="starting" id="'+o+'">'+t+'</span>\n        <span class="player-position ">'+s.position+'</span>\n        <span class="player-name">'+s.name+'</span>\n        <span class="player-stat">'+s.attack+'</span>\n        <span class="player-stat">'+s.defence+'</span>\n        <span class="player-stat">'+s.creativity+'</span>\n        <span class="player-stat">'+s.defence+"</span>\n        </p>")}}function a(e){$(".team-display").html("");var a=["1"].concat(e.formation.split("-")),o=["goalkeeper","defender","midfielder","striker"],s=0,t=0;try{a.map(function(a){for(var r=parseFloat(a),n=0;n<r;)e.players[s].playing&&($(".team-display").append("<p>"+o[t]+": "+e.players[s].name+"</p>"),e.players[s].chosenPosition=o[t],n++),console.log(s),s++;$(".team-display").append("<hr>"),t++})}catch(e){alert("Select 11 players!")}}function o(e,a){e.players[a].playing=!e.players[a].playing,console.log(e.players[a].playing),e.players[a].playing?$("#"+a).html("&#10004;"):$("#"+a).html("&#10007;")}function s(){44===w&&(f.text("That's half-time!"),x=!x,g.text("Play")),90===w?(f.text("That's full-time!"),clearInterval(B),g.text("Finish")):(w++,u.text(w))}function t(e){return Math.floor(Math.random()*e)}function r(){var e=document.getElementById("homeBar");P=T.averagePlayerValues("creativity")/F.averagePlayerValues("creativity")*100,console.log(T.averagePlayerValues("creativity")),console.log(F.averagePlayerValues("creativity")),console.log(P),e.style.width=P+"%"}function n(){return t(T.averagePlayerValues("creativity"))>=t(F.averagePlayerValues("creativity"))?(f.css("background-color",T.colors[0]),f.css("color",T.colors[1]),t(20)%4==0&&f.text(y("chance","")),[T,"home",F]):(f.css("background-color",F.colors[0]),f.css("color",F.colors[1]),t(20)%4==0&&f.text(y("chance","")),[F,"away",T])}function l(e,a,o){var s=null,r=null,n=e.randomPlayer(),l=o.randomPlayerByPosition("defender");t(n.attack)>t(l.defence)&&("home"===a?(r=b.text(),s=parseFloat(r)+1,b.text(s)):(r=k.text(),s=parseFloat(r)+1,k.text(s)),y("goal",n),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:white; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+n.name+" scored<br/>"))}function c(e,a,o){console.log("YELLOW");var s=o.randomPlayer(),r="home"===a?"away":"home";t(s.discipline)+(100-w)<90&&("Yellow"===s.status?(f.css("background-color","#FF0000"),f.css("color","#FFFFFF"),y("secondYellow",s),$("#"+r+"Events").append("<i class='fa fa-square event-item' style='font-size: 24px; color: red; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" sent off<br/>"),s.status="Ejected",s.playing=!1):(f.css("background-color","yellow"),f.css("color","#000000"),y("yellow",s),$("#"+r+"Events").append("\n          <i class='fa fa-square event-item' style='font-size: 24px; color: yellow; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" booked<br/>"),s.status="Yellow"))}function i(e,a){var o=e.randomPlayer();t(101)%8==0?(y("injury",o),$("#"+a+"Events").append("<i class='fa fa-plus' style='font-size: 26px; color: green; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+o.name+" injured<br/>"),o.playing=!1):f.text(o.name+"'s limping, but he'll be okay")}function m(e,a,o){var s=e.randomPlayerByPosition("midfielder"),t=o.randomPlayerByPosition("goalkeeper").defence+o.averagePlayerValues("defender");if(s.attack>t){var r=null,n=null;"home"===a?(n=b.text(),r=parseFloat(n)+1,b.text(r)):(n=k.text(),r=parseFloat(n)+1,k.text(r)),y("freekick",s),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:white; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" scored<br/>")}else y("wastedFreekick",s)}function p(e,a,o){var s=e.randomPlayerByPosition("striker"),r=o.randomPlayerByPosition("goalkeeper"),n=o.randomPlayerByPosition("defender"),l="home"===a?"away":"home";if(t(100)>25&&(n.status="Yellow",$("#"+l+"Events").append("<i class='fa fa-square event-item' style='font-size: 24px; color: yellow; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+n.name+" booked<br/>")),2*t(s.attack)>t(r.defence)){var c=null,i=null;"home"===a?(i=b.text(),c=parseFloat(i)+1,b.text(c)):(i=k.text(),c=parseFloat(i)+1,k.text(c)),y("penalty",s),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:white; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" scores penalty<br/>")}else y("missedPenalty",s),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:red; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" missed penalty<br/>")}function d(e,a){var o=e.randomPlayer();if(t(o.discipline)<25){o.playing=!1;var s="home"===a?"away":"home";y("straightRed",o),$("#"+s+"Events").append("<i class='fa fa-square' style='font-size: 24px; color: red; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+o.name+" sent off<br/>")}}function h(e,a){if(null===T){switch($(".home-team  .team-name").text(a),a){case"Tottenham":T=spurs,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Man United":T=manUnited,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Liverpool":T=liverpool,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Man City":T=manCity,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Everton":T=everton,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Chelsea":T=chelsea,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Leicester":T=leicester,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Arsenal":T=arsenal,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1])}console.log(T)}else{switch($(".away-team .team-name").text(a),a){case"Tottenham":F=spurs,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Man United":F=manUnited,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Liverpool":F=liverpool,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Man City":F=manCity,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Everton":F=everton,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Chelsea":F=chelsea,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Leicester":F=leicester,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Arsenal":F=arsenal,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1])}console.log(F)}console.log(a)}function y(e,a){var o={goal:["Goal!","He's scored!","That's a great finish!","What a goal by "+a.name,a.name+" finishes off the move!"],freekick:["It's a freekick",a.name+" to take the freekick","He lines up the freekick","This is a chance to get a cross in"],wastedFreekick:[a.name+" loses possession","That's ended up in row Z","The attack amounts to nothing",a.name+" has wasted that opportunity",a.name+"'s effort goes over the bar","He hands back possession to the other team"],yellow:["He's going in the book","Ouch! "+a.name+"'ll a yellow for that","That's a booking","It's a yellow!","The ref is taking his name"],secondYellow:["He's already been booked...","That's a second yellow",a.name+" is shown a red!",a.name+" is off"],straightRed:[a.name+" is shown a straight red!",a.name+" is off","The ref has given him straight red!"],penalty:["The referee points to the spot","That's a penalty",a.name+" is fouled in the area","The ref blows his whistle. Penalty."],missedPenalty:["Saved!","It's over the bar",a.name+" has missed it!","Oh dear! "+a.name+"'s put it wide'"],injury:[a.name+"'s is going off",a.name+" is injured",a.name+" can't continue"],chance:["The ball is wasted","Possession is sloppily given away","That is wasted","The referee pulls back play","The ball goes out for a throw","Good interception!","He's robbed him of possesion"]},s=t(o[e].length),r=o[e][s];f.text(""+r)}var u=$(".changing-minutes"),f=$("#commentaryBox"),g=$(".primary-button"),b=$(".home-team .score"),k=$(".away-team .score"),v=null,w=0,x=!1,P=50,T=null,F=null,B=setInterval(function(){if(x){var e=t(100)+1;console.log(w+": "+e);var a=n(),o=_slicedToArray(a,3),h=o[0],y=o[1],u=o[2];e%18==0&&l(h,y,u),e%80==0&&p(h,y,u),e%90==0&&d(u,y),e%22==0&&m(h,y,u),e%14==0&&c(h,y,u),e%60==0&&i(h,y),r(),s()}},200);$(".team-input").on("click",function(e){var a=e.target.innerHTML;null===T?(h(T,a),console.log("homeTeam now selected!"),$(".title-message").text("Home team chosen. Now chose your opponent.")):(h(F,a),console.log("awayTeam now selected!"))}),$("#revealTeam").on("click",function(){a(v)}),$(".team-panel").on("click",function(e){var a=e.target.id;o(v,a)}),g.on("click",function(){x=!x,$("#match-setup, .info-message, .team-setup").hide(),$("#match-engine, .away-team, .home-team, .timer").show(),x?g.text("Pause"):g.text("Play")}),$("#homeTeam").on("click",function(){$(".match-setup").hide(),$(".team-setup").show(),e(T),v=T}),$("#awayTeam").on("click",function(){$(".match-setup").hide(),$(".team-setup").show(),e(F),v=F})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwic2V0dXBUYWN0aWNzIiwidGVhbU9iamVjdCIsImh0bWwiLCJwb3NpdGlvbnMiLCJwbGF5ZXJzIiwiaGlkZSIsImEiLCJiIiwic2hvdyIsInBvc2l0aW9uIiwiaW5kZXhPZiIsImkiLCJsZW5ndGgiLCJwbGF5ZXIiLCJwbGF5aW5nIiwiYXBwZW5kIiwibmFtZSIsInN0YXJ0aW5nRWxldmVuIiwiZGVmZW5jZSIsImNyZWF0aXZpdHkiLCJyZXZlYWxUZWFtIiwiY29uY2F0IiwiZm9ybWF0aW9uIiwic3BsaXQiLCJwbGF5ZXJOdW1iZXIiLCJwb3NpdGlvbk51bWJlciIsIml0ZXJhdGlvbnMiLCJwYXJzZUZsb2F0IiwiYXJyYXlJdGVtIiwiY2hvc2VuUG9zaXRpb24iLCJhbGVydCIsImVyciIsInNlbGVjdGVkUGxheWVyIiwiY29uc29sZSIsInRpbWVDb250cm9sIiwidGV4dCIsIiRjb21tZW50YXJ5Qm94IiwicnVuIiwiJHByaW1hcnlCdXR0b24iLCJjbGVhckludGVydmFsIiwidGltZXJJRCIsIiRtYXRjaFRpbWUiLCJtYXRjaFRpbWUiLCJnZW5SYW5kb21WYWx1ZSIsInZhbHVlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibW92ZSIsImhvbWVUZWFtIiwiYXZlcmFnZVBsYXllclZhbHVlcyIsImxvZyIsImF3YXlUZWFtIiwid2lkdGgiLCJlbGVtIiwic3R5bGUiLCJhd2F5UmFuZG9tIiwiZ2VuZXJhdGVDb21tZW50YXJ5IiwiY29sb3JzIiwic2NvcmUiLCJhdHRhY2tpbmdUZWFtIiwidGVhbVN0cmluZyIsImRlZmVuZGluZ1RlYW0iLCJhdHRhY2tpbmdQbGF5ZXIiLCJkZWZlbmRpbmdQbGF5ZXIiLCJyYW5kb21QbGF5ZXIiLCJhdHRhY2siLCJnZXRTY29yZSIsIiRob21lU2NvcmUiLCIkYXdheVNjb3JlIiwidGVhbSIsImRpc2NpcGxpbmUiLCJzdGF0dXMiLCJjc3MiLCJoYW5kbGVJbmp1cnkiLCJoYW5kbGVGcmVla2ljayIsInJhbmRvbVBsYXllckJ5UG9zaXRpb24iLCJoYW5kbGVQZW5hbHR5IiwiYm9va2VkUGxheWVyIiwic3RyYWlnaHRSZWQiLCJzZWxlY3RvciIsImNvbmZpZ1RlYW0iLCJzcHVycyIsImxpdmVycG9vbCIsIm1hblVuaXRlZCIsIm1hbkNpdHkiLCJldmVydG9uIiwiY2hlbHNlYSIsImxlaWNlc3RlciIsImFyc2VuYWwiLCJjb21tZW50YXJ5Iiwid2FzdGVkRnJlZWtpY2siLCJwZW5hbHR5Iiwic2NlbmFyaW8iLCJtaXNzZWRQZW5hbHR5IiwiaW5qdXJ5IiwiY2hhbmNlIiwieWVsbG93IiwicmFuZG9tZUluZGV4Iiwic2Vjb25kWWVsbG93IiwibWVzc2FnZSIsInRlYW1UYWN0aWNzIiwic2V0SW50ZXJ2YWwiLCJldmVudFZhbHVlIiwiX3NlbGVjdFRlYW0iLCJzZWxlY3RUZWFtIiwiX3NlbGVjdFRlYW0yIiwiX3NsaWNlZFRvQXJyYXkiLCJnb2FsQ2hhbmNlIiwib24iLCJlIiwidXNlclRlYW0iLCJ0YXJnZXQiLCJpbm5lckhUTUwiLCJpZCIsImNob29zZVBsYXllcnMiXSwibWFwcGluZ3MiOiJtY0FBQUEsR0FBRSxXQWlJQyxRQU5EQyxHQUFBQyxHQWdCRUYsRUFBRSxlQUFlRyxLQUFLLEdBUnRCLElBQUFDLElBQWdCLGFBQVMsV0FBTSxhQUFBLFVBQy9CSixHQUFFSyxRQUFnQkMsS0FBbEIsU0FBQUMsRUFBQUMsR0FDRSxNQUFBSixHQUFlSyxRQUFqQkYsRUFBQUcsVUFBQU4sRUFBQU8sUUFBQUgsRUFBQUUsV0FBQSxFQUFBLEdBRkYsS0FBQSxHQUFBRSxHQUFBLEVBQUFBLEVBQUFWLEVBQUFHLFFBQUFRLE9BQUFELElBQUEsQ0FlSSxHQUFNRSxHQUFTWixFQUFXRyxRQUFRTyxHQVI3QlgsRUFBYUMsRUFBWWEsUUFBQSxXQUFBLFVBRWhDZixHQUFNSSxlQUFhWSxPQUFuQix5QkFDd0JGLEVBQUFKLFNBRHhCLFVBQ3FDSSxFQUFBRyxLQURyQywyQ0FFNkJQLEVBRjdCLEtBRVNRLEVBRlQsbURB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Iiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnN0ICRtYXRjaFRpbWUgPSAkKCcuY2hhbmdpbmctbWludXRlcycpO1xuICBjb25zdCAkY29tbWVudGFyeUJveCA9ICQoJyNjb21tZW50YXJ5Qm94Jyk7XG4gIGNvbnN0ICRwcmltYXJ5QnV0dG9uID0gJCgnLnByaW1hcnktYnV0dG9uJyk7XG4gIGNvbnN0ICRob21lU2NvcmUgPSAkKCcuaG9tZS10ZWFtIC5zY29yZScpO1xuICBjb25zdCAkYXdheVNjb3JlID0gJCgnLmF3YXktdGVhbSAuc2NvcmUnKTtcbiAgLy8gY29uc3QgJGhvbWVUZWFtID0gJCgnLmhvbWUtdGVhbScpO1xuICAvLyBjb25zdCAkYXdheVRlYW0gPSAkKCcuYXdheS10ZWFtJyk7XG4gIGxldCB0ZWFtVGFjdGljcyA9IG51bGw7XG5cbiAgbGV0IG1hdGNoVGltZSA9IDA7XG4gIGxldCBydW4gPSBmYWxzZTtcbiAgbGV0IHdpZHRoID0gNTA7XG4gIGxldCBob21lVGVhbSA9IG51bGw7XG4gIGxldCBhd2F5VGVhbSA9IG51bGw7XG5cblxuICAvLyBNQVRDSCBMT0dJQ1xuICBjb25zdCB0aW1lcklEID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJ1biApIHtcblxuICAgICAgY29uc3QgZXZlbnRWYWx1ZSA9IGdlblJhbmRvbVZhbHVlKDEwMCkgKyAxO1xuICAgICAgY29uc29sZS5sb2coYCR7bWF0Y2hUaW1lfTogJHtldmVudFZhbHVlfWApO1xuXG4gICAgICAvLyBDcmVhdGl2aXR5IFN1bUNyZWF0aXZpdHkgdnMuIFN1bUNyZWF0aXZpdHlcbiAgICAgIGNvbnN0IFthdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nLCBkZWZlbmRpbmdUZWFtXSA9IHNlbGVjdFRlYW0oKTtcblxuICAgICAgLy8gY29uc3QgY2hvc2VuUGxheWVyID0gc2VsZWN0UGxheWVyKHRlYW1PYmplY3QpO1xuICAgICAgLy8gY29uc29sZS5sb2coY2hvc2VuUGxheWVyKTtcbiAgICAgIC8vIFdobyBoYXMgdGhlIGV2ZW50P1xuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAxOCA9PT0gMCkge1xuICAgICAgICAvLyBSYW5kb20gKFN0cmlrZXIsIE1pZGZpZWxkZXIpIHZzLiBHb2Fsa2VlcGVyID4gUmFuZFRoZWlyQXR0YWNrIHZzLiBSYW5kR29hbGtlZXBlclxuICAgICAgICBnb2FsQ2hhbmNlKGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcsIGRlZmVuZGluZ1RlYW0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnRWYWx1ZSAlIDgwID09PSAwKSB7XG4gICAgICAgIC8vIFN0cmlrZXIgdnMuIEdvYWxrZWVwZXIgPiBSYW5kVGhlaXJBdHRhY2sgdnMuIFJhbmRHb2Fsa2VlcGVyUGVuYWx0eVxuICAgICAgICBoYW5kbGVQZW5hbHR5KGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcsIGRlZmVuZGluZ1RlYW0pO1xuICAgICAgfVxuICAgICAgLy9cbiAgICAgIGlmIChldmVudFZhbHVlICUgOTAgPT09IDApIHtcbiAgICAgICAgLy8gUmFuZG9tIFBsYXllciA9PiBEaXNjaXBsaW5lID4gcmFuZG9tXG4gICAgICAgIHN0cmFpZ2h0UmVkKGRlZmVuZGluZ1RlYW0sIHRlYW1TdHJpbmcpO1xuICAgICAgfVxuICAgICAgLy9cbiAgICAgIGlmIChldmVudFZhbHVlICUgMjIgPT09IDApIHtcbiAgICAgICAgLy8gU3RyaWtlciB2cy4gR29hbGtlZXBlciA+IFJhbmRUaGVpckZyZWVraWNrIHZzLiBSYW5kR29hbGtlZXBlclBlbmFsdHlcbiAgICAgICAgaGFuZGxlRnJlZWtpY2soYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudFZhbHVlICUgMTQgPT09IDApIHtcbiAgICAgICAgLy8gUmFuZG9tUGxheWVyID0+IGRpc2NpcGxpbmUgKyBtYXRjaHRpbWUgcmFuZCB2cy4gcmFuZG9tXG4gICAgICAgIGhhbmRsZURpc2NpcGxpbmUoYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudFZhbHVlICUgNjAgPT09IDApIHtcbiAgICAgICAgaGFuZGxlSW5qdXJ5KGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZWR1Y2UgRml0bmVzc1xuICAgICAgbW92ZSgpO1xuICAgICAgdGltZUNvbnRyb2woKTtcbiAgICB9XG4gIH0sMjAwKTtcblxuICAvLyBFdmVudCBMaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBUZWFtIHNlbGVjdGlvblxuICAkKCcudGVhbS1pbnB1dCcpLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgdXNlclRlYW0gPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgaWYgKGhvbWVUZWFtID09PSBudWxsKSB7XG4gICAgICBjb25maWdUZWFtKGhvbWVUZWFtLCB1c2VyVGVhbSk7XG4gICAgICBjb25zb2xlLmxvZygnaG9tZVRlYW0gbm93IHNlbGVjdGVkIScpO1xuICAgICAgJCgnLnRpdGxlLW1lc3NhZ2UnKS50ZXh0KCdIb21lIHRlYW0gY2hvc2VuLiBOb3cgY2hvc2UgeW91ciBvcHBvbmVudC4nKTtcbiAgICAgIC8vIGUuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZ1RlYW0oYXdheVRlYW0sIHVzZXJUZWFtKTtcbiAgICAgIGNvbnNvbGUubG9nKCdhd2F5VGVhbSBub3cgc2VsZWN0ZWQhJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTdGFydGluZyBMaW5lIFVwXG4gICQoJyNyZXZlYWxUZWFtJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJldmVhbFRlYW0odGVhbVRhY3RpY3MpO1xuICB9KTtcblxuICAvLyAkKCcucGxheWVyLXNlbGVjdGlvbi1ib3ggYnV0dG9uJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAvL1xuICAvLyAgICQoJy50ZWFtLXBhbmVsJykuaHRtbCgnJyk7XG4gIC8vICAgY29uc3QgcG9zaXRpb25zID0gWydnb2Fsa2VlcGVyJywgJ2RlZmVuZGVyJywgJ21pZGZpZWxkZXInLCAnc3RyaWtlciddO1xuICAvLyAgIGhvbWVUZWFtLnBsYXllcnMuc29ydChmdW5jdGlvbihhLGIpe1xuICAvLyAgICAgcmV0dXJuIHBvc2l0aW9ucy5pbmRleE9mKGEucG9zaXRpb24pIDwgcG9zaXRpb25zLmluZGV4T2YoYi5wb3NpdGlvbikgPyAtMSA6IDE7XG4gIC8vICAgfSk7XG4gIC8vXG4gIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBob21lVGVhbS5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gIC8vICAgICBjb25zdCBwbGF5ZXIgPSBob21lVGVhbS5wbGF5ZXJzW2ldO1xuICAvLyAgICAgY29uc3Qgc3RhcnRpbmdFbGV2ZW4gPSBwbGF5ZXIucGxheWluZyA/ICcmIzEwMDA0OycgOiAnJiMxMDAwNzsnO1xuICAvL1xuICAvLyAgICAgJCgnLnRlYW0tcGFuZWwnKS5hcHBlbmQoXG4gIC8vICAgICAgIGA8cCBjbGFzcz1cInBsYXllci1saW5lICR7cGxheWVyLnBvc2l0aW9ufVwiIGlkPScke3BsYXllci5uYW1lfSc+XG4gIC8vICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGFydGluZ1wiIGlkPVwiJHtpfVwiPiR7c3RhcnRpbmdFbGV2ZW59PC9zcGFuPlxuICAvLyAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXBvc2l0aW9uIFwiPiR7cGxheWVyLnBvc2l0aW9ufTwvc3Bhbj5cbiAgLy8gICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1uYW1lXCI+JHtwbGF5ZXIubmFtZX08L3NwYW4+XG4gIC8vICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmF0dGFja308L3NwYW4+XG4gIC8vICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmRlZmVuY2V9PC9zcGFuPlxuICAvLyAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIj4ke3BsYXllci5jcmVhdGl2aXR5fTwvc3Bhbj5cbiAgLy8gICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCI+JHtwbGF5ZXIuZGVmZW5jZX08L3NwYW4+XG4gIC8vICAgICAgIDwvcD5gXG4gIC8vICAgICApO1xuICAvLyAgIH1cbiAgLy8gfSk7XG5cbiAgLy8gVG9nZ2xlIHllcy9ubyBwbGF5aW5nXG4gICQoJy50ZWFtLXBhbmVsJykub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllciA9IGUudGFyZ2V0LmlkO1xuICAgIGNob29zZVBsYXllcnModGVhbVRhY3RpY3MsIHNlbGVjdGVkUGxheWVyKTtcbiAgfSk7XG5cbiAgJHByaW1hcnlCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJ1biA9ICFydW47XG4gICAgJCgnI21hdGNoLXNldHVwLCAuaW5mby1tZXNzYWdlLCAudGVhbS1zZXR1cCcpLmhpZGUoKTtcbiAgICAkKCcjbWF0Y2gtZW5naW5lLCAuYXdheS10ZWFtLCAuaG9tZS10ZWFtLCAudGltZXInKS5zaG93KCk7XG4gICAgcnVuID8gJHByaW1hcnlCdXR0b24udGV4dCgnUGF1c2UnKSA6ICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BsYXknKTtcbiAgfSk7XG4gICQoJyNob21lVGVhbScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkKCcubWF0Y2gtc2V0dXAnKS5oaWRlKCk7XG4gICAgJCgnLnRlYW0tc2V0dXAnKS5zaG93KCk7XG4gICAgc2V0dXBUYWN0aWNzKGhvbWVUZWFtKTtcbiAgICB0ZWFtVGFjdGljcyA9IGhvbWVUZWFtO1xuXG4gIH0pO1xuXG4gICQoJyNhd2F5VGVhbScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkKCcubWF0Y2gtc2V0dXAnKS5oaWRlKCk7XG4gICAgJCgnLnRlYW0tc2V0dXAnKS5zaG93KCk7XG4gICAgc2V0dXBUYWN0aWNzKGF3YXlUZWFtKTtcbiAgICB0ZWFtVGFjdGljcyA9IGF3YXlUZWFtO1xuICB9KTtcblxuICBmdW5jdGlvbiBzZXR1cFRhY3RpY3ModGVhbU9iamVjdCkge1xuICAgICQoJy50ZWFtLXBhbmVsJykuaHRtbCgnJyk7XG4gICAgY29uc3QgcG9zaXRpb25zID0gWydnb2Fsa2VlcGVyJywgJ2RlZmVuZGVyJywgJ21pZGZpZWxkZXInLCAnc3RyaWtlciddO1xuICAgIHRlYW1PYmplY3QucGxheWVycy5zb3J0KGZ1bmN0aW9uKGEsYil7XG4gICAgICByZXR1cm4gcG9zaXRpb25zLmluZGV4T2YoYS5wb3NpdGlvbikgPCBwb3NpdGlvbnMuaW5kZXhPZihiLnBvc2l0aW9uKSA/IC0xIDogMTtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVhbU9iamVjdC5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSB0ZWFtT2JqZWN0LnBsYXllcnNbaV07XG4gICAgICBjb25zdCBzdGFydGluZ0VsZXZlbiA9IHBsYXllci5wbGF5aW5nID8gJyYjMTAwMDQ7JyA6ICcmIzEwMDA3Oyc7XG5cbiAgICAgICQoJy50ZWFtLXBhbmVsJykuYXBwZW5kKFxuICAgICAgICBgPHAgY2xhc3M9XCJwbGF5ZXItbGluZSAke3BsYXllci5wb3NpdGlvbn1cIiBpZD0nJHtwbGF5ZXIubmFtZX0nPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXJ0aW5nXCIgaWQ9XCIke2l9XCI+JHtzdGFydGluZ0VsZXZlbn08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXBvc2l0aW9uIFwiPiR7cGxheWVyLnBvc2l0aW9ufTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItbmFtZVwiPiR7cGxheWVyLm5hbWV9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCI+JHtwbGF5ZXIuYXR0YWNrfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmRlZmVuY2V9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCI+JHtwbGF5ZXIuY3JlYXRpdml0eX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIj4ke3BsYXllci5kZWZlbmNlfTwvc3Bhbj5cbiAgICAgICAgPC9wPmBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmV2ZWFsVGVhbSh0ZWFtT2JqZWN0KSB7XG4gICAgJCgnLnRlYW0tZGlzcGxheScpLmh0bWwoJycpO1xuICAgIGNvbnN0IGZvcm1hdGlvbiA9IFsnMSddLmNvbmNhdCh0ZWFtT2JqZWN0LmZvcm1hdGlvbi5zcGxpdCgnLScpKTtcbiAgICBjb25zdCBwb3NpdGlvbnMgPSBbJ2dvYWxrZWVwZXInLCAnZGVmZW5kZXInLCAnbWlkZmllbGRlcicsICdzdHJpa2VyJ107XG4gICAgbGV0IHBsYXllck51bWJlciA9IDA7XG4gICAgbGV0IHBvc2l0aW9uTnVtYmVyID0gMDtcblxuICAgIHRyeSB7XG4gICAgICBmb3JtYXRpb24ubWFwKChhcnJheUl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IHBhcnNlRmxvYXQoYXJyYXlJdGVtKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGl0ZXJhdGlvbnMpIHtcbiAgICAgICAgICBpZiAodGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0ucGxheWluZykge1xuICAgICAgICAgICAgJCgnLnRlYW0tZGlzcGxheScpLmFwcGVuZChgPHA+JHtwb3NpdGlvbnNbcG9zaXRpb25OdW1iZXJdfTogJHt0ZWFtT2JqZWN0LnBsYXllcnNbcGxheWVyTnVtYmVyXS5uYW1lfTwvcD5gKTtcbiAgICAgICAgICAgIHRlYW1PYmplY3QucGxheWVyc1twbGF5ZXJOdW1iZXJdLmNob3NlblBvc2l0aW9uID0gcG9zaXRpb25zW3Bvc2l0aW9uTnVtYmVyXTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2cocGxheWVyTnVtYmVyKTtcbiAgICAgICAgICBwbGF5ZXJOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICAkKCcudGVhbS1kaXNwbGF5JykuYXBwZW5kKCc8aHI+Jyk7XG4gICAgICAgIHBvc2l0aW9uTnVtYmVyKys7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgYWxlcnQoJ1NlbGVjdCAxMSBwbGF5ZXJzIScpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNob29zZVBsYXllcnModGVhbU9iamVjdCwgc2VsZWN0ZWRQbGF5ZXIpIHtcbiAgICB0ZWFtT2JqZWN0LnBsYXllcnNbc2VsZWN0ZWRQbGF5ZXJdLnBsYXlpbmcgPSAhdGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXS5wbGF5aW5nO1xuICAgIGNvbnNvbGUubG9nKHRlYW1PYmplY3QucGxheWVyc1tzZWxlY3RlZFBsYXllcl0ucGxheWluZyk7XG4gICAgdGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXS5wbGF5aW5nID8gJChgIyR7c2VsZWN0ZWRQbGF5ZXJ9YCkuaHRtbCgnJiMxMDAwNDsnKSA6ICQoYCMke3NlbGVjdGVkUGxheWVyfWApLmh0bWwoJyYjMTAwMDc7Jyk7XG4gIH1cblxuICAvLyBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGZ1bmN0aW9uIHRpbWVDb250cm9sKCkge1xuXG4gICAgaWYobWF0Y2hUaW1lID09PSA0NCkge1xuICAgICAgJGNvbW1lbnRhcnlCb3gudGV4dChgVGhhdCdzIGhhbGYtdGltZSFgKTtcbiAgICAgIHJ1biA9ICFydW47XG4gICAgICAkcHJpbWFyeUJ1dHRvbi50ZXh0KCdQbGF5Jyk7XG4gICAgfVxuXG4gICAgaWYobWF0Y2hUaW1lID09PSA5MCkge1xuICAgICAgJGNvbW1lbnRhcnlCb3gudGV4dChgVGhhdCdzIGZ1bGwtdGltZSFgKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJRCk7XG4gICAgICAkcHJpbWFyeUJ1dHRvbi50ZXh0KCdGaW5pc2gnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0Y2hUaW1lKys7XG4gICAgICAkbWF0Y2hUaW1lLnRleHQobWF0Y2hUaW1lKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGdlblJhbmRvbVZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWx1ZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZSgpIHtcblxuICAgIC8vIE5lZWQgdG8gc29ydCB0aGlzXG4gICAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lQmFyJyk7XG4gICAgd2lkdGggPSAoKGhvbWVUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKS9hd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykpICogMTAwKTtcbiAgICBjb25zb2xlLmxvZyhob21lVGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykpO1xuICAgIGNvbnNvbGUubG9nKGF3YXlUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSk7XG4gICAgY29uc29sZS5sb2cod2lkdGgpO1xuICAgIGVsZW0uc3R5bGUud2lkdGggPSB3aWR0aCArICclJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdFRlYW0oKSB7XG4gICAgY29uc3QgaG9tZVJhbmRvbSA9ICBnZW5SYW5kb21WYWx1ZShob21lVGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykpO1xuICAgIGNvbnN0IGF3YXlSYW5kb20gPSAgZ2VuUmFuZG9tVmFsdWUoYXdheVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpKTtcblxuICAgIGlmIChob21lUmFuZG9tID49IGF3YXlSYW5kb20pIHtcbiAgICAgICRjb21tZW50YXJ5Qm94LmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGhvbWVUZWFtLmNvbG9yc1swXSk7XG4gICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2NvbG9yJywgaG9tZVRlYW0uY29sb3JzWzFdKTtcbiAgICAgIGlmIChnZW5SYW5kb21WYWx1ZSgyMCkgJSA0ID09PSAwKSAkY29tbWVudGFyeUJveC50ZXh0KGdlbmVyYXRlQ29tbWVudGFyeSgnY2hhbmNlJywnJykpO1xuICAgICAgcmV0dXJuIFtob21lVGVhbSwgJ2hvbWUnLCBhd2F5VGVhbV07XG4gICAgfSBlbHNlIHtcbiAgICAgICRjb21tZW50YXJ5Qm94LmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGF3YXlUZWFtLmNvbG9yc1swXSk7XG4gICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgIGlmIChnZW5SYW5kb21WYWx1ZSgyMCkgJSA0ID09PSAwKSAkY29tbWVudGFyeUJveC50ZXh0KGdlbmVyYXRlQ29tbWVudGFyeSgnY2hhbmNlJywnJykpO1xuICAgICAgcmV0dXJuIFthd2F5VGVhbSwgJ2F3YXknLCBob21lVGVhbV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0UGxheWVyKHRlYW0pIHtcbiAgICBjb25zdCBnZW5SYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlYW0ucGxheWVycy5sZW5ndGgpO1xuICAgIHJldHVybiB0ZWFtLnBsYXllcnNbZ2VuUmFuZG9tSW5kZXhdO1xuICB9XG5cbiAgZnVuY3Rpb24gZ29hbENoYW5jZShhdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nLCBkZWZlbmRpbmdUZWFtKSB7XG4gICAgLy8gUmVmYWN0b3IgdGhpc1xuICAgIGxldCBzY29yZSA9IG51bGw7XG4gICAgbGV0IGdldFNjb3JlID0gbnVsbDtcbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllcigpO1xuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignZGVmZW5kZXInKTtcblxuICAgIGlmIChnZW5SYW5kb21WYWx1ZShhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrKSA+IGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kZWZlbmNlKSkge1xuICAgICAgaWYgKHRlYW1TdHJpbmcgPT09ICdob21lJykge1xuICAgICAgICBnZXRTY29yZSA9ICRob21lU2NvcmUudGV4dCgpO1xuICAgICAgICBzY29yZSA9IHBhcnNlRmxvYXQoZ2V0U2NvcmUpICsgMTtcbiAgICAgICAgJGhvbWVTY29yZS50ZXh0KHNjb3JlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdldFNjb3JlID0gJGF3YXlTY29yZS50ZXh0KCk7XG4gICAgICAgIHNjb3JlID0gcGFyc2VGbG9hdChnZXRTY29yZSkgKyAxO1xuICAgICAgICAkYXdheVNjb3JlLnRleHQoc2NvcmUpO1xuICAgICAgfVxuICAgICAgLy8kY29tbWVudGFyeUJveC50ZXh0KGBHb2FsIWApO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdnb2FsJywgYXR0YWNraW5nUGxheWVyKTtcblxuICAgICAgJChgIyR7dGVhbVN0cmluZ31FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1mdXRib2wtbycgc3R5bGU9J2ZvbnQtc2l6ZTogMjJweDsgY29sb3I6d2hpdGU7IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7YXR0YWNraW5nUGxheWVyLm5hbWV9IHNjb3JlZDxici8+YCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRGlzY2lwbGluZShhdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nLCBkZWZlbmRpbmdUZWFtKSB7XG4gICAgY29uc29sZS5sb2coJ1lFTExPVycpO1xuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyKCk7XG4gICAgY29uc3QgdGVhbSA9IHRlYW1TdHJpbmcgPT09ICdob21lJyA/ICdhd2F5JyA6ICdob21lJztcbiAgICBpZiAoKGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kaXNjaXBsaW5lKSArICgxMDAtbWF0Y2hUaW1lKSkgPCA5MCkge1xuICAgICAgLy8gQWxyZWFkeSBib29rZWQ/IFNlbmQgaGltIG9mZiFcbiAgICAgIGlmIChkZWZlbmRpbmdQbGF5ZXIuc3RhdHVzID09PSAnWWVsbG93Jykge1xuICAgICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnI0ZGMDAwMCcpO1xuICAgICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2NvbG9yJywgJyNGRkZGRkYnKTtcblxuICAgICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3NlY29uZFllbGxvdycsIGRlZmVuZGluZ1BsYXllcilcbiAgICAgICAgJChgIyR7dGVhbX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUgZXZlbnQtaXRlbScgc3R5bGU9J2ZvbnQtc2l6ZTogMjRweDsgY29sb3I6IHJlZDsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtkZWZlbmRpbmdQbGF5ZXIubmFtZX0gc2VudCBvZmY8YnIvPmApO1xuXG4gICAgICAgIGRlZmVuZGluZ1BsYXllci5zdGF0dXMgPSAnRWplY3RlZCc7XG4gICAgICAgIGRlZmVuZGluZ1BsYXllci5wbGF5aW5nID0gZmFsc2U7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRjb21tZW50YXJ5Qm94LmNzcygnYmFja2dyb3VuZC1jb2xvcicsICd5ZWxsb3cnKTtcbiAgICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsICcjMDAwMDAwJyk7XG4gICAgICAgIC8vICRjb21tZW50YXJ5Qm94LnRleHQoYCR7ZGVmZW5kaW5nUGxheWVyLm5hbWV9IGdldHMgYSB5ZWxsb3chYCk7XG4gICAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgneWVsbG93JywgZGVmZW5kaW5nUGxheWVyKVxuXG4gICAgICAgIC8vIFN0b3JlIG1lc2FnZXMgYW5kIGRldGFpbHMgaW4gYW4gZ2FtZSBPYmplY3RcbiAgICAgICAgJChgIyR7dGVhbX1FdmVudHNgKS5hcHBlbmQoYFxuICAgICAgICAgIDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUgZXZlbnQtaXRlbScgc3R5bGU9J2ZvbnQtc2l6ZTogMjRweDsgY29sb3I6IHllbGxvdzsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtkZWZlbmRpbmdQbGF5ZXIubmFtZX0gYm9va2VkPGJyLz5gKTtcblxuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIuc3RhdHVzID0gJ1llbGxvdyc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlSW5qdXJ5KGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcpIHtcbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllcigpO1xuICAgIC8vIFRIRVJFIENPVUxEIEJFIEFOIElOSlVSWVxuICAgIGlmIChnZW5SYW5kb21WYWx1ZSgxMDEpICUgOCA9PT0gMCkge1xuICAgICAgLy8gJGNvbW1lbnRhcnlCb3gudGV4dChgJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0gZ2V0cyB0YWtlbiBvZmYgb24gYSBzdHJldGNoZXIhYCk7XG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ2luanVyeScsIGF0dGFja2luZ1BsYXllcik7XG4gICAgICAkKGAjJHt0ZWFtU3RyaW5nfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLXBsdXMnIHN0eWxlPSdmb250LXNpemU6IDI2cHg7IGNvbG9yOiBncmVlbjsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0gaW5qdXJlZDxici8+YCk7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIucGxheWluZyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAkY29tbWVudGFyeUJveC50ZXh0KGAke2F0dGFja2luZ1BsYXllci5uYW1lfSdzIGxpbXBpbmcsIGJ1dCBoZSdsbCBiZSBva2F5YCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVGcmVla2ljayhhdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nLCBkZWZlbmRpbmdUZWFtKSB7XG4gICAgY29uc3QgYXR0YWNraW5nUGxheWVyID0gYXR0YWNraW5nVGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKCdtaWRmaWVsZGVyJyk7XG4gICAgY29uc3QgZGVmZW5kaW5nVmFsdWUgPSAoZGVmZW5kaW5nVGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKCdnb2Fsa2VlcGVyJykuZGVmZW5jZSArIGRlZmVuZGluZ1RlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnZGVmZW5kZXInKSk7XG5cbiAgICBpZiAoYXR0YWNraW5nUGxheWVyLmF0dGFjayA+IGRlZmVuZGluZ1ZhbHVlKSB7XG4gICAgICAvLyBSZWZhY3RvciB0aGlzXG4gICAgICBsZXQgc2NvcmUgPSBudWxsO1xuICAgICAgbGV0IGdldFNjb3JlID0gbnVsbDtcbiAgICAgIGlmICh0ZWFtU3RyaW5nID09PSAnaG9tZScpIHtcbiAgICAgICAgZ2V0U2NvcmUgPSAkaG9tZVNjb3JlLnRleHQoKTtcbiAgICAgICAgc2NvcmUgPSBwYXJzZUZsb2F0KGdldFNjb3JlKSArIDE7XG4gICAgICAgICRob21lU2NvcmUudGV4dChzY29yZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRTY29yZSA9ICRhd2F5U2NvcmUudGV4dCgpO1xuICAgICAgICBzY29yZSA9IHBhcnNlRmxvYXQoZ2V0U2NvcmUpICsgMTtcbiAgICAgICAgJGF3YXlTY29yZS50ZXh0KHNjb3JlKTtcbiAgICAgIH1cblxuICAgICAgLy8kY29tbWVudGFyeUJveC50ZXh0KGBJdCdzIGEgd29uZGVyIGdvYWwhIEdvYWwhYCk7XG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ2ZyZWVraWNrJywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke3RlYW1TdHJpbmd9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdmb250LXNpemU6IDIycHg7IGNvbG9yOndoaXRlOyBwYWRkaW5nLXRvcDo1cHgnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBzY29yZWQ8YnIvPmApO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnd2FzdGVkRnJlZWtpY2snLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBoYW5kbGVQZW5hbHR5KGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcsIGRlZmVuZGluZ1RlYW0pIHtcblxuICAgIGNvbnN0IGF0dGFja2luZ1BsYXllciA9IGF0dGFja2luZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignc3RyaWtlcicpO1xuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignZ29hbGtlZXBlcicpO1xuICAgIGNvbnN0IGJvb2tlZFBsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignZGVmZW5kZXInKTtcbiAgICBjb25zdCB0ZWFtID0gdGVhbVN0cmluZyA9PT0gJ2hvbWUnID8gJ2F3YXknIDogJ2hvbWUnO1xuICAgIC8vIEJvb2sgdGhlIHBsYXllcj9cbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMTAwKSA+IDI1KSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgYm9va2VkUGxheWVyLnN0YXR1cyA9ICdZZWxsb3cnO1xuICAgICAgJChgIyR7dGVhbX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUgZXZlbnQtaXRlbScgc3R5bGU9J2ZvbnQtc2l6ZTogMjRweDsgY29sb3I6IHllbGxvdzsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtib29rZWRQbGF5ZXIubmFtZX0gYm9va2VkPGJyLz5gKTtcbiAgICB9XG5cbiAgICBpZiAoKGdlblJhbmRvbVZhbHVlKGF0dGFja2luZ1BsYXllci5hdHRhY2spKjIpID4gZ2VuUmFuZG9tVmFsdWUoZGVmZW5kaW5nUGxheWVyLmRlZmVuY2UpKSB7XG5cbiAgICAgIGxldCBzY29yZSA9IG51bGw7XG4gICAgICBsZXQgZ2V0U2NvcmUgPSBudWxsO1xuICAgICAgaWYgKHRlYW1TdHJpbmcgPT09ICdob21lJykge1xuICAgICAgICBnZXRTY29yZSA9ICRob21lU2NvcmUudGV4dCgpO1xuICAgICAgICBzY29yZSA9IHBhcnNlRmxvYXQoZ2V0U2NvcmUpICsgMTtcbiAgICAgICAgJGhvbWVTY29yZS50ZXh0KHNjb3JlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdldFNjb3JlID0gJGF3YXlTY29yZS50ZXh0KCk7XG4gICAgICAgIHNjb3JlID0gcGFyc2VGbG9hdChnZXRTY29yZSkgKyAxO1xuICAgICAgICAkYXdheVNjb3JlLnRleHQoc2NvcmUpO1xuICAgICAgfVxuXG4gICAgICAvLyAkY29tbWVudGFyeUJveC50ZXh0KGAke2F0dGFja2luZ1BsYXllci5uYW1lfSdzIGNsaW5pY2FsIGZyb20gdGhlIHNwb3QhIEdvYWwhYCk7XG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3BlbmFsdHknLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgICAgJChgIyR7dGVhbVN0cmluZ31FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1mdXRib2wtbycgc3R5bGU9J2ZvbnQtc2l6ZTogMjJweDsgY29sb3I6d2hpdGU7IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7YXR0YWNraW5nUGxheWVyLm5hbWV9IHNjb3JlcyBwZW5hbHR5PGJyLz5gKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ21pc3NlZFBlbmFsdHknLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgICAgJChgIyR7dGVhbVN0cmluZ31FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1mdXRib2wtbycgc3R5bGU9J2ZvbnQtc2l6ZTogMjJweDsgY29sb3I6cmVkOyBwYWRkaW5nLXRvcDo1cHgnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBtaXNzZWQgcGVuYWx0eTxici8+YCk7XG5cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdHJhaWdodFJlZChkZWZlbmRpbmdUZWFtLCB0ZWFtU3RyaW5nKSB7XG4gICAgY29uc3QgZGVmZW5kaW5nUGxheWVyID0gZGVmZW5kaW5nVGVhbS5yYW5kb21QbGF5ZXIoKTtcbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoZGVmZW5kaW5nUGxheWVyLmRpc2NpcGxpbmUpIDwgMjUpIHtcbiAgICAgIGRlZmVuZGluZ1BsYXllci5wbGF5aW5nID0gZmFsc2U7XG4gICAgICBjb25zdCB0ZWFtID0gdGVhbVN0cmluZyA9PT0gJ2hvbWUnID8gJ2F3YXknIDogJ2hvbWUnO1xuICAgICAgLy8gJGNvbW1lbnRhcnlCb3gudGV4dCgnVGhlIHJlZmVyZWUgZ2l2ZXMgaGltIGEgc3RyYWlnaHQgcmVkIScpO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdzdHJhaWdodFJlZCcsIGRlZmVuZGluZ1BsYXllcik7XG4gICAgICAkKGAjJHt0ZWFtfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLXNxdWFyZScgc3R5bGU9J2ZvbnQtc2l6ZTogMjRweDsgY29sb3I6IHJlZDsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtkZWZlbmRpbmdQbGF5ZXIubmFtZX0gc2VudCBvZmY8YnIvPmApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbmZpZ1RlYW0odGVhbSwgc2VsZWN0b3IpIHtcbiAgICBpZiAoaG9tZVRlYW0gPT09IG51bGwpIHtcbiAgICAgICQoJy5ob21lLXRlYW0gIC50ZWFtLW5hbWUnKS50ZXh0KHNlbGVjdG9yKTtcbiAgICAgIHN3aXRjaCAoc2VsZWN0b3IpIHtcbiAgICAgICAgY2FzZSAnVG90dGVuaGFtJzpcbiAgICAgICAgICBob21lVGVhbSA9IHNwdXJzO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01hbiBVbml0ZWQnOlxuICAgICAgICAgIGhvbWVUZWFtID0gbWFuVW5pdGVkO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xpdmVycG9vbCc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBsaXZlcnBvb2w7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbSwgI2hvbWVCYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBob21lVGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0nKS5jc3MoJ2NvbG9yJywgaG9tZVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIENpdHknOlxuICAgICAgICAgIGhvbWVUZWFtID0gbWFuQ2l0eTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtLCAjaG9tZUJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGhvbWVUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbScpLmNzcygnY29sb3InLCBob21lVGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFdmVydG9uJzpcbiAgICAgICAgICBob21lVGVhbSA9IGV2ZXJ0b247XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbSwgI2hvbWVCYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBob21lVGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0nKS5jc3MoJ2NvbG9yJywgaG9tZVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQ2hlbHNlYSc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBjaGVsc2VhO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xlaWNlc3Rlcic6XG4gICAgICAgICAgaG9tZVRlYW0gPSBsZWljZXN0ZXI7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbSwgI2hvbWVCYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBob21lVGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0nKS5jc3MoJ2NvbG9yJywgaG9tZVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQXJzZW5hbCc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBhcnNlbmFsO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhob21lVGVhbSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgJCgnLmF3YXktdGVhbSAudGVhbS1uYW1lJykudGV4dChzZWxlY3Rvcik7XG5cbiAgICAgIHN3aXRjaCAoc2VsZWN0b3IpIHtcbiAgICAgICAgY2FzZSAnVG90dGVuaGFtJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IHNwdXJzO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0sIC5wb3NzZXNzaW9uLWJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGF3YXlUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbScpLmNzcygnY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNYW4gVW5pdGVkJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IG1hblVuaXRlZDtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtLCAucG9zc2Vzc2lvbi1iYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTGl2ZXJwb29sJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IGxpdmVycG9vbDtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtLCAucG9zc2Vzc2lvbi1iYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIENpdHknOlxuICAgICAgICAgIGF3YXlUZWFtID0gbWFuQ2l0eTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtLCAucG9zc2Vzc2lvbi1iYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRXZlcnRvbic6XG4gICAgICAgICAgYXdheVRlYW0gPSBldmVydG9uO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0sIC5wb3NzZXNzaW9uLWJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGF3YXlUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbScpLmNzcygnY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdDaGVsc2VhJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IGNoZWxzZWE7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xlaWNlc3Rlcic6XG4gICAgICAgICAgYXdheVRlYW0gPSBsZWljZXN0ZXI7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fyc2VuYWwnOlxuICAgICAgICAgIGF3YXlUZWFtID0gYXJzZW5hbDtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtLCAucG9zc2Vzc2lvbi1iYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGF3YXlUZWFtKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhzZWxlY3Rvcik7XG4gICAgLy8gUGFzcyBpbiB0aGUgb2JqZWN0IHZhbHVlcyB0byBob21lVGVhbVxuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVDb21tZW50YXJ5KHNjZW5hcmlvLCBwbGF5ZXIpIHtcbiAgICBjb25zdCBjb21tZW50YXJ5ID0ge1xuICAgICAgZ29hbDogWydHb2FsIScsICdIZVxcJ3Mgc2NvcmVkIScsIGBUaGF0J3MgYSBncmVhdCBmaW5pc2ghYCwgYFdoYXQgYSBnb2FsIGJ5ICR7cGxheWVyLm5hbWV9YCwgYCR7cGxheWVyLm5hbWV9IGZpbmlzaGVzIG9mZiB0aGUgbW92ZSFgXSxcbiAgICAgIGZyZWVraWNrOiBbYEl0J3MgYSBmcmVla2lja2AsIGAke3BsYXllci5uYW1lfSB0byB0YWtlIHRoZSBmcmVla2lja2AsIGBIZSBsaW5lcyB1cCB0aGUgZnJlZWtpY2tgLCBgVGhpcyBpcyBhIGNoYW5jZSB0byBnZXQgYSBjcm9zcyBpbmBdLFxuICAgICAgd2FzdGVkRnJlZWtpY2s6IFtgJHtwbGF5ZXIubmFtZX0gbG9zZXMgcG9zc2Vzc2lvbmAsIGBUaGF0J3MgZW5kZWQgdXAgaW4gcm93IFpgLCBgVGhlIGF0dGFjayBhbW91bnRzIHRvIG5vdGhpbmdgLCBgJHtwbGF5ZXIubmFtZX0gaGFzIHdhc3RlZCB0aGF0IG9wcG9ydHVuaXR5YCwgYCR7cGxheWVyLm5hbWV9J3MgZWZmb3J0IGdvZXMgb3ZlciB0aGUgYmFyYCwgYEhlIGhhbmRzIGJhY2sgcG9zc2Vzc2lvbiB0byB0aGUgb3RoZXIgdGVhbWBdLFxuICAgICAgeWVsbG93OiBbYEhlJ3MgZ29pbmcgaW4gdGhlIGJvb2tgLCBgT3VjaCEgJHtwbGF5ZXIubmFtZX0nbGwgYSB5ZWxsb3cgZm9yIHRoYXRgLCBgVGhhdCdzIGEgYm9va2luZ2AsIGBJdCdzIGEgeWVsbG93IWAsIGBUaGUgcmVmIGlzIHRha2luZyBoaXMgbmFtZWBdLFxuICAgICAgc2Vjb25kWWVsbG93OiBbYEhlJ3MgYWxyZWFkeSBiZWVuIGJvb2tlZC4uLmAsIGBUaGF0J3MgYSBzZWNvbmQgeWVsbG93YCwgYCR7cGxheWVyLm5hbWV9IGlzIHNob3duIGEgcmVkIWAsIGAke3BsYXllci5uYW1lfSBpcyBvZmZgXSxcbiAgICAgIHN0cmFpZ2h0UmVkOiBbYCR7cGxheWVyLm5hbWV9IGlzIHNob3duIGEgc3RyYWlnaHQgcmVkIWAsIGAke3BsYXllci5uYW1lfSBpcyBvZmZgLCBgVGhlIHJlZiBoYXMgZ2l2ZW4gaGltIHN0cmFpZ2h0IHJlZCFgXSxcbiAgICAgIHBlbmFsdHk6IFtgVGhlIHJlZmVyZWUgcG9pbnRzIHRvIHRoZSBzcG90YCwgYFRoYXQncyBhIHBlbmFsdHlgLCBgJHtwbGF5ZXIubmFtZX0gaXMgZm91bGVkIGluIHRoZSBhcmVhYCwgYFRoZSByZWYgYmxvd3MgaGlzIHdoaXN0bGUuIFBlbmFsdHkuYF0sXG4gICAgICBtaXNzZWRQZW5hbHR5OiBbYFNhdmVkIWAsIGBJdCdzIG92ZXIgdGhlIGJhcmAsIGAke3BsYXllci5uYW1lfSBoYXMgbWlzc2VkIGl0IWAsIGBPaCBkZWFyISAke3BsYXllci5uYW1lfSdzIHB1dCBpdCB3aWRlJ2BdLFxuICAgICAgaW5qdXJ5OiBbYCR7cGxheWVyLm5hbWV9J3MgaXMgZ29pbmcgb2ZmYCxgJHtwbGF5ZXIubmFtZX0gaXMgaW5qdXJlZGAsYCR7cGxheWVyLm5hbWV9IGNhbid0IGNvbnRpbnVlYF0sXG4gICAgICBjaGFuY2U6IFtgVGhlIGJhbGwgaXMgd2FzdGVkYCwgYFBvc3Nlc3Npb24gaXMgc2xvcHBpbHkgZ2l2ZW4gYXdheWAsIGBUaGF0IGlzIHdhc3RlZGAsIGBUaGUgcmVmZXJlZSBwdWxscyBiYWNrIHBsYXlgLCBgVGhlIGJhbGwgZ29lcyBvdXQgZm9yIGEgdGhyb3dgLCBgR29vZCBpbnRlcmNlcHRpb24hYCwgYEhlJ3Mgcm9iYmVkIGhpbSBvZiBwb3NzZXNpb25gXVxuICAgIH07XG4gICAgY29uc3QgcmFuZG9tZUluZGV4ID0gZ2VuUmFuZG9tVmFsdWUoY29tbWVudGFyeVtzY2VuYXJpb10ubGVuZ3RoKTtcbiAgICBjb25zdCBtZXNzYWdlID0gY29tbWVudGFyeVtzY2VuYXJpb11bcmFuZG9tZUluZGV4XTtcbiAgICAkY29tbWVudGFyeUJveC50ZXh0KGAke21lc3NhZ2V9YCk7XG5cbiAgfVxuXG59KTtcbiJdfQ==
