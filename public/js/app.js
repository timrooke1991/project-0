"use strict";var _slicedToArray=function(){function e(e,a){var o=[],s=!0,t=!1,n=void 0;try{for(var r,l=e[Symbol.iterator]();!(s=(r=l.next()).done)&&(o.push(r.value),!a||o.length!==a);s=!0);}catch(e){t=!0,n=e}finally{try{!s&&l.return&&l.return()}finally{if(t)throw n}}return o}return function(a,o){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(function(){function e(e){$(".team-panel").html(""),$(".formation").val(e.formation);var a=["goalkeeper","defender","midfielder","striker"];e.players.sort(function(e,o){return a.indexOf(e.position)<a.indexOf(o.position)?-1:1});for(var o=0;o<e.players.length;o++){var s=e.players[o],t=s.playing?"&#10004;":"&#10007;";$(".team-panel").append('<p class="player-line '+s.position+"\" id='"+s.name+'\'>\n        <span class="starting" id="'+o+'">'+t+'</span>\n        <span class="player-position ">'+s.position+'</span>\n        <span class="player-name">'+s.name+'</span>\n        <span class="player-stat">'+s.attack+'</span>\n        <span class="player-stat">'+s.defence+'</span>\n        <span class="player-stat">'+s.creativity+'</span>\n        <span class="player-stat">'+s.defence+"</span>\n        </p>")}}function a(e){$(".team-display").html("");var a=["1"].concat(e.formation.split("-")),o=["goalkeeper","defender","midfielder","striker"],s=0,t=0;try{a.map(function(a){for(var n=parseFloat(a),r=0;r<n;){if(e.players[s].playing){var l=o[t]!==e.players[s].position?"orange":"";$(".team-display").append("<span class='player-block "+l+" "+e.players[s].status+"'>"+e.players[s].name+"</span>"),e.players[s].chosenPosition=o[t],r++}console.log(s),s++}$(".team-display").append('<div class="seperate-players">'),t++})}catch(e){$(".team-display").append("<p class='team-selection-warning seperate-players'>Less than 11 players selected!</p>")}}function o(e,o){e.players[o].playing=!e.players[o].playing,console.log(e.players[o].playing),e.players[o].playing?$("#"+o).html("&#10004;"):$("#"+o).html("&#10007;"),a(v)}function s(){44===w&&(f.text("That's half-time!"),x=!x,g.text("Play")),90===w?(f.text("That's full-time!"),clearInterval(B),g.text("Finish")):(w++,u.text(w))}function t(e){return Math.floor(Math.random()*e)}function n(){var e=document.getElementById("homeBar");P=T.averagePlayerValues("creativity")/F.averagePlayerValues("creativity")*100,console.log(T.averagePlayerValues("creativity")),console.log(F.averagePlayerValues("creativity")),console.log(P),e.style.width=P+"%"}function r(){return t(T.averagePlayerValues("creativity"))>=t(F.averagePlayerValues("creativity"))?(f.css("background-color",T.colors[0]),f.css("color",T.colors[1]),t(20)%4==0&&f.text(y("chance","")),[T,"home",F]):(f.css("background-color",F.colors[0]),f.css("color",F.colors[1]),t(20)%4==0&&f.text(y("chance","")),[F,"away",T])}function l(e,a,o){var s=null,n=null,r=e.randomPlayer(),l=o.randomPlayerByPosition("defender");t(r.attack)>t(l.defence)&&("home"===a?(n=b.text(),s=parseFloat(n)+1,b.text(s)):(n=k.text(),s=parseFloat(n)+1,k.text(s)),y("goal",r),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:white; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+r.name+" scored<br/>"))}function c(e,a,o){console.log("YELLOW");var s=o.randomPlayer(),n="home"===a?"away":"home";t(s.discipline)+(100-w)<90&&("Yellow"===s.status?(f.css("background-color","#FF0000"),f.css("color","#FFFFFF"),y("secondYellow",s),$("#"+n+"Events").append("<i class='fa fa-square event-item' style='font-size: 24px; color: red; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" sent off<br/>"),s.status="ejected",s.playing=!1):(f.css("background-color","yellow"),f.css("color","#000000"),y("yellow",s),$("#"+n+"Events").append("\n          <i class='fa fa-square event-item' style='font-size: 24px; color: yellow; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" booked<br/>"),s.status="yellow"))}function i(e,a){var o=e.randomPlayer();t(101)%8==0?(y("injury",o),$("#"+a+"Events").append("<i class='fa fa-plus' style='font-size: 26px; color: green; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+o.name+" injured<br/>"),o.playing=!1):f.text(o.name+"'s limping, but he'll be okay")}function m(e,a,o){var s=e.randomPlayerByPosition("midfielder"),t=o.randomPlayerByPosition("goalkeeper").defence+o.averagePlayerValues("defender");if(s.attack>t){var n=null,r=null;"home"===a?(r=b.text(),n=parseFloat(r)+1,b.text(n)):(r=k.text(),n=parseFloat(r)+1,k.text(n)),y("freekick",s),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:white; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" scored<br/>")}else y("wastedFreekick",s)}function p(e,a,o){var s=e.randomPlayerByPosition("striker"),n=o.randomPlayerByPosition("goalkeeper"),r=o.randomPlayerByPosition("defender"),l="home"===a?"away":"home";if(t(100)>25&&(r.status="yellow",$("#"+l+"Events").append("<i class='fa fa-square event-item' style='font-size: 24px; color: yellow; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+r.name+" booked<br/>")),2*t(s.attack)>t(n.defence)){var c=null,i=null;"home"===a?(i=b.text(),c=parseFloat(i)+1,b.text(c)):(i=k.text(),c=parseFloat(i)+1,k.text(c)),y("penalty",s),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:white; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" scores penalty<br/>")}else y("missedPenalty",s),$("#"+a+"Events").append("<i class='fa fa-futbol-o' style='font-size: 22px; color:red; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+s.name+" missed penalty<br/>")}function d(e,a){var o=e.randomPlayer();if(t(o.discipline)<25){o.playing=!1;var s="home"===a?"away":"home";y("straightRed",o),$("#"+s+"Events").append("<i class='fa fa-square' style='font-size: 24px; color: red; padding-top:5px' aria-hidden='true'></i> "+w+" mins: "+o.name+" sent off<br/>")}}function h(e,a){if(null===T){switch($(".home-team  .team-name").text(a),a){case"Tottenham":T=spurs,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Man United":T=manUnited,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Liverpool":T=liverpool,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Man City":T=manCity,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Everton":T=everton,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Chelsea":T=chelsea,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Leicester":T=leicester,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1]);break;case"Arsenal":T=arsenal,$(".home-team, #homeBar").css("background-color",T.colors[0]),$(".home-team").css("color",T.colors[1])}console.log(T)}else{switch($(".away-team .team-name").text(a),a){case"Tottenham":F=spurs,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Man United":F=manUnited,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Liverpool":F=liverpool,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Man City":F=manCity,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Everton":F=everton,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Chelsea":F=chelsea,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Leicester":F=leicester,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1]);break;case"Arsenal":F=arsenal,$(".away-team, .possession-bar").css("background-color",F.colors[0]),$(".away-team").css("color",F.colors[1])}console.log(F)}console.log(a)}function y(e,a){var o={goal:["Goal!","He's scored!","That's a great finish!","What a goal by "+a.name,a.name+" finishes off the move!"],freekick:["It's a freekick",a.name+" to take the freekick","He lines up the freekick","This is a chance to get a cross in"],wastedFreekick:[a.name+" loses possession","That's ended up in row Z","The attack amounts to nothing",a.name+" has wasted that opportunity",a.name+"'s effort goes over the bar","He hands back possession to the other team"],yellow:["He's going in the book","Ouch! "+a.name+"'ll a yellow for that","That's a booking","It's a yellow!","The ref is taking his name"],secondYellow:["He's already been booked...","That's a second yellow",a.name+" is shown a red!",a.name+" is off"],straightRed:[a.name+" is shown a straight red!",a.name+" is off","The ref has given him straight red!"],penalty:["The referee points to the spot","That's a penalty",a.name+" is fouled in the area","The ref blows his whistle. Penalty."],missedPenalty:["Saved!","It's over the bar",a.name+" has missed it!","Oh dear! "+a.name+"'s put it wide'"],injury:[a.name+"'s is going off",a.name+" is injured",a.name+" can't continue"],chance:["The ball is wasted","Possession is sloppily given away","That is wasted","The referee pulls back play","The ball goes out for a throw","Good interception!","He's robbed him of possesion"]},s=t(o[e].length),n=o[e][s];f.text(""+n)}var u=$(".changing-minutes"),f=$("#commentaryBox"),g=$(".primary-button"),b=$(".home-team .score"),k=$(".away-team .score"),v=null,w=0,x=!1,P=50,T=null,F=null,B=setInterval(function(){if(x){var e=t(100)+1;console.log(w+": "+e);var a=r(),o=_slicedToArray(a,3),h=o[0],y=o[1],u=o[2];e%18==0&&l(h,y,u),e%80==0&&p(h,y,u),e%90==0&&d(u,y),e%22==0&&m(h,y,u),e%14==0&&c(h,y,u),e%60==0&&i(h,y),n(),s()}},200);$(".team-input").on("click",function(e){var a=e.target.innerHTML;null===T?(h(T,a),console.log("homeTeam now selected!"),$(".title-message").text("Home team chosen. Now chose your opponent.")):(h(F,a),console.log("awayTeam now selected!"),$(".title-message").text("Opponent selected. Now edit tactics or proceed to match."))}),$("#revealTeam").on("click",function(){a(v)}),$(".team-panel").on("click",function(e){var a=e.target.id;o(v,a)}),g.on("click",function(){x=!x,$("#match-setup, .info-message, .team-setup").hide(),$("#match-engine, .away-team, .home-team, .timer").show(),x?g.text("Pause"):g.text("Play")}),$("#homeTeam").on("click",function(){x&&(x=!x),g.text("Play"),$(".match-setup, .match-engine").hide(),$(".team-setup").show(),e(T),v=T,a(v)}),$("#awayTeam").on("click",function(){x&&(x=!x),g.text("Play"),$(".match-setup, .match-engine").hide(),$(".team-setup").show(),e(F),v=F,a(v)}),$(".go-back").on("click",function(){$(".team-setup").hide(),$(".match-setup").show()}),$(".formation").on("change",function(e){var o=e.target.value;v.formation=o,a(v)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwic2V0dXBUYWN0aWNzIiwic2hvdyIsImh0bWwiLCJ2YWwiLCJ0ZWFtT2JqZWN0IiwiZm9ybWF0aW9uIiwidGVhbVRhY3RpY3MiLCJuZXdGb3JtYXRpb24iLCJyZXZlYWxUZWFtIiwiYSIsImIiLCJwb3NpdGlvbnMiLCJpbmRleE9mIiwicG9zaXRpb24iLCJpIiwicGxheWVycyIsImxlbmd0aCIsInBsYXllciIsInN0YXJ0aW5nRWxldmVuIiwicGxheWluZyIsInNvcnQiLCJhdHRhY2siLCJkZWZlbmNlIiwiY3JlYXRpdml0eSIsInBsYXllck51bWJlciIsImNvbmNhdCIsInNwbGl0IiwicG9zaXRpb25OdW1iZXIiLCJtYXAiLCJhcnJheUl0ZW0iLCJpdGVyYXRpb25zIiwid2FybmluZ01lc3NhZ2UiLCJhcHBlbmQiLCJjaG9zZW5Qb3NpdGlvbiIsInN0YXR1cyIsIm5hbWUiLCJlcnIiLCJzZWxlY3RlZFBsYXllciIsImNvbnNvbGUiLCJsb2ciLCJydW4iLCJtYXRjaFRpbWUiLCIkY29tbWVudGFyeUJveCIsInRleHQiLCIkbWF0Y2hUaW1lIiwiJHByaW1hcnlCdXR0b24iLCJnZW5SYW5kb21WYWx1ZSIsInZhbHVlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZWxlbSIsInN0eWxlIiwid2lkdGgiLCJob21lVGVhbSIsImF2ZXJhZ2VQbGF5ZXJWYWx1ZXMiLCJhd2F5VGVhbSIsInNlbGVjdFRlYW0iLCJob21lUmFuZG9tIiwiYXdheVJhbmRvbSIsImNvbG9ycyIsImdlbmVyYXRlQ29tbWVudGFyeSIsImNzcyIsInRlYW0iLCJnZW5SYW5kb21JbmRleCIsImRlZmVuZGluZ1BsYXllciIsImRlZmVuZGluZ1RlYW0iLCJyYW5kb21QbGF5ZXJCeVBvc2l0aW9uIiwiZ2V0U2NvcmUiLCJ0ZWFtU3RyaW5nIiwiJGhvbWVTY29yZSIsInJhbmRvbVBsYXllciIsInNjb3JlIiwiYXR0YWNraW5nUGxheWVyIiwiJGF3YXlTY29yZSIsInBhcnNlRmxvYXQiLCJoYW5kbGVEaXNjaXBsaW5lIiwiYXR0YWNraW5nVGVhbSIsImRpc2NpcGxpbmUiLCJoYW5kbGVGcmVla2ljayIsImRlZmVuZGluZ1ZhbHVlIiwiYm9va2VkUGxheWVyIiwiY29uZmlnVGVhbSIsInNlbGVjdG9yIiwic3B1cnMiLCJtYW5Vbml0ZWQiLCJsaXZlcnBvb2wiLCJtYW5DaXR5IiwiZXZlcnRvbiIsImNoZWxzZWEiLCJsZWljZXN0ZXIiLCJhcnNlbmFsIiwiY29tbWVudGFyeSIsIndhc3RlZEZyZWVraWNrIiwic3RyYWlnaHRSZWQiLCJjaGFuY2UiLCJzY2VuYXJpbyIsImdvYWwiLCJyYW5kb21JbmRleCIsImZyZWVraWNrIiwibWVzc2FnZSIsInllbGxvdyIsInNlY29uZFllbGxvdyIsInBlbmFsdHkiLCJtaXNzZWRQZW5hbHR5IiwiaW5qdXJ5Iiwic2V0SW50ZXJ2YWwiLCJ0aW1lcklEIiwiZXZlbnRWYWx1ZSIsIl9zZWxlY3RUZWFtIiwiX3NlbGVjdFRlYW0yIiwiX3NsaWNlZFRvQXJyYXkiLCJnb2FsQ2hhbmNlIiwiaGFuZGxlUGVuYWx0eSIsImhhbmRsZUluanVyeSIsIm1vdmUiLCJ0aW1lQ29udHJvbCIsIm9uIiwiZSIsInVzZXJUZWFtIiwidGFyZ2V0IiwiaW5uZXJIVE1MIiwiaWQiLCJjaG9vc2VQbGF5ZXJzIiwiaGlkZSJdLCJtYXBwaW5ncyI6Im1jQUFBQSxHQUFFLFdBd0pFQSxRQUFFQyxHQUFnQkMsR0FGcEJGLEVBQUEsZUFBQUcsS0FBQSxJQWFFSCxFQUFFLGNBQWNJLElBQUlDLEVBQVdDLFVBTi9CQyxJQUFBQSxJQUFZRCxhQUFZRSxXQUF4QixhQUFBLFVBQ0FDLEdBQVdGLFFBQUFBLEtBQVgsU0FBQUcsRUFBQUMsR0FIRixNQUFBQyxHQUFBQyxRQUFBSCxFQUFBSSxVQUFBRixFQUFBQyxRQUFBRixFQUFBRyxXQUFBLEVBQUEsR0FPRWQsS0FBRSxHQUFBZSxHQUFBLEVBQUZBLEVBQWlCWixFQUFqQmEsUUFBQUMsT0FBQUYsSUFBQSxDQUNFLEdB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QUFqRixHQUFBaUYsRUFBQUUsT0FBQUUsRUFDQUMsR0FBQXJILEVBQUErQixLQUdBUSxFQUFBd0UsR0FBQSxRQUFBLFdBQ0E3RSxHQUFBQSxFQUNBekMsRUFBQSw0Q0FBQTZILE9BV0U3SCxFQUFFLGlEQUFpREUsT0FUckR1QyxFQUFBSyxFQUFBRixLQUFBLFNBQUFFLEVBQUFGLEtBQUEsVUFHRWdGLEVBQUFBLGFBQUFBLEdBQWNySCxRQUFkLFdBRkZrQyxJQWNJQSxHQUFPQSxHQVJUQSxFQUFBRyxLQUFBLFFBQ0E1QyxFQUFFLCtCQUFBNkgsT0FDRjdILEVBQUUsZUFBQUUsT0FDRnVDLEVBQU1LLEdBSlJ2QyxFQUFBZ0QsRUFnQkU5QyxFQUFXRixLQU5WUCxFQUFBLGFBQUFzSCxHQUFBLFFBQUEsV0FDRHhFLElBQ0VMLEdBQUFBLEdBRUZ4QyxFQUFhc0QsS0FBQUEsUUFDYmhELEVBQUFBLCtCQUFBc0gsT0FDQXBILEVBQUFBLGVBQVdGLE9BVGJOLEVBQUF3RCxHQXFCRWxELEVBQWNrRCxFQVJkaEQsRUFBRkYsS0FHR1AsRUFBQSxZQUFBc0gsR0FBQSxRQUFBLFdBQ0R4RSxFQUFBQSxlQUFlRixPQUNmNUMsRUFBRSxnQkFBQUUsU0FHRkssRUFBQUEsY0FBY2tELEdBQUFBLFNBQWQsU0FBQThELEdBQ0E5RyxHQUFBQSxHQUFXRixFQUFYa0gsT0FBQXpFLEtBVEZ6QyxHQUFBRCxVQUFBRSxFQW9CRUMsRUFBV0YiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnN0ICRtYXRjaFRpbWUgPSAkKCcuY2hhbmdpbmctbWludXRlcycpO1xuICBjb25zdCAkY29tbWVudGFyeUJveCA9ICQoJyNjb21tZW50YXJ5Qm94Jyk7XG4gIGNvbnN0ICRwcmltYXJ5QnV0dG9uID0gJCgnLnByaW1hcnktYnV0dG9uJyk7XG4gIGNvbnN0ICRob21lU2NvcmUgPSAkKCcuaG9tZS10ZWFtIC5zY29yZScpO1xuICBjb25zdCAkYXdheVNjb3JlID0gJCgnLmF3YXktdGVhbSAuc2NvcmUnKTtcbiAgLy8gY29uc3QgJGhvbWVUZWFtID0gJCgnLmhvbWUtdGVhbScpO1xuICAvLyBjb25zdCAkYXdheVRlYW0gPSAkKCcuYXdheS10ZWFtJyk7XG4gIGxldCB0ZWFtVGFjdGljcyA9IG51bGw7XG5cbiAgbGV0IG1hdGNoVGltZSA9IDA7XG4gIGxldCBydW4gPSBmYWxzZTtcbiAgbGV0IHdpZHRoID0gNTA7XG4gIGxldCBob21lVGVhbSA9IG51bGw7XG4gIGxldCBhd2F5VGVhbSA9IG51bGw7XG5cblxuICAvLyBNQVRDSCBMT0dJQ1xuICBjb25zdCB0aW1lcklEID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJ1biApIHtcblxuICAgICAgY29uc3QgZXZlbnRWYWx1ZSA9IGdlblJhbmRvbVZhbHVlKDEwMCkgKyAxO1xuICAgICAgY29uc29sZS5sb2coYCR7bWF0Y2hUaW1lfTogJHtldmVudFZhbHVlfWApO1xuXG4gICAgICAvLyBDcmVhdGl2aXR5IFN1bUNyZWF0aXZpdHkgdnMuIFN1bUNyZWF0aXZpdHlcbiAgICAgIGNvbnN0IFthdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nLCBkZWZlbmRpbmdUZWFtXSA9IHNlbGVjdFRlYW0oKTtcblxuICAgICAgLy8gY29uc3QgY2hvc2VuUGxheWVyID0gc2VsZWN0UGxheWVyKHRlYW1PYmplY3QpO1xuICAgICAgLy8gY29uc29sZS5sb2coY2hvc2VuUGxheWVyKTtcbiAgICAgIC8vIFdobyBoYXMgdGhlIGV2ZW50P1xuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAxOCA9PT0gMCkge1xuICAgICAgICAvLyBSYW5kb20gKFN0cmlrZXIsIE1pZGZpZWxkZXIpIHZzLiBHb2Fsa2VlcGVyID4gUmFuZFRoZWlyQXR0YWNrIHZzLiBSYW5kR29hbGtlZXBlclxuICAgICAgICBnb2FsQ2hhbmNlKGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcsIGRlZmVuZGluZ1RlYW0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnRWYWx1ZSAlIDgwID09PSAwKSB7XG4gICAgICAgIC8vIFN0cmlrZXIgdnMuIEdvYWxrZWVwZXIgPiBSYW5kVGhlaXJBdHRhY2sgdnMuIFJhbmRHb2Fsa2VlcGVyUGVuYWx0eVxuICAgICAgICBoYW5kbGVQZW5hbHR5KGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcsIGRlZmVuZGluZ1RlYW0pO1xuICAgICAgfVxuICAgICAgLy9cbiAgICAgIGlmIChldmVudFZhbHVlICUgOTAgPT09IDApIHtcbiAgICAgICAgLy8gUmFuZG9tIFBsYXllciA9PiBEaXNjaXBsaW5lID4gcmFuZG9tXG4gICAgICAgIHN0cmFpZ2h0UmVkKGRlZmVuZGluZ1RlYW0sIHRlYW1TdHJpbmcpO1xuICAgICAgfVxuICAgICAgLy9cbiAgICAgIGlmIChldmVudFZhbHVlICUgMjIgPT09IDApIHtcbiAgICAgICAgLy8gU3RyaWtlciB2cy4gR29hbGtlZXBlciA+IFJhbmRUaGVpckZyZWVraWNrIHZzLiBSYW5kR29hbGtlZXBlclBlbmFsdHlcbiAgICAgICAgaGFuZGxlRnJlZWtpY2soYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudFZhbHVlICUgMTQgPT09IDApIHtcbiAgICAgICAgLy8gUmFuZG9tUGxheWVyID0+IGRpc2NpcGxpbmUgKyBtYXRjaHRpbWUgcmFuZCB2cy4gcmFuZG9tXG4gICAgICAgIGhhbmRsZURpc2NpcGxpbmUoYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudFZhbHVlICUgNjAgPT09IDApIHtcbiAgICAgICAgaGFuZGxlSW5qdXJ5KGF0dGFja2luZ1RlYW0sIHRlYW1TdHJpbmcpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZWR1Y2UgRml0bmVzc1xuICAgICAgbW92ZSgpO1xuICAgICAgdGltZUNvbnRyb2woKTtcbiAgICB9XG4gIH0sMjAwKTtcblxuICAvLyBFdmVudCBMaXN0ZW5lcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBUZWFtIHNlbGVjdGlvblxuICAkKCcudGVhbS1pbnB1dCcpLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgdXNlclRlYW0gPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgaWYgKGhvbWVUZWFtID09PSBudWxsKSB7XG4gICAgICBjb25maWdUZWFtKGhvbWVUZWFtLCB1c2VyVGVhbSk7XG4gICAgICBjb25zb2xlLmxvZygnaG9tZVRlYW0gbm93IHNlbGVjdGVkIScpO1xuICAgICAgJCgnLnRpdGxlLW1lc3NhZ2UnKS50ZXh0KCdIb21lIHRlYW0gY2hvc2VuLiBOb3cgY2hvc2UgeW91ciBvcHBvbmVudC4nKTtcbiAgICAgIC8vIGUuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZ1RlYW0oYXdheVRlYW0sIHVzZXJUZWFtKTtcbiAgICAgIGNvbnNvbGUubG9nKCdhd2F5VGVhbSBub3cgc2VsZWN0ZWQhJyk7XG4gICAgICAkKCcudGl0bGUtbWVzc2FnZScpLnRleHQoJ09wcG9uZW50IHNlbGVjdGVkLiBOb3cgZWRpdCB0YWN0aWNzIG9yIHByb2NlZWQgdG8gbWF0Y2guJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTdGFydGluZyBMaW5lIFVwXG4gICQoJyNyZXZlYWxUZWFtJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJldmVhbFRlYW0odGVhbVRhY3RpY3MpO1xuICB9KTtcblxuICAvLyAkKCcucGxheWVyLXNlbGVjdGlvbi1ib3ggYnV0dG9uJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAvL1xuICAvLyAgICQoJy50ZWFtLXBhbmVsJykuaHRtbCgnJyk7XG4gIC8vICAgY29uc3QgcG9zaXRpb25zID0gWydnb2Fsa2VlcGVyJywgJ2RlZmVuZGVyJywgJ21pZGZpZWxkZXInLCAnc3RyaWtlciddO1xuICAvLyAgIGhvbWVUZWFtLnBsYXllcnMuc29ydChmdW5jdGlvbihhLGIpe1xuICAvLyAgICAgcmV0dXJuIHBvc2l0aW9ucy5pbmRleE9mKGEucG9zaXRpb24pIDwgcG9zaXRpb25zLmluZGV4T2YoYi5wb3NpdGlvbikgPyAtMSA6IDE7XG4gIC8vICAgfSk7XG4gIC8vXG4gIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBob21lVGVhbS5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gIC8vICAgICBjb25zdCBwbGF5ZXIgPSBob21lVGVhbS5wbGF5ZXJzW2ldO1xuICAvLyAgICAgY29uc3Qgc3RhcnRpbmdFbGV2ZW4gPSBwbGF5ZXIucGxheWluZyA/ICcmIzEwMDA0OycgOiAnJiMxMDAwNzsnO1xuICAvL1xuICAvLyAgICAgJCgnLnRlYW0tcGFuZWwnKS5hcHBlbmQoXG4gIC8vICAgICAgIGA8cCBjbGFzcz1cInBsYXllci1saW5lICR7cGxheWVyLnBvc2l0aW9ufVwiIGlkPScke3BsYXllci5uYW1lfSc+XG4gIC8vICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGFydGluZ1wiIGlkPVwiJHtpfVwiPiR7c3RhcnRpbmdFbGV2ZW59PC9zcGFuPlxuICAvLyAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXBvc2l0aW9uIFwiPiR7cGxheWVyLnBvc2l0aW9ufTwvc3Bhbj5cbiAgLy8gICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1uYW1lXCI+JHtwbGF5ZXIubmFtZX08L3NwYW4+XG4gIC8vICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmF0dGFja308L3NwYW4+XG4gIC8vICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmRlZmVuY2V9PC9zcGFuPlxuICAvLyAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIj4ke3BsYXllci5jcmVhdGl2aXR5fTwvc3Bhbj5cbiAgLy8gICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCI+JHtwbGF5ZXIuZGVmZW5jZX08L3NwYW4+XG4gIC8vICAgICAgIDwvcD5gXG4gIC8vICAgICApO1xuICAvLyAgIH1cbiAgLy8gfSk7XG5cbiAgLy8gVG9nZ2xlIHllcy9ubyBwbGF5aW5nXG4gICQoJy50ZWFtLXBhbmVsJykub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllciA9IGUudGFyZ2V0LmlkO1xuICAgIGNob29zZVBsYXllcnModGVhbVRhY3RpY3MsIHNlbGVjdGVkUGxheWVyKTtcbiAgfSk7XG5cbiAgJHByaW1hcnlCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJ1biA9ICFydW47XG4gICAgJCgnI21hdGNoLXNldHVwLCAuaW5mby1tZXNzYWdlLCAudGVhbS1zZXR1cCcpLmhpZGUoKTtcbiAgICAkKCcjbWF0Y2gtZW5naW5lLCAuYXdheS10ZWFtLCAuaG9tZS10ZWFtLCAudGltZXInKS5zaG93KCk7XG4gICAgcnVuID8gJHByaW1hcnlCdXR0b24udGV4dCgnUGF1c2UnKSA6ICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BsYXknKTtcbiAgfSk7XG5cbiAgJCgnI2hvbWVUZWFtJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGlmIChydW4pIHtcbiAgICAgIHJ1biA9ICFydW47XG4gICAgfVxuICAgICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BsYXknKTtcbiAgICAkKCcubWF0Y2gtc2V0dXAsIC5tYXRjaC1lbmdpbmUnKS5oaWRlKCk7XG4gICAgJCgnLnRlYW0tc2V0dXAnKS5zaG93KCk7XG4gICAgc2V0dXBUYWN0aWNzKGhvbWVUZWFtKTtcbiAgICB0ZWFtVGFjdGljcyA9IGhvbWVUZWFtO1xuICAgIHJldmVhbFRlYW0odGVhbVRhY3RpY3MpO1xuXG4gIH0pO1xuXG4gICQoJyNhd2F5VGVhbScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBpZiAocnVuKSB7XG4gICAgICBydW4gPSAhcnVuO1xuICAgIH1cbiAgICAkcHJpbWFyeUJ1dHRvbi50ZXh0KCdQbGF5Jyk7XG4gICAgJCgnLm1hdGNoLXNldHVwLCAubWF0Y2gtZW5naW5lJykuaGlkZSgpO1xuICAgICQoJy50ZWFtLXNldHVwJykuc2hvdygpO1xuICAgIHNldHVwVGFjdGljcyhhd2F5VGVhbSk7XG4gICAgdGVhbVRhY3RpY3MgPSBhd2F5VGVhbTtcbiAgICByZXZlYWxUZWFtKHRlYW1UYWN0aWNzKTtcbiAgfSk7XG5cbiAgJCgnLmdvLWJhY2snKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgJCgnLnRlYW0tc2V0dXAnKS5oaWRlKCk7XG4gICAgJCgnLm1hdGNoLXNldHVwJykuc2hvdygpO1xuICB9KTtcblxuICAkKCcuZm9ybWF0aW9uJykub24oJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgY29uc3QgbmV3Rm9ybWF0aW9uID0gZS50YXJnZXQudmFsdWU7XG4gICAgdGVhbVRhY3RpY3MuZm9ybWF0aW9uID0gbmV3Rm9ybWF0aW9uO1xuICAgIHJldmVhbFRlYW0odGVhbVRhY3RpY3MpO1xuICB9KTtcblxuICBmdW5jdGlvbiBzZXR1cFRhY3RpY3ModGVhbU9iamVjdCkge1xuICAgICQoJy50ZWFtLXBhbmVsJykuaHRtbCgnJyk7XG4gICAgJCgnLmZvcm1hdGlvbicpLnZhbCh0ZWFtT2JqZWN0LmZvcm1hdGlvbik7XG5cblxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IFsnZ29hbGtlZXBlcicsICdkZWZlbmRlcicsICdtaWRmaWVsZGVyJywgJ3N0cmlrZXInXTtcbiAgICB0ZWFtT2JqZWN0LnBsYXllcnMuc29ydChmdW5jdGlvbihhLGIpe1xuICAgICAgcmV0dXJuIHBvc2l0aW9ucy5pbmRleE9mKGEucG9zaXRpb24pIDwgcG9zaXRpb25zLmluZGV4T2YoYi5wb3NpdGlvbikgPyAtMSA6IDE7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlYW1PYmplY3QucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGxheWVyID0gdGVhbU9iamVjdC5wbGF5ZXJzW2ldO1xuICAgICAgY29uc3Qgc3RhcnRpbmdFbGV2ZW4gPSBwbGF5ZXIucGxheWluZyA/ICcmIzEwMDA0OycgOiAnJiMxMDAwNzsnO1xuXG4gICAgICAkKCcudGVhbS1wYW5lbCcpLmFwcGVuZChcbiAgICAgICAgYDxwIGNsYXNzPVwicGxheWVyLWxpbmUgJHtwbGF5ZXIucG9zaXRpb259XCIgaWQ9JyR7cGxheWVyLm5hbWV9Jz5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGFydGluZ1wiIGlkPVwiJHtpfVwiPiR7c3RhcnRpbmdFbGV2ZW59PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1wb3NpdGlvbiBcIj4ke3BsYXllci5wb3NpdGlvbn08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLW5hbWVcIj4ke3BsYXllci5uYW1lfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmF0dGFja308L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIj4ke3BsYXllci5kZWZlbmNlfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiPiR7cGxheWVyLmNyZWF0aXZpdHl9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCI+JHtwbGF5ZXIuZGVmZW5jZX08L3NwYW4+XG4gICAgICAgIDwvcD5gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJldmVhbFRlYW0odGVhbU9iamVjdCkge1xuICAgICQoJy50ZWFtLWRpc3BsYXknKS5odG1sKCcnKTtcbiAgICBjb25zdCBmb3JtYXRpb24gPSBbJzEnXS5jb25jYXQodGVhbU9iamVjdC5mb3JtYXRpb24uc3BsaXQoJy0nKSk7XG4gICAgY29uc3QgcG9zaXRpb25zID0gWydnb2Fsa2VlcGVyJywgJ2RlZmVuZGVyJywgJ21pZGZpZWxkZXInLCAnc3RyaWtlciddO1xuICAgIGxldCBwbGF5ZXJOdW1iZXIgPSAwO1xuICAgIGxldCBwb3NpdGlvbk51bWJlciA9IDA7XG5cbiAgICB0cnkge1xuICAgICAgZm9ybWF0aW9uLm1hcCgoYXJyYXlJdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSBwYXJzZUZsb2F0KGFycmF5SXRlbSk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBpdGVyYXRpb25zKSB7XG4gICAgICAgICAgaWYgKHRlYW1PYmplY3QucGxheWVyc1twbGF5ZXJOdW1iZXJdLnBsYXlpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhcm5pbmdNZXNzYWdlID0gcG9zaXRpb25zW3Bvc2l0aW9uTnVtYmVyXSAhPT0gdGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0ucG9zaXRpb24gPyAnb3JhbmdlJyA6ICcnO1xuICAgICAgICAgICAgJCgnLnRlYW0tZGlzcGxheScpLmFwcGVuZChcbiAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPSdwbGF5ZXItYmxvY2sgJHt3YXJuaW5nTWVzc2FnZX0gJHsodGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0uc3RhdHVzKX0nPiR7dGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0ubmFtZX08L3NwYW4+YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRlYW1PYmplY3QucGxheWVyc1twbGF5ZXJOdW1iZXJdLmNob3NlblBvc2l0aW9uID0gcG9zaXRpb25zW3Bvc2l0aW9uTnVtYmVyXTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2cocGxheWVyTnVtYmVyKTtcbiAgICAgICAgICBwbGF5ZXJOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICAkKCcudGVhbS1kaXNwbGF5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2VwZXJhdGUtcGxheWVyc1wiPicpO1xuICAgICAgICBwb3NpdGlvbk51bWJlcisrO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICQoJy50ZWFtLWRpc3BsYXknKS5hcHBlbmQoYDxwIGNsYXNzPSd0ZWFtLXNlbGVjdGlvbi13YXJuaW5nIHNlcGVyYXRlLXBsYXllcnMnPkxlc3MgdGhhbiAxMSBwbGF5ZXJzIHNlbGVjdGVkITwvcD5gKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaG9vc2VQbGF5ZXJzKHRlYW1PYmplY3QsIHNlbGVjdGVkUGxheWVyKSB7XG4gICAgdGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXS5wbGF5aW5nID0gIXRlYW1PYmplY3QucGxheWVyc1tzZWxlY3RlZFBsYXllcl0ucGxheWluZztcbiAgICBjb25zb2xlLmxvZyh0ZWFtT2JqZWN0LnBsYXllcnNbc2VsZWN0ZWRQbGF5ZXJdLnBsYXlpbmcpO1xuICAgIHRlYW1PYmplY3QucGxheWVyc1tzZWxlY3RlZFBsYXllcl0ucGxheWluZyA/ICQoYCMke3NlbGVjdGVkUGxheWVyfWApLmh0bWwoJyYjMTAwMDQ7JykgOiAkKGAjJHtzZWxlY3RlZFBsYXllcn1gKS5odG1sKCcmIzEwMDA3OycpO1xuICAgIHJldmVhbFRlYW0odGVhbVRhY3RpY3MpO1xuICB9XG5cbiAgLy8gRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBmdW5jdGlvbiB0aW1lQ29udHJvbCgpIHtcblxuICAgIGlmKG1hdGNoVGltZSA9PT0gNDQpIHtcbiAgICAgICRjb21tZW50YXJ5Qm94LnRleHQoYFRoYXQncyBoYWxmLXRpbWUhYCk7XG4gICAgICBydW4gPSAhcnVuO1xuICAgICAgJHByaW1hcnlCdXR0b24udGV4dCgnUGxheScpO1xuICAgIH1cblxuICAgIGlmKG1hdGNoVGltZSA9PT0gOTApIHtcbiAgICAgICRjb21tZW50YXJ5Qm94LnRleHQoYFRoYXQncyBmdWxsLXRpbWUhYCk7XG4gICAgICBjbGVhckludGVydmFsKHRpbWVySUQpO1xuICAgICAgJHByaW1hcnlCdXR0b24udGV4dCgnRmluaXNoJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdGNoVGltZSsrO1xuICAgICAgJG1hdGNoVGltZS50ZXh0KG1hdGNoVGltZSk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBnZW5SYW5kb21WYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsdWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmUoKSB7XG5cbiAgICAvLyBOZWVkIHRvIHNvcnQgdGhpc1xuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZUJhcicpO1xuICAgIHdpZHRoID0gKChob21lVGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykvYXdheVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpKSAqIDEwMCk7XG4gICAgY29uc29sZS5sb2coaG9tZVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpKTtcbiAgICBjb25zb2xlLmxvZyhhd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykpO1xuICAgIGNvbnNvbGUubG9nKHdpZHRoKTtcbiAgICBlbGVtLnN0eWxlLndpZHRoID0gd2lkdGggKyAnJSc7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3RUZWFtKCkge1xuICAgIGNvbnN0IGhvbWVSYW5kb20gPSAgZ2VuUmFuZG9tVmFsdWUoaG9tZVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpKTtcbiAgICBjb25zdCBhd2F5UmFuZG9tID0gIGdlblJhbmRvbVZhbHVlKGF3YXlUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSk7XG5cbiAgICBpZiAoaG9tZVJhbmRvbSA+PSBhd2F5UmFuZG9tKSB7XG4gICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBob21lVGVhbS5jb2xvcnNbMF0pO1xuICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMjApICUgNCA9PT0gMCkgJGNvbW1lbnRhcnlCb3gudGV4dChnZW5lcmF0ZUNvbW1lbnRhcnkoJ2NoYW5jZScsJycpKTtcbiAgICAgIHJldHVybiBbaG9tZVRlYW0sICdob21lJywgYXdheVRlYW1dO1xuICAgIH0gZWxzZSB7XG4gICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMjApICUgNCA9PT0gMCkgJGNvbW1lbnRhcnlCb3gudGV4dChnZW5lcmF0ZUNvbW1lbnRhcnkoJ2NoYW5jZScsJycpKTtcbiAgICAgIHJldHVybiBbYXdheVRlYW0sICdhd2F5JywgaG9tZVRlYW1dO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdFBsYXllcih0ZWFtKSB7XG4gICAgY29uc3QgZ2VuUmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZWFtLnBsYXllcnMubGVuZ3RoKTtcbiAgICByZXR1cm4gdGVhbS5wbGF5ZXJzW2dlblJhbmRvbUluZGV4XTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvYWxDaGFuY2UoYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSkge1xuICAgIC8vIFJlZmFjdG9yIHRoaXNcbiAgICBsZXQgc2NvcmUgPSBudWxsO1xuICAgIGxldCBnZXRTY29yZSA9IG51bGw7XG4gICAgY29uc3QgYXR0YWNraW5nUGxheWVyID0gYXR0YWNraW5nVGVhbS5yYW5kb21QbGF5ZXIoKTtcbiAgICBjb25zdCBkZWZlbmRpbmdQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2RlZmVuZGVyJyk7XG5cbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoYXR0YWNraW5nUGxheWVyLmF0dGFjaykgPiBnZW5SYW5kb21WYWx1ZShkZWZlbmRpbmdQbGF5ZXIuZGVmZW5jZSkpIHtcbiAgICAgIGlmICh0ZWFtU3RyaW5nID09PSAnaG9tZScpIHtcbiAgICAgICAgZ2V0U2NvcmUgPSAkaG9tZVNjb3JlLnRleHQoKTtcbiAgICAgICAgc2NvcmUgPSBwYXJzZUZsb2F0KGdldFNjb3JlKSArIDE7XG4gICAgICAgICRob21lU2NvcmUudGV4dChzY29yZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRTY29yZSA9ICRhd2F5U2NvcmUudGV4dCgpO1xuICAgICAgICBzY29yZSA9IHBhcnNlRmxvYXQoZ2V0U2NvcmUpICsgMTtcbiAgICAgICAgJGF3YXlTY29yZS50ZXh0KHNjb3JlKTtcbiAgICAgIH1cbiAgICAgIC8vJGNvbW1lbnRhcnlCb3gudGV4dChgR29hbCFgKTtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnZ29hbCcsIGF0dGFja2luZ1BsYXllcik7XG5cbiAgICAgICQoYCMke3RlYW1TdHJpbmd9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdmb250LXNpemU6IDIycHg7IGNvbG9yOndoaXRlOyBwYWRkaW5nLXRvcDo1cHgnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBzY29yZWQ8YnIvPmApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZURpc2NpcGxpbmUoYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSkge1xuICAgIGNvbnNvbGUubG9nKCdZRUxMT1cnKTtcbiAgICBjb25zdCBkZWZlbmRpbmdQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllcigpO1xuICAgIGNvbnN0IHRlYW0gPSB0ZWFtU3RyaW5nID09PSAnaG9tZScgPyAnYXdheScgOiAnaG9tZSc7XG4gICAgaWYgKChnZW5SYW5kb21WYWx1ZShkZWZlbmRpbmdQbGF5ZXIuZGlzY2lwbGluZSkgKyAoMTAwLW1hdGNoVGltZSkpIDwgOTApIHtcbiAgICAgIC8vIEFscmVhZHkgYm9va2VkPyBTZW5kIGhpbSBvZmYhXG4gICAgICBpZiAoZGVmZW5kaW5nUGxheWVyLnN0YXR1cyA9PT0gJ1llbGxvdycpIHtcbiAgICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNGRjAwMDAnKTtcbiAgICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsICcjRkZGRkZGJyk7XG5cbiAgICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdzZWNvbmRZZWxsb3cnLCBkZWZlbmRpbmdQbGF5ZXIpXG4gICAgICAgICQoYCMke3RlYW19RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtc3F1YXJlIGV2ZW50LWl0ZW0nIHN0eWxlPSdmb250LXNpemU6IDI0cHg7IGNvbG9yOiByZWQ7IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7ZGVmZW5kaW5nUGxheWVyLm5hbWV9IHNlbnQgb2ZmPGJyLz5gKTtcblxuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIuc3RhdHVzID0gJ2VqZWN0ZWQnO1xuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIucGxheWluZyA9IGZhbHNlO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAneWVsbG93Jyk7XG4gICAgICAgICRjb21tZW50YXJ5Qm94LmNzcygnY29sb3InLCAnIzAwMDAwMCcpO1xuICAgICAgICAvLyAkY29tbWVudGFyeUJveC50ZXh0KGAke2RlZmVuZGluZ1BsYXllci5uYW1lfSBnZXRzIGEgeWVsbG93IWApO1xuICAgICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3llbGxvdycsIGRlZmVuZGluZ1BsYXllcilcblxuICAgICAgICAvLyBTdG9yZSBtZXNhZ2VzIGFuZCBkZXRhaWxzIGluIGFuIGdhbWUgT2JqZWN0XG4gICAgICAgICQoYCMke3RlYW19RXZlbnRzYCkuYXBwZW5kKGBcbiAgICAgICAgICA8aSBjbGFzcz0nZmEgZmEtc3F1YXJlIGV2ZW50LWl0ZW0nIHN0eWxlPSdmb250LXNpemU6IDI0cHg7IGNvbG9yOiB5ZWxsb3c7IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7ZGVmZW5kaW5nUGxheWVyLm5hbWV9IGJvb2tlZDxici8+YCk7XG5cbiAgICAgICAgZGVmZW5kaW5nUGxheWVyLnN0YXR1cyA9ICd5ZWxsb3cnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUluanVyeShhdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nKSB7XG4gICAgY29uc3QgYXR0YWNraW5nUGxheWVyID0gYXR0YWNraW5nVGVhbS5yYW5kb21QbGF5ZXIoKTtcbiAgICAvLyBUSEVSRSBDT1VMRCBCRSBBTiBJTkpVUllcbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMTAxKSAlIDggPT09IDApIHtcbiAgICAgIC8vICRjb21tZW50YXJ5Qm94LnRleHQoYCR7YXR0YWNraW5nUGxheWVyLm5hbWV9IGdldHMgdGFrZW4gb2ZmIG9uIGEgc3RyZXRjaGVyIWApO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdpbmp1cnknLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgICAgJChgIyR7dGVhbVN0cmluZ31FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1wbHVzJyBzdHlsZT0nZm9udC1zaXplOiAyNnB4OyBjb2xvcjogZ3JlZW47IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7YXR0YWNraW5nUGxheWVyLm5hbWV9IGluanVyZWQ8YnIvPmApO1xuICAgICAgYXR0YWNraW5nUGxheWVyLnBsYXlpbmcgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNvbW1lbnRhcnlCb3gudGV4dChgJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0ncyBsaW1waW5nLCBidXQgaGUnbGwgYmUgb2theWApO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRnJlZWtpY2soYXR0YWNraW5nVGVhbSwgdGVhbVN0cmluZywgZGVmZW5kaW5nVGVhbSkge1xuICAgIGNvbnN0IGF0dGFja2luZ1BsYXllciA9IGF0dGFja2luZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignbWlkZmllbGRlcicpO1xuICAgIGNvbnN0IGRlZmVuZGluZ1ZhbHVlID0gKGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignZ29hbGtlZXBlcicpLmRlZmVuY2UgKyBkZWZlbmRpbmdUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2RlZmVuZGVyJykpO1xuXG4gICAgaWYgKGF0dGFja2luZ1BsYXllci5hdHRhY2sgPiBkZWZlbmRpbmdWYWx1ZSkge1xuICAgICAgLy8gUmVmYWN0b3IgdGhpc1xuICAgICAgbGV0IHNjb3JlID0gbnVsbDtcbiAgICAgIGxldCBnZXRTY29yZSA9IG51bGw7XG4gICAgICBpZiAodGVhbVN0cmluZyA9PT0gJ2hvbWUnKSB7XG4gICAgICAgIGdldFNjb3JlID0gJGhvbWVTY29yZS50ZXh0KCk7XG4gICAgICAgIHNjb3JlID0gcGFyc2VGbG9hdChnZXRTY29yZSkgKyAxO1xuICAgICAgICAkaG9tZVNjb3JlLnRleHQoc2NvcmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0U2NvcmUgPSAkYXdheVNjb3JlLnRleHQoKTtcbiAgICAgICAgc2NvcmUgPSBwYXJzZUZsb2F0KGdldFNjb3JlKSArIDE7XG4gICAgICAgICRhd2F5U2NvcmUudGV4dChzY29yZSk7XG4gICAgICB9XG5cbiAgICAgIC8vJGNvbW1lbnRhcnlCb3gudGV4dChgSXQncyBhIHdvbmRlciBnb2FsISBHb2FsIWApO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdmcmVla2ljaycsIGF0dGFja2luZ1BsYXllcik7XG4gICAgICAkKGAjJHt0ZWFtU3RyaW5nfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLWZ1dGJvbC1vJyBzdHlsZT0nZm9udC1zaXplOiAyMnB4OyBjb2xvcjp3aGl0ZTsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0gc2NvcmVkPGJyLz5gKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3dhc3RlZEZyZWVraWNrJywgYXR0YWNraW5nUGxheWVyKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlUGVuYWx0eShhdHRhY2tpbmdUZWFtLCB0ZWFtU3RyaW5nLCBkZWZlbmRpbmdUZWFtKSB7XG5cbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ3N0cmlrZXInKTtcbiAgICBjb25zdCBkZWZlbmRpbmdQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2dvYWxrZWVwZXInKTtcbiAgICBjb25zdCBib29rZWRQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2RlZmVuZGVyJyk7XG4gICAgY29uc3QgdGVhbSA9IHRlYW1TdHJpbmcgPT09ICdob21lJyA/ICdhd2F5JyA6ICdob21lJztcbiAgICAvLyBCb29rIHRoZSBwbGF5ZXI/XG4gICAgaWYgKGdlblJhbmRvbVZhbHVlKDEwMCkgPiAyNSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2hlcmUnKTtcbiAgICAgIGJvb2tlZFBsYXllci5zdGF0dXMgPSAneWVsbG93JztcbiAgICAgICQoYCMke3RlYW19RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtc3F1YXJlIGV2ZW50LWl0ZW0nIHN0eWxlPSdmb250LXNpemU6IDI0cHg7IGNvbG9yOiB5ZWxsb3c7IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7Ym9va2VkUGxheWVyLm5hbWV9IGJvb2tlZDxici8+YCk7XG4gICAgfVxuXG4gICAgaWYgKChnZW5SYW5kb21WYWx1ZShhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrKSoyKSA+IGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kZWZlbmNlKSkge1xuXG4gICAgICBsZXQgc2NvcmUgPSBudWxsO1xuICAgICAgbGV0IGdldFNjb3JlID0gbnVsbDtcbiAgICAgIGlmICh0ZWFtU3RyaW5nID09PSAnaG9tZScpIHtcbiAgICAgICAgZ2V0U2NvcmUgPSAkaG9tZVNjb3JlLnRleHQoKTtcbiAgICAgICAgc2NvcmUgPSBwYXJzZUZsb2F0KGdldFNjb3JlKSArIDE7XG4gICAgICAgICRob21lU2NvcmUudGV4dChzY29yZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRTY29yZSA9ICRhd2F5U2NvcmUudGV4dCgpO1xuICAgICAgICBzY29yZSA9IHBhcnNlRmxvYXQoZ2V0U2NvcmUpICsgMTtcbiAgICAgICAgJGF3YXlTY29yZS50ZXh0KHNjb3JlKTtcbiAgICAgIH1cblxuICAgICAgLy8gJGNvbW1lbnRhcnlCb3gudGV4dChgJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0ncyBjbGluaWNhbCBmcm9tIHRoZSBzcG90ISBHb2FsIWApO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdwZW5hbHR5JywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke3RlYW1TdHJpbmd9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdmb250LXNpemU6IDIycHg7IGNvbG9yOndoaXRlOyBwYWRkaW5nLXRvcDo1cHgnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBzY29yZXMgcGVuYWx0eTxici8+YCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdtaXNzZWRQZW5hbHR5JywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke3RlYW1TdHJpbmd9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdmb250LXNpemU6IDIycHg7IGNvbG9yOnJlZDsgcGFkZGluZy10b3A6NXB4JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0gbWlzc2VkIHBlbmFsdHk8YnIvPmApO1xuXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RyYWlnaHRSZWQoZGVmZW5kaW5nVGVhbSwgdGVhbVN0cmluZykge1xuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyKCk7XG4gICAgaWYgKGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kaXNjaXBsaW5lKSA8IDI1KSB7XG4gICAgICBkZWZlbmRpbmdQbGF5ZXIucGxheWluZyA9IGZhbHNlO1xuICAgICAgY29uc3QgdGVhbSA9IHRlYW1TdHJpbmcgPT09ICdob21lJyA/ICdhd2F5JyA6ICdob21lJztcbiAgICAgIC8vICRjb21tZW50YXJ5Qm94LnRleHQoJ1RoZSByZWZlcmVlIGdpdmVzIGhpbSBhIHN0cmFpZ2h0IHJlZCEnKTtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnc3RyYWlnaHRSZWQnLCBkZWZlbmRpbmdQbGF5ZXIpO1xuICAgICAgJChgIyR7dGVhbX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUnIHN0eWxlPSdmb250LXNpemU6IDI0cHg7IGNvbG9yOiByZWQ7IHBhZGRpbmctdG9wOjVweCcgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7ZGVmZW5kaW5nUGxheWVyLm5hbWV9IHNlbnQgb2ZmPGJyLz5gKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb25maWdUZWFtKHRlYW0sIHNlbGVjdG9yKSB7XG4gICAgaWYgKGhvbWVUZWFtID09PSBudWxsKSB7XG4gICAgICAkKCcuaG9tZS10ZWFtICAudGVhbS1uYW1lJykudGV4dChzZWxlY3Rvcik7XG4gICAgICBzd2l0Y2ggKHNlbGVjdG9yKSB7XG4gICAgICAgIGNhc2UgJ1RvdHRlbmhhbSc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBzcHVycztcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtLCAjaG9tZUJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGhvbWVUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbScpLmNzcygnY29sb3InLCBob21lVGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNYW4gVW5pdGVkJzpcbiAgICAgICAgICBob21lVGVhbSA9IG1hblVuaXRlZDtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtLCAjaG9tZUJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGhvbWVUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbScpLmNzcygnY29sb3InLCBob21lVGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdMaXZlcnBvb2wnOlxuICAgICAgICAgIGhvbWVUZWFtID0gbGl2ZXJwb29sO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01hbiBDaXR5JzpcbiAgICAgICAgICBob21lVGVhbSA9IG1hbkNpdHk7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbSwgI2hvbWVCYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBob21lVGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0nKS5jc3MoJ2NvbG9yJywgaG9tZVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRXZlcnRvbic6XG4gICAgICAgICAgaG9tZVRlYW0gPSBldmVydG9uO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0NoZWxzZWEnOlxuICAgICAgICAgIGhvbWVUZWFtID0gY2hlbHNlYTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtLCAjaG9tZUJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGhvbWVUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbScpLmNzcygnY29sb3InLCBob21lVGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdMZWljZXN0ZXInOlxuICAgICAgICAgIGhvbWVUZWFtID0gbGVpY2VzdGVyO1xuICAgICAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtJykuY3NzKCdjb2xvcicsIGhvbWVUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fyc2VuYWwnOlxuICAgICAgICAgIGhvbWVUZWFtID0gYXJzZW5hbDtcbiAgICAgICAgICAkKCcuaG9tZS10ZWFtLCAjaG9tZUJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGhvbWVUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmhvbWUtdGVhbScpLmNzcygnY29sb3InLCBob21lVGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coaG9tZVRlYW0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgICQoJy5hd2F5LXRlYW0gLnRlYW0tbmFtZScpLnRleHQoc2VsZWN0b3IpO1xuXG4gICAgICBzd2l0Y2ggKHNlbGVjdG9yKSB7XG4gICAgICAgIGNhc2UgJ1RvdHRlbmhhbSc6XG4gICAgICAgICAgYXdheVRlYW0gPSBzcHVycztcbiAgICAgICAgICAkKCcuYXdheS10ZWFtLCAucG9zc2Vzc2lvbi1iYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIFVuaXRlZCc6XG4gICAgICAgICAgYXdheVRlYW0gPSBtYW5Vbml0ZWQ7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xpdmVycG9vbCc6XG4gICAgICAgICAgYXdheVRlYW0gPSBsaXZlcnBvb2w7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01hbiBDaXR5JzpcbiAgICAgICAgICBhd2F5VGVhbSA9IG1hbkNpdHk7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0V2ZXJ0b24nOlxuICAgICAgICAgIGF3YXlUZWFtID0gZXZlcnRvbjtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtLCAucG9zc2Vzc2lvbi1iYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMF0pO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQ2hlbHNlYSc6XG4gICAgICAgICAgYXdheVRlYW0gPSBjaGVsc2VhO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0sIC5wb3NzZXNzaW9uLWJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGF3YXlUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbScpLmNzcygnY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdMZWljZXN0ZXInOlxuICAgICAgICAgIGF3YXlUZWFtID0gbGVpY2VzdGVyO1xuICAgICAgICAgICQoJy5hd2F5LXRlYW0sIC5wb3NzZXNzaW9uLWJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGF3YXlUZWFtLmNvbG9yc1swXSk7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbScpLmNzcygnY29sb3InLCBhd2F5VGVhbS5jb2xvcnNbMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnNlbmFsJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IGFyc2VuYWw7XG4gICAgICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhhd2F5VGVhbSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coc2VsZWN0b3IpO1xuICAgIC8vIFBhc3MgaW4gdGhlIG9iamVjdCB2YWx1ZXMgdG8gaG9tZVRlYW1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlQ29tbWVudGFyeShzY2VuYXJpbywgcGxheWVyKSB7XG4gICAgY29uc3QgY29tbWVudGFyeSA9IHtcbiAgICAgIGdvYWw6IFsnR29hbCEnLCAnSGVcXCdzIHNjb3JlZCEnLCBgVGhhdCdzIGEgZ3JlYXQgZmluaXNoIWAsIGBXaGF0IGEgZ29hbCBieSAke3BsYXllci5uYW1lfWAsIGAke3BsYXllci5uYW1lfSBmaW5pc2hlcyBvZmYgdGhlIG1vdmUhYF0sXG4gICAgICBmcmVla2ljazogW2BJdCdzIGEgZnJlZWtpY2tgLCBgJHtwbGF5ZXIubmFtZX0gdG8gdGFrZSB0aGUgZnJlZWtpY2tgLCBgSGUgbGluZXMgdXAgdGhlIGZyZWVraWNrYCwgYFRoaXMgaXMgYSBjaGFuY2UgdG8gZ2V0IGEgY3Jvc3MgaW5gXSxcbiAgICAgIHdhc3RlZEZyZWVraWNrOiBbYCR7cGxheWVyLm5hbWV9IGxvc2VzIHBvc3Nlc3Npb25gLCBgVGhhdCdzIGVuZGVkIHVwIGluIHJvdyBaYCwgYFRoZSBhdHRhY2sgYW1vdW50cyB0byBub3RoaW5nYCwgYCR7cGxheWVyLm5hbWV9IGhhcyB3YXN0ZWQgdGhhdCBvcHBvcnR1bml0eWAsIGAke3BsYXllci5uYW1lfSdzIGVmZm9ydCBnb2VzIG92ZXIgdGhlIGJhcmAsIGBIZSBoYW5kcyBiYWNrIHBvc3Nlc3Npb24gdG8gdGhlIG90aGVyIHRlYW1gXSxcbiAgICAgIHllbGxvdzogW2BIZSdzIGdvaW5nIGluIHRoZSBib29rYCwgYE91Y2ghICR7cGxheWVyLm5hbWV9J2xsIGEgeWVsbG93IGZvciB0aGF0YCwgYFRoYXQncyBhIGJvb2tpbmdgLCBgSXQncyBhIHllbGxvdyFgLCBgVGhlIHJlZiBpcyB0YWtpbmcgaGlzIG5hbWVgXSxcbiAgICAgIHNlY29uZFllbGxvdzogW2BIZSdzIGFscmVhZHkgYmVlbiBib29rZWQuLi5gLCBgVGhhdCdzIGEgc2Vjb25kIHllbGxvd2AsIGAke3BsYXllci5uYW1lfSBpcyBzaG93biBhIHJlZCFgLCBgJHtwbGF5ZXIubmFtZX0gaXMgb2ZmYF0sXG4gICAgICBzdHJhaWdodFJlZDogW2Ake3BsYXllci5uYW1lfSBpcyBzaG93biBhIHN0cmFpZ2h0IHJlZCFgLCBgJHtwbGF5ZXIubmFtZX0gaXMgb2ZmYCwgYFRoZSByZWYgaGFzIGdpdmVuIGhpbSBzdHJhaWdodCByZWQhYF0sXG4gICAgICBwZW5hbHR5OiBbYFRoZSByZWZlcmVlIHBvaW50cyB0byB0aGUgc3BvdGAsIGBUaGF0J3MgYSBwZW5hbHR5YCwgYCR7cGxheWVyLm5hbWV9IGlzIGZvdWxlZCBpbiB0aGUgYXJlYWAsIGBUaGUgcmVmIGJsb3dzIGhpcyB3aGlzdGxlLiBQZW5hbHR5LmBdLFxuICAgICAgbWlzc2VkUGVuYWx0eTogW2BTYXZlZCFgLCBgSXQncyBvdmVyIHRoZSBiYXJgLCBgJHtwbGF5ZXIubmFtZX0gaGFzIG1pc3NlZCBpdCFgLCBgT2ggZGVhciEgJHtwbGF5ZXIubmFtZX0ncyBwdXQgaXQgd2lkZSdgXSxcbiAgICAgIGluanVyeTogW2Ake3BsYXllci5uYW1lfSdzIGlzIGdvaW5nIG9mZmAsYCR7cGxheWVyLm5hbWV9IGlzIGluanVyZWRgLGAke3BsYXllci5uYW1lfSBjYW4ndCBjb250aW51ZWBdLFxuICAgICAgY2hhbmNlOiBbYFRoZSBiYWxsIGlzIHdhc3RlZGAsIGBQb3NzZXNzaW9uIGlzIHNsb3BwaWx5IGdpdmVuIGF3YXlgLCBgVGhhdCBpcyB3YXN0ZWRgLCBgVGhlIHJlZmVyZWUgcHVsbHMgYmFjayBwbGF5YCwgYFRoZSBiYWxsIGdvZXMgb3V0IGZvciBhIHRocm93YCwgYEdvb2QgaW50ZXJjZXB0aW9uIWAsIGBIZSdzIHJvYmJlZCBoaW0gb2YgcG9zc2VzaW9uYF1cbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gZ2VuUmFuZG9tVmFsdWUoY29tbWVudGFyeVtzY2VuYXJpb10ubGVuZ3RoKTtcbiAgICBjb25zdCBtZXNzYWdlID0gY29tbWVudGFyeVtzY2VuYXJpb11bcmFuZG9tSW5kZXhdO1xuICAgICRjb21tZW50YXJ5Qm94LnRleHQoYCR7bWVzc2FnZX1gKTtcblxuICB9XG5cbn0pO1xuIl19
