"use strict";var _slicedToArray=function(){function e(e,a){var t=[],s=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(t.push(i.value),!a||t.length!==a);s=!0);}catch(e){r=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(r)throw n}}return t}return function(a,t){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(function(){function e(e){F&&(F=!F),P.text("Play"),$(".match-setup, .match-engine").hide(),$(".team-setup").show(),a(e),x=e,t(x)}function a(e){$(".team-panel").html(""),$(".formation").val(e.formation),e.players.sort(function(e,a){return C.indexOf(e.position)<C.indexOf(a.position)?-1:1});for(var a=0;a<e.players.length;a++){var t=e.players[a],s=t.playing?"&#10004;":"&#10007;";$(".team-panel").append('<p class="player-line '+t.position+" "+t.status+"\" id='"+t.name+"'>\n          <span class=\"starting "+t.status+'" id="'+a+'">'+s+'</span>\n          <span class="player-position ">'+t.position+'</span>\n          <span class="player-name">'+t.name+'</span>\n          <span class="player-stat" data-sort="'+t.attack+'" style="background-color: rgba(0,128,0,'+t.attack/100+')">'+t.attack+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.defence/100+')">'+t.defence+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.creativity/100+'")>'+t.creativity+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.defence/100+')">'+t.defence+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.fitness/100+')">'+t.fitness+"</span>\n        </p>")}}function t(e){$(".team-display").html("");var a=["1"].concat(e.formation.split("-")),t=0,s=0;try{a.map(function(a){for(var r=parseFloat(a),n=0;n<r;){if(e.players[t].playing||"ejected"===e.players[t].status){var i=C[s]!==e.players[t].position?"warning":"";$(".team-display").append("<span class='player-block "+i+" "+e.players[t].status+"'>"+e.players[t].name+"</span>"),e.players[t].chosenPosition=C[s],n++}t++}$(".team-display").append('<div class="seperate-players">'),s++})}catch(e){$(".team-display").append("<p class='team-selection-warning seperate-players'>Less than 11 players selected!</p>")}}function s(e,a){var s=$("#"+a);if(e.players[a].playing=!e.players[a].playing,t(x),e.players[a].playing){if(s.html("&#10004;"),H){s.parent().css({background:"green"});var n=e.players[a];r(e,n)}}else if(s.html("&#10007;"),H){s.parent().css({"pointer-events":"none",background:"red"});var i=e.players[a];r(e,i)}}function r(e,a){e.subs<7?a.playing?($("#"+e.place+"Events").append("<i class='fa fa-arrow-right' style='color:green;' aria-hidden='true'></i> "+E+" mins: "+a.name+" substituted<br/>"),e.subs+=1,a.playing=!0,a.status="subbed-on"):($("#"+e.place+"Events").append("<i class='fa fa-arrow-right' style='color:red;' aria-hidden='true'></i> "+E+" mins: "+a.name+" substituted<br/>"),e.subs+=1,a.playing=!1,a.status="subbed-off"):console.log("You have had 3 subs!")}function n(){44===E&&(w.text("That's half-time!"),F=!F,P.text("Play")),90===E?(w.text("That's full-time!"),clearInterval(I),P.text("Finish")):(E++,v.text(E))}function i(e){return Math.floor(Math.random()*e)}function o(){var e=document.getElementById("homeBar");B=M.averagePlayerValues("creativity")/(M.averagePlayerValues("creativity")+j.averagePlayerValues("creativity"))*100+(Math.random()<.5?-i(6):i(6)),e.style.width=B+"%"}function l(){return i(M.averagePlayerValues("creativity")+M.averagePlayerValues("fitness"))>=i(j.averagePlayerValues("creativity")+j.averagePlayerValues("fitness"))?[M,j]:[j,M]}function c(e){w.css("background-color",e.colors[0]),w.css("color",e.colors[1]),i(20)%4==0&&(e.increaseValues(3,"attack",["midfielder","striker"]),e.increaseValues(3,"creativity",["midfielder","striker"]),w.text(g("chance","")))}function d(e,a){var t=e.randomPlayer(),s=a.randomPlayerByPosition("defender");i(t.attack)>i(s.defence)&&(g("goal",t),k(e),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:white;' aria-hidden='true'></i> "+E+" mins: "+t.name+" scored<br/>"))}function p(e,a){var t=a.randomPlayer();i(t.discipline)+(100-E)<90&&"ejected"!==t.status&&("yellow"===t.status?(w.css("background-color","#FF0000"),w.css("color","#FFFFFF"),a.reduceValues(20,"defence",["striker","midfielder","defender","goalkeeper"]),a.reduceValues(20,"attack",["striker","midfielder","defender","goalkeeper"]),a.reduceValues(20,"creativity",["striker","midfielder","defender","goalkeeper"]),g("secondYellow",t),$("#"+a.place+"Events").append("<i class='fa fa-square event-item' style='color: red;' aria-hidden='true'></i> "+E+" mins: "+t.name+" sent off<br/>"),t.status="ejected",t.playing=!1):(w.css("background-color","yellow"),w.css("color","#000000"),g("yellow",t),t.defence-=8,$("#"+a.place+"Events").append("\n          <i class='fa fa-square event-item' style='color: yellow;' aria-hidden='true'></i> "+E+" mins: "+t.name+" booked<br/>"),t.status="yellow",t.fitness-=i(10)))}function u(e){var a=e.randomPlayer();if(i(101)%40==0)if(g("injury",a),$("#"+e.place+"Events").append("<i class='fa fa-plus' style='color: green;' aria-hidden='true'></i> "+E+" mins: "+a.name+" injured<br/>"),"away"===e.place&&A){a.playing=!a.playing,r(j,a);var t=j.randomSubstitute(a.position);t.playing=!t.playing,r(j,t)}else a.fitness=0+i(30),a.status="injured",a.playing=!1;else a.fitness-=i(15),a.defence-=i(10),a.attack-=i(10),g("nearMiss",a)}function m(e,a){var t=e.randomPlayerByPosition("midfielder"),s=a.randomPlayerByPosition("goalkeeper").defence+a.averagePlayerValues("defender");t.attack>s?(k(e),g("freekick",t),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:white;' aria-hidden='true'></i> "+E+" mins: "+t.name+" scored<br/>"),t.attack+=5):(g("wastedFreekick",t),t.creativity-=5,e.reduceValues(i(10),"attack",["striker","midfielder"]),e.reduceValues(i(10),"creativity",["striker","midfielder"]))}function f(e,a){var t=e.randomPlayerByPosition("striker"),s=a.randomPlayerByPosition("goalkeeper"),r=a.randomPlayerByPosition("defender");i(100)>25&&(r.status="yellow",$("#"+a.place+"Events").append("<i class='fa fa-square event-item' style='color: yellow;' aria-hidden='true'></i> "+E+" mins: "+r.name+" booked<br/>")),2*i(t.attack)>i(s.defence)?(k(e),g("penalty",t),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:white' aria-hidden='true'></i> "+E+" mins: "+t.name+" scores penalty<br/>"),t.attack+=5):(g("missedPenalty",t),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:red' aria-hidden='true'></i> "+E+" mins: "+t.name+" missed penalty<br/>"),s.defence+=10,t.attack-=10)}function y(e){var a=e.randomPlayer();i(a.discipline)+(100-E)<25&&(a.playing=!1,a.status="ejected",g("straightRed",a),$("#"+e.place+"Events").append("<i class='fa fa-square' style=' color: red;' aria-hidden='true'></i> "+E+" mins: "+a.name+" sent off<br/>"))}function h(e,a){if(null===M){switch($(".home-team  .team-name").text(a),a){case"Tottenham":M=spurs;break;case"Man United":M=manUnited;break;case"Liverpool":M=liverpool;break;case"Man City":M=manCity;break;case"Everton":M=everton;break;case"Chelsea":M=chelsea;break;case"Leicester":M=leicester;break;case"Arsenal":M=arsenal}M.place="home",$(".home-team-logo").attr("src","images/"+M.name+".png"),$(".home-team-logo").show(),$(".home-team, #homeBar").css("background-color",M.colors[0]),$(".home-team").css("color",M.colors[1])}else{switch($(".away-team .team-name").text(a),a){case"Tottenham":j=spurs;break;case"Man United":j=manUnited;break;case"Liverpool":j=liverpool;break;case"Man City":j=manCity;break;case"Everton":j=everton;break;case"Chelsea":j=chelsea;break;case"Leicester":j=leicester;break;case"Arsenal":j=arsenal}j.place="away",$(".away-team-logo").attr("src","images/"+j.name+".png"),$(".away-team-logo").show(),$(".logo-display span").show(),$(".away-team, .possession-bar").css("background-color",j.colors[0]),$(".away-team").css("color",j.colors[1])}}function g(e,a){var t={goal:["Goal!","He's scored!","That's a great finish!","What a goal by "+a.name,a.name+" finishes off the move!"],freekick:["It's a freekick",a.name+" to take the freekick","He lines up the freekick","This is a chance to get a cross in"],wastedFreekick:[a.name+" loses possession","That's ended up in row Z","The attack amounts to nothing",a.name+" has wasted that opportunity",a.name+"'s effort goes over the bar","He hands back possession to the other team"],yellow:["He's going in the book","Ouch! "+a.name+" will get a yellow for that","That's a booking","It's a yellow!","The ref is taking his name"],secondYellow:["He's already been booked...","That's a second yellow",a.name+" is shown a red!",a.name+" is off"],straightRed:[a.name+" is shown a straight red!",a.name+" is off","The ref has given him straight red!"],penalty:["The referee points to the spot","That's a penalty",a.name+" is fouled in the area","The ref blows his whistle. Penalty."],missedPenalty:["Saved!","It's over the bar",a.name+" has missed it!","Oh dear! "+a.name+"'s put it wide'"],injury:[a.name+"'s is going off",a.name+" is injured",a.name+" can't continue"],chance:["The ball is wasted","Possession is sloppily given away","That is wasted","The referee pulls back play","The ball goes out for a throw","Good interception!","He's robbed him of possesion","That was a wayward ball","He can't quite get on the end of that one"],nearMiss:[a.name+" is limping, but he'll be okay","That's a sore one.",a.name+" looks to be struggling","There's a nasty coming together","The referee waves play on"]},s=i(t[e].length),r=t[e][s];w.text(""+r)}function k(e){var a=null,t=null;"home"===e.place?(t=T.text(),a=parseFloat(t)+1,T.text(a)):(t=V.text(),a=parseFloat(t)+1,V.text(a))}function b(){var e=i(C.length)+1;return[C[e]]}var v=$(".changing-minutes"),w=$("#commentaryBox"),P=$(".primary-button"),T=$(".home-team .score"),V=$(".away-team .score"),x=null,E=0,F=!1,B=50,M=null,j=null,H=!1,A=!0,C=["goalkeeper","defender","midfielder","striker"],I=setInterval(function(){if(F){var e=i(100)+1;console.log(E+": "+e);var a=l(),t=_slicedToArray(a,2),s=t[0],h=t[1];if(c(s),e%17==0&&(d(s,h),s.increaseValues(i(5),"attack",["midfielder","striker"]),s.increaseValues(i(5),"creativity",["midfielder","striker"]),h.reduceValues(i(5),"defence",["midfielder","defender","goalkeeper"])),e%(i(30)+90)==0&&(f(s,h),h.reduceValues(i(10),"defence",["midfielder","defender","goalkeeper"])),e%90==0&&(y(h),h.reduceValues(25,"defence",["striker","midfielder","defender","goalkeeper"]),h.reduceValues(25,"attack",["striker","midfielder","defender","goalkeeper"]),h.reduceValues(25,"creativity",["striker","midfielder","defender","goalkeeper"])),e%22==0&&(m(s,h),s.increaseValues(5,"attack",["midfielder","striker"]),s.increaseValues(5,"creativity",["midfielder","striker"])),e%18==0&&p(s,h),e%25==0&&(u(s),h.reduceValues(3,"creativity",["striker","midfielder","defender","goalkeeper"])),A&&e%10==0&&j.subs<6&&E>50){var g=b(),k=_slicedToArray(g,1),v=k[0],w=j.randomPlayerByPosition(v,"subbed-on"),$=j.randomSubstitute(v);w&&$&&(w.playing=!w.playing,r(j,w),$.playing=!$.playing,r(j,$))}b(),h.reduceValues(i(10),"fitness",[b]),o(),n()}},50);$(".team-input").on("click",function(e){var a=e.target.innerHTML;null===M?(h(M,a),$(".title-message").text("Home team selected. Chose your opponent."),$(e.target).attr("disabled",!0),$("#homeTeam").attr("disabled",!1)):(h(j,a),$(".title-message").text("Opponent selected. Edit tactics or proceed."),$(".primary-button, #awayTeam").attr("disabled",!1))}),$("#playerMode").on("click",function(){A=!A}),$(".team-panel").on("click",function(e){var a=e.target.id;s(x,a)}),P.on("click",function(){F=!F,$("#match-setup, .info-message, .team-setup, .game-logo").hide(),$("#match-engine, .away-team, .home-team, .timer, .button-bar").show(),F?(P.text("Pause"),H=!0):P.text("Play")}),$("#homeTeam").on("click",function(){e(M)}),$("#awayTeam").on("click",function(){e(j)}),$(".go-back").on("click",function(){$(".team-setup").hide(),$(".match-setup").show()}),$(".formation").on("change",function(e){var a=e.target.value;x.formation=a,t(x)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwic2hvd1RhY3RpY3NQYWdlIiwidGVhbU9iamVjdCIsInJ1biIsIiRwcmltYXJ5QnV0dG9uIiwib24iLCJoaWRlIiwidGVhbVRhY3RpY3MiLCJmb3JtYXRpb24iLCJyZXZlYWxUZWFtIiwiaHRtbCIsInZhbCIsInBsYXllcnMiLCJzaG93IiwiYSIsImIiLCJzZXR1cFRhY3RpY3MiLCJwb3NpdGlvbiIsInBvc2l0aW9ucyIsImluZGV4T2YiLCJpIiwibGVuZ3RoIiwicGxheWVyIiwic3RhcnRpbmdFbGV2ZW4iLCJzb3J0IiwibmFtZSIsInN0YXR1cyIsImF0dGFjayIsImRlZmVuY2UiLCJjcmVhdGl2aXR5IiwiZml0bmVzcyIsImNvbmNhdCIsInNwbGl0IiwicGxheWVyTnVtYmVyIiwicG9zaXRpb25OdW1iZXIiLCJtYXAiLCJhcnJheUl0ZW0iLCJpdGVyYXRpb25zIiwicGFyc2VGbG9hdCIsInBsYXlpbmciLCJ3YXJuaW5nTWVzc2FnZSIsImFwcGVuZCIsImNob3NlblBvc2l0aW9uIiwiZXJyIiwiY2hvb3NlUGxheWVycyIsInNlbGVjdGVkUGxheWVyIiwiJHNlbGVjdGVkUGxheWVyIiwiZ2FtZVN0YXJ0ZWQiLCJwYXJlbnQiLCJzdWJzdGl0dXRlIiwicGxheWVyT24iLCJwbGF5ZXJPZmYiLCJiYWNrZ3JvdW5kIiwic3VicyIsInBsYWNlIiwibWF0Y2hUaW1lIiwiY29uc29sZSIsImxvZyIsInRpbWVDb250cm9sIiwiJGNvbW1lbnRhcnlCb3giLCJjbGVhckludGVydmFsIiwidGltZXJJRCIsIiRtYXRjaFRpbWUiLCJ0ZXh0IiwiZmxvb3IiLCJNYXRoIiwiaG9tZUJhciIsImRvY3VtZW50IiwicmFuZG9tIiwidmFsdWUiLCJ3aWR0aCIsImhvbWVUZWFtIiwiYXZlcmFnZVBsYXllclZhbHVlcyIsImF3YXlUZWFtIiwiZ2VuUmFuZG9tVmFsdWUiLCJzdHlsZSIsInNlbGVjdFRlYW0iLCJzZXR1cEV2ZW50IiwiYXR0YWNraW5nVGVhbSIsImdlbmVyYXRlQ29tbWVudGFyeSIsImNvbG9ycyIsImNzcyIsImluY3JlYXNlVmFsdWVzIiwiYXR0YWNraW5nUGxheWVyIiwicmFuZG9tUGxheWVyIiwiZGVmZW5kaW5nUGxheWVyIiwiZGVmZW5kaW5nVGVhbSIsInJhbmRvbVBsYXllckJ5UG9zaXRpb24iLCJ1cGRhdGVTY29yZSIsImhhbmRsZURpc2NpcGxpbmUiLCJyZWR1Y2VWYWx1ZXMiLCJkaXNjaXBsaW5lIiwiYWRkUGxheWVyIiwiY3B1TW9kZSIsImhhbmRsZUZyZWVraWNrIiwiZGVmZW5kaW5nVmFsdWUiLCJib29rZWRQbGF5ZXIiLCJoYW5kbGVQZW5hbHR5Iiwic3RyYWlnaHRSZWQiLCJzZWxlY3RvciIsIm1hblVuaXRlZCIsImNvbmZpZ1RlYW0iLCJ0ZWFtIiwic3B1cnMiLCJsaXZlcnBvb2wiLCJtYW5DaXR5IiwiZXZlcnRvbiIsImNoZWxzZWEiLCJsZWljZXN0ZXIiLCJhcnNlbmFsIiwiY29tbWVudGFyeSIsImdvYWwiLCJ5ZWxsb3ciLCJzZWNvbmRZZWxsb3ciLCJhdHRyIiwicGVuYWx0eSIsIm1pc3NlZFBlbmFsdHkiLCJpbmp1cnkiLCJyYW5kb21JbmRleCIsIm1lc3NhZ2UiLCJmcmVla2ljayIsIndhc3RlZEZyZWVraWNrIiwiZ2V0U2NvcmUiLCIkaG9tZVNjb3JlIiwic2NvcmUiLCJuZWFyTWlzcyIsInNjZW5hcmlvIiwiJGF3YXlTY29yZSIsInJhbmRvbVBvc2l0aW9uIiwic2V0SW50ZXJ2YWwiLCJldmVudFZhbHVlIiwiX3NlbGVjdFRlYW0iLCJfc2VsZWN0VGVhbTIiLCJfc2xpY2VkVG9BcnJheSIsImdvYWxDaGFuY2UiLCJfcmFuZG9tUG9zaXRpb24iLCJfcmFuZG9tUG9zaXRpb24yIiwicmVtb3ZlUGxheWVyIiwicmFuZG9tU3Vic3RpdHV0ZSIsImUiLCJ1c2VyVGVhbSIsInRhcmdldCIsImlubmVySFRNTCIsIm1vdmUiLCJpZCIsIm5ld0Zvcm1hdGlvbiJdLCJtYXBwaW5ncyI6Im1jQUFBQSxHQUFFLFdB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QUVILEdBS0hxQyxHQUFBQSxlQUFBQSxHQUFjSSxRQUFBQSxTQUFkaUQsR0FFQSxHQUFBQyxHQUFBRCxFQUFBRSxPQUFBQyxTQUNBQyxRQUFBQSxHQWNBMUMsRUFBVzlCLEVBQVVxRSxHQVpyQjVJLEVBQUEsa0JBQUErRCxLQUFBLDRDQUNBTCxFQUFBQSxFQUFBQSxRQUFBQSxLQUFBQSxZQUFBQSxHQUNEMUQsRUFBQSxhQUFBa0gsS0FBQSxZQUFBLEtBZUNiLEVBQVc1QixFQUFVbUUsR0FaekI1SSxFQUFBLGtCQUFBK0QsS0FBQSwrQ0FjSS9ELEVBQUUsOEJBQThCa0gsS0FBSyxZQUFZLE1BUm5EbEgsRUFBQSxlQUFJdUUsR0FBYSxRQUFNLFdBQ3JCOEIsR0FBQUEsSUFLQUEsRUFBQUEsZUFBVzVCLEdBQUFBLFFBQVVtRSxTQUFBQSxHQUNyQjVJLEdBQUU2QyxHQUFrQmtCLEVBQUFBLE9BQUtpRixFQUN6QmhKLEdBQUVPLEVBQUFzQyxLQWdCTnpDLEVBQWVDLEdBQUcsUUFBUyxXQVozQkYsR0FBQUEsRUFDRUgsRUFBQSx3REFBaUNNLE9BQ2pDdUYsRUFBQUEsOERBQUFoRixPQURGVixHQWdCSUMsRUFBZTJELEtBQUssU0FYeEJoQixHQUFBLEdBRUUzQyxFQUFNeUMsS0FBaUI4RixVQUt2QnhJLEVBQUFBLGFBQUFFLEdBQUEsUUFBQSxXQUNBTCxFQUFFdUUsS0FHQW5FLEVBQUFBLGFBQUFBLEdBQUFBLFFBQW9CLFdBQ3BCMkMsRUFBYzBCLEtBR2Z6RSxFQUFBLFlBQUFLLEdBQUEsUUFBQSxXQVRITCxFQUFBLGVBQUFNLE9BdUJFTixFQUFFLGdCQUFnQmEsU0FSbkJiLEVBRkQsY0FBQUssR0FBQSxTQUFBLFNBQUFzSSxHQWNFLEdBQU1NLEdBQWVOLEVBQUVFLE9BQU94RSxLQVY5QjlELEdBQUZDLFVBQUF5SSxFQUNFaEosRUFBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnN0ICRtYXRjaFRpbWUgPSAkKCcuY2hhbmdpbmctbWludXRlcycpO1xuICBjb25zdCAkY29tbWVudGFyeUJveCA9ICQoJyNjb21tZW50YXJ5Qm94Jyk7XG4gIGNvbnN0ICRwcmltYXJ5QnV0dG9uID0gJCgnLnByaW1hcnktYnV0dG9uJyk7XG4gIGNvbnN0ICRob21lU2NvcmUgPSAkKCcuaG9tZS10ZWFtIC5zY29yZScpO1xuICBjb25zdCAkYXdheVNjb3JlID0gJCgnLmF3YXktdGVhbSAuc2NvcmUnKTtcblxuICBsZXQgdGVhbVRhY3RpY3MgPSBudWxsO1xuICBsZXQgbWF0Y2hUaW1lID0gMDtcbiAgbGV0IHJ1biA9IGZhbHNlO1xuICBsZXQgd2lkdGggPSA1MDtcbiAgbGV0IGhvbWVUZWFtID0gbnVsbDtcbiAgbGV0IGF3YXlUZWFtID0gbnVsbDtcbiAgbGV0IGdhbWVTdGFydGVkID0gZmFsc2U7XG4gIGxldCBjcHVNb2RlID0gdHJ1ZTtcbiAgY29uc3QgcG9zaXRpb25zID0gWydnb2Fsa2VlcGVyJywgJ2RlZmVuZGVyJywgJ21pZGZpZWxkZXInLCAnc3RyaWtlciddO1xuXG4gIC8vIE1BVENIIExPR0lDXG5cbiAgY29uc3QgdGltZXJJRCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgIGlmIChydW4pIHtcbiAgICAgIGNvbnN0IGV2ZW50VmFsdWUgPSBnZW5SYW5kb21WYWx1ZSgxMDApICsgMTtcbiAgICAgIGNvbnNvbGUubG9nKGAke21hdGNoVGltZX06ICR7ZXZlbnRWYWx1ZX1gKTtcblxuICAgICAgLy8gUmFuZG9tKEF2ZXJhZ2UgVGVhbSBDcmVhdGl2aXR5KSArIEZpdG5lc3MgPT4gSGlnaGVyIHNjb3JlIGRldGVybWluZXMgdGhlIGF0dGFja2luZyB0ZWFtXG4gICAgICBjb25zdCBbYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbV0gPSBzZWxlY3RUZWFtKCk7XG5cbiAgICAgIC8vIFN0eWxlIGNvbW1lbnRhcnlCb3ggaW4gYXR0YWNraW5nIHRlYW0gY29sb3JzLCBpbmNyZWFzZSBwbGF5ZXJzIGF0dGFja2luZyBhbmQgY3JlYXRpdml0eSB2YWx1ZXNcbiAgICAgIHNldHVwRXZlbnQoYXR0YWNraW5nVGVhbSk7XG5cbiAgICAgIGlmIChldmVudFZhbHVlICUgMTcgPT09IDApIHtcbiAgICAgICAgLy8gUmFuZG9tIChTdHJpa2VyLCBNaWRmaWVsZGVyKSB2cy4gR29hbGtlZXBlciA+IFJhbmRUaGVpckF0dGFjayB2cy4gUmFuZEdvYWxrZWVwZXJcbiAgICAgICAgZ29hbENoYW5jZShhdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtKTtcbiAgICAgICAgYXR0YWNraW5nVGVhbS5pbmNyZWFzZVZhbHVlcyhnZW5SYW5kb21WYWx1ZSg1KSwnYXR0YWNrJyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgICAgYXR0YWNraW5nVGVhbS5pbmNyZWFzZVZhbHVlcyhnZW5SYW5kb21WYWx1ZSg1KSwnY3JlYXRpdml0eScsWydtaWRmaWVsZGVyJywgJ3N0cmlrZXInXSk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKGdlblJhbmRvbVZhbHVlKDUpLCdkZWZlbmNlJyxbJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAoZ2VuUmFuZG9tVmFsdWUoMzApICsgOTApID09PSAwKSB7XG4gICAgICAgIC8vIFN0cmlrZXIgdnMuIEdvYWxrZWVwZXIgPiBSYW5kVGhlaXJBdHRhY2sgdnMuIFJhbmRHb2Fsa2VlcGVyUGVuYWx0eVxuICAgICAgICBoYW5kbGVQZW5hbHR5KGF0dGFja2luZ1RlYW0sIGRlZmVuZGluZ1RlYW0pO1xuICAgICAgICBkZWZlbmRpbmdUZWFtLnJlZHVjZVZhbHVlcyhnZW5SYW5kb21WYWx1ZSgxMCksJ2RlZmVuY2UnLFsnbWlkZmllbGRlcicsICdkZWZlbmRlcicsICdnb2Fsa2VlcGVyJ10pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnRWYWx1ZSAlIDkwID09PSAwKSB7XG4gICAgICAgIC8vIFJhbmRvbSBQbGF5ZXIgPT4gRGlzY2lwbGluZSA+IHJhbmRvbVxuICAgICAgICBzdHJhaWdodFJlZChkZWZlbmRpbmdUZWFtKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoMjUsJ2RlZmVuY2UnLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoMjUsJ2F0dGFjaycsWydzdHJpa2VyJywnbWlkZmllbGRlcicsICdkZWZlbmRlcicsICdnb2Fsa2VlcGVyJ10pO1xuICAgICAgICBkZWZlbmRpbmdUZWFtLnJlZHVjZVZhbHVlcygyNSwnY3JlYXRpdml0eScsWydzdHJpa2VyJywnbWlkZmllbGRlcicsICdkZWZlbmRlcicsICdnb2Fsa2VlcGVyJ10pO1xuICAgICAgfVxuICAgICAgLy9cbiAgICAgIGlmIChldmVudFZhbHVlICUgMjIgPT09IDApIHtcbiAgICAgICAgLy8gU3RyaWtlciB2cy4gR29hbGtlZXBlciA+IFJhbmRUaGVpckZyZWVraWNrIHZzLiBSYW5kR29hbGtlZXBlclBlbmFsdHlcbiAgICAgICAgaGFuZGxlRnJlZWtpY2soYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbSk7XG4gICAgICAgIGF0dGFja2luZ1RlYW0uaW5jcmVhc2VWYWx1ZXMoNSwnYXR0YWNrJyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgICAgYXR0YWNraW5nVGVhbS5pbmNyZWFzZVZhbHVlcyg1LCdjcmVhdGl2aXR5JyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAxOCA9PT0gMCkge1xuICAgICAgICAvLyBSYW5kb21QbGF5ZXIgPT4gZGlzY2lwbGluZSArIG1hdGNodGltZSByYW5kIHZzLiByYW5kb21cbiAgICAgICAgaGFuZGxlRGlzY2lwbGluZShhdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAyNSA9PT0gMCkge1xuICAgICAgICBoYW5kbGVJbmp1cnkoYXR0YWNraW5nVGVhbSk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKDMsJ2NyZWF0aXZpdHknLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgcGxheWluZyBDUFUgbW9kZSwgYXV0byBnZW5lcmF0ZSBzdWJzdGl0dWl0b25zXG4gICAgICBpZihjcHVNb2RlKSB7XG4gICAgICAgIGlmIChldmVudFZhbHVlICUgMTAgPT09IDAgJiYgYXdheVRlYW0uc3VicyA8IDYgJiYgbWF0Y2hUaW1lID4gNTApIHtcbiAgICAgICAgICBjb25zdCBbY2hvc2VuUG9zaXRpb25dID0gcmFuZG9tUG9zaXRpb24oKTtcbiAgICAgICAgICBjb25zdCByZW1vdmVQbGF5ZXIgPSBhd2F5VGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKGNob3NlblBvc2l0aW9uLCAnc3ViYmVkLW9uJyk7XG4gICAgICAgICAgY29uc3QgYWRkUGxheWVyID0gYXdheVRlYW0ucmFuZG9tU3Vic3RpdHV0ZShjaG9zZW5Qb3NpdGlvbik7XG5cbiAgICAgICAgICAvLyBDaGVja2VkIHRoYXQgdGhlcmUgaXMgYSBwbGF5ZXIgaW4gdGhhdCBwb3NpdGlvbiBhdmFpbGFibGUgdG8gY29tZSBvbi4gSWYgbm90LCBkb24ndCBydW4gdGhlIHN1YnN0aXR1dGlvblxuICAgICAgICAgIGlmIChyZW1vdmVQbGF5ZXIgJiYgYWRkUGxheWVyKSB7XG4gICAgICAgICAgICByZW1vdmVQbGF5ZXIucGxheWluZyA9ICFyZW1vdmVQbGF5ZXIucGxheWluZztcbiAgICAgICAgICAgIHN1YnN0aXR1dGUoYXdheVRlYW0sIHJlbW92ZVBsYXllcik7XG4gICAgICAgICAgICBhZGRQbGF5ZXIucGxheWluZyA9ICFhZGRQbGF5ZXIucGxheWluZztcbiAgICAgICAgICAgIHN1YnN0aXR1dGUoYXdheVRlYW0sIGFkZFBsYXllcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZSBmaXRuZXNzIG9mIHBsYXllcnMgaW4gYSByYW5kb20gcG9zaXRpb25cbiAgICAgIHJhbmRvbVBvc2l0aW9uKCk7XG4gICAgICBkZWZlbmRpbmdUZWFtLnJlZHVjZVZhbHVlcyhnZW5SYW5kb21WYWx1ZSgxMCksJ2ZpdG5lc3MnLFtyYW5kb21Qb3NpdGlvbl0pO1xuXG4gICAgICAvLyBNb3ZlIHRoZSBwb3NzZXNzaW9uIGJhclxuICAgICAgbW92ZSgpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHRpbWVyXG4gICAgICB0aW1lQ29udHJvbCgpO1xuICAgIH1cbiAgfSw1MCk7XG5cbiAgLy8gRXZlbnQgTGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUZWFtIHNlbGVjdGlvblxuICAkKCcudGVhbS1pbnB1dCcpLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgLy8gUkVGQUNUT1I6IG1ha2Ugc2VsZWN0b3JzIGluICR2YXJpYWJsZXMsIHR1cm4gY2xpY2sgaW50byBuYW1lZCBmdW5jdGlvblxuICAgIGNvbnN0IHVzZXJUZWFtID0gZS50YXJnZXQuaW5uZXJIVE1MO1xuICAgIGlmIChob21lVGVhbSA9PT0gbnVsbCkge1xuICAgICAgY29uZmlnVGVhbShob21lVGVhbSwgdXNlclRlYW0pO1xuICAgICAgJCgnLnRpdGxlLW1lc3NhZ2UnKS50ZXh0KCdIb21lIHRlYW0gc2VsZWN0ZWQuIENob3NlIHlvdXIgb3Bwb25lbnQuJyk7XG4gICAgICAkKGUudGFyZ2V0KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgJCgnI2hvbWVUZWFtJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZ1RlYW0oYXdheVRlYW0sIHVzZXJUZWFtKTtcbiAgICAgICQoJy50aXRsZS1tZXNzYWdlJykudGV4dCgnT3Bwb25lbnQgc2VsZWN0ZWQuIEVkaXQgdGFjdGljcyBvciBwcm9jZWVkLicpO1xuICAgICAgJCgnLnByaW1hcnktYnV0dG9uLCAjYXdheVRlYW0nKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFRvZ2dsZSBjb21wdXRlciBtb2RlIChwbGF5aW5nIGFnYWluc3QgdGhlIGNvbXB1dGVyKVxuICAkKCcjcGxheWVyTW9kZScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjcHVNb2RlID0gIWNwdU1vZGU7XG4gIH0pO1xuXG5cbiAgLy8gVG9nZ2xlIHllcy9ubyBwbGF5aW5nXG4gICQoJy50ZWFtLXBhbmVsJykub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllciA9IGUudGFyZ2V0LmlkO1xuICAgIGNob29zZVBsYXllcnModGVhbVRhY3RpY3MsIHNlbGVjdGVkUGxheWVyKTtcbiAgfSk7XG5cbiAgJHByaW1hcnlCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJ1biA9ICFydW47XG4gICAgJCgnI21hdGNoLXNldHVwLCAuaW5mby1tZXNzYWdlLCAudGVhbS1zZXR1cCwgLmdhbWUtbG9nbycpLmhpZGUoKTtcbiAgICAkKCcjbWF0Y2gtZW5naW5lLCAuYXdheS10ZWFtLCAuaG9tZS10ZWFtLCAudGltZXIsIC5idXR0b24tYmFyJykuc2hvdygpO1xuICAgIGlmIChydW4pIHtcbiAgICAgICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BhdXNlJyk7XG4gICAgICBnYW1lU3RhcnRlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BsYXknKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgJCgnI2hvbWVUZWFtJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHNob3dUYWN0aWNzUGFnZShob21lVGVhbSk7XG4gIH0pO1xuXG4gICQoJyNhd2F5VGVhbScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBzaG93VGFjdGljc1BhZ2UoYXdheVRlYW0pO1xuICB9KTtcblxuICAkKCcuZ28tYmFjaycpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAkKCcudGVhbS1zZXR1cCcpLmhpZGUoKTtcbiAgICAkKCcubWF0Y2gtc2V0dXAnKS5zaG93KCk7XG4gIH0pO1xuXG4gICQoJy5mb3JtYXRpb24nKS5vbignY2hhbmdlJywgKGUpID0+IHtcbiAgICBjb25zdCBuZXdGb3JtYXRpb24gPSBlLnRhcmdldC52YWx1ZTtcbiAgICB0ZWFtVGFjdGljcy5mb3JtYXRpb24gPSBuZXdGb3JtYXRpb247XG4gICAgcmV2ZWFsVGVhbSh0ZWFtVGFjdGljcyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHNob3dUYWN0aWNzUGFnZSh0ZWFtT2JqZWN0KSB7XG4gICAgaWYgKHJ1bikge1xuICAgICAgcnVuID0gIXJ1bjtcbiAgICB9XG5cbiAgICAkcHJpbWFyeUJ1dHRvbi50ZXh0KCdQbGF5Jyk7XG4gICAgJCgnLm1hdGNoLXNldHVwLCAubWF0Y2gtZW5naW5lJykuaGlkZSgpO1xuICAgICQoJy50ZWFtLXNldHVwJykuc2hvdygpO1xuICAgIHNldHVwVGFjdGljcyh0ZWFtT2JqZWN0KTtcbiAgICB0ZWFtVGFjdGljcyA9IHRlYW1PYmplY3Q7XG4gICAgcmV2ZWFsVGVhbSh0ZWFtVGFjdGljcyk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cFRhY3RpY3ModGVhbU9iamVjdCkge1xuICAgICQoJy50ZWFtLXBhbmVsJykuaHRtbCgnJyk7XG4gICAgJCgnLmZvcm1hdGlvbicpLnZhbCh0ZWFtT2JqZWN0LmZvcm1hdGlvbik7XG5cbiAgICAvLyBTb3J0cyBwbGF5ZXJzIGluIG9yZGVyIG9mIHBvc2l0aW9uIFtHSywgRGVmLCBNaWQsIEF0dF1cbiAgICB0ZWFtT2JqZWN0LnBsYXllcnMuc29ydChmdW5jdGlvbihhLGIpe1xuICAgICAgcmV0dXJuIHBvc2l0aW9ucy5pbmRleE9mKGEucG9zaXRpb24pIDwgcG9zaXRpb25zLmluZGV4T2YoYi5wb3NpdGlvbikgPyAtMSA6IDE7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlYW1PYmplY3QucGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGxheWVyID0gdGVhbU9iamVjdC5wbGF5ZXJzW2ldO1xuXG4gICAgICAvLyBJZiBzdGFydCBnaXZlIGFuIEhUTUwgdGljaywgZWxzZSBnaXZlIGFuIEhUTUwgY3Jvc3NcbiAgICAgIGNvbnN0IHN0YXJ0aW5nRWxldmVuID0gcGxheWVyLnBsYXlpbmcgPyAnJiMxMDAwNDsnIDogJyYjMTAwMDc7JztcblxuICAgICAgLy8gQnVpbGQgdGFibGUgb2Ygc3F1YWQgcGxheWVycyAtIGluc2VydCByZWxldmFudCBjbGFzcyB0byByZWZsZWN0IHBsYXllciBzdGF0dXMsIGUuZy4gc2VudCBvZmYsIHllbGxvdywgaW5qdXJlZCwgc3Vic3RpdHV0ZWRcbiAgICAgICQoJy50ZWFtLXBhbmVsJykuYXBwZW5kKFxuICAgICAgICBgPHAgY2xhc3M9XCJwbGF5ZXItbGluZSAke3BsYXllci5wb3NpdGlvbn0gJHtwbGF5ZXIuc3RhdHVzfVwiIGlkPScke3BsYXllci5uYW1lfSc+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGFydGluZyAke3BsYXllci5zdGF0dXN9XCIgaWQ9XCIke2l9XCI+JHtzdGFydGluZ0VsZXZlbn08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItcG9zaXRpb24gXCI+JHtwbGF5ZXIucG9zaXRpb259PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLW5hbWVcIj4ke3BsYXllci5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCIgZGF0YS1zb3J0PVwiJHtwbGF5ZXIuYXR0YWNrfVwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDEyOCwwLCR7cGxheWVyLmF0dGFjay8xMDB9KVwiPiR7cGxheWVyLmF0dGFja308L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDEyOCwwLCR7cGxheWVyLmRlZmVuY2UvMTAwfSlcIj4ke3BsYXllci5kZWZlbmNlfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMTI4LDAsJHtwbGF5ZXIuY3JlYXRpdml0eS8xMDB9XCIpPiR7cGxheWVyLmNyZWF0aXZpdHl9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwxMjgsMCwke3BsYXllci5kZWZlbmNlLzEwMH0pXCI+JHtwbGF5ZXIuZGVmZW5jZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDEyOCwwLCR7cGxheWVyLmZpdG5lc3MvMTAwfSlcIj4ke3BsYXllci5maXRuZXNzfTwvc3Bhbj5cbiAgICAgICAgPC9wPmBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmV2ZWFsVGVhbSh0ZWFtT2JqZWN0KSB7XG4gICAgJCgnLnRlYW0tZGlzcGxheScpLmh0bWwoJycpO1xuXG4gICAgLy8gU3BsaXQgZm9ybWF0aW9uIGludG8gYW4gYXJyYXlcbiAgICBjb25zdCBmb3JtYXRpb24gPSBbJzEnXS5jb25jYXQodGVhbU9iamVjdC5mb3JtYXRpb24uc3BsaXQoJy0nKSk7XG5cbiAgICBsZXQgcGxheWVyTnVtYmVyID0gMDtcbiAgICBsZXQgcG9zaXRpb25OdW1iZXIgPSAwO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRyeSB0byBtYXAgdGhyb3VnaCB0aGUgZm9ybWF0aW9uIGFycmF5LCBlLmcuIFsxLDQsMiwyXSAoaW5jbHVzaXZlIG9mIGdvYWxrZWVwZXIpXG4gICAgICBmb3JtYXRpb24ubWFwKChhcnJheUl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IHBhcnNlRmxvYXQoYXJyYXlJdGVtKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggcGxheWVycyB3aGlsZSBpIChpbml0aWFsbHkgMCkgaXMgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgcG9zaXRpb25zIHJlcXVpcmVkXG4gICAgICAgIHdoaWxlIChpIDwgaXRlcmF0aW9ucykge1xuICAgICAgICAgIC8vIElmIHBsYXllci5wbGF5aW5nID09PSB0cnVlIE9SIGlmIHBsYXllci5zdGF0dXMgaXMgJ2VqZWN0ZWQnIChzZW50IG9mZikuIFBsYXllcnMgd2l0aCByZWQgY2FyZHMgY29udGludWUgdG8gYmUgYWRkZWQgdG8gdGhlIHRlYW0gc2hlZXQsIHNvIHRoYXQgdGhleSBjYW5ub3QgYmUgcmVtb3ZlZC9yZXBsYWNlZC4gQSBjbGFzcyBvZiAucmVkIGlzIGFkZGVkLCB3aGljaCBkaWFibGVkcyB0aGUgYWJpbGl0eSB0byBzdWJzdGl0dXRlIHRoZW0uIFBsYXllcnMgd2l0aCBhIHN0YXR1cyBvZiAnZWplY3RlZCcgaGF2ZSBhIC5wbGF5aW5nIHZhbHVlIG9mIGZhbHNlIC0gdGhleSBubyBsb25nZXIgaW5mbHVlbmNlIGV2ZW50cy5cbiAgICAgICAgICBpZiAodGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0ucGxheWluZyB8fCB0ZWFtT2JqZWN0LnBsYXllcnNbcGxheWVyTnVtYmVyXS5zdGF0dXMgPT09ICdlamVjdGVkJykge1xuXG4gICAgICAgICAgICAvLyBJZiBwbGF5ZXIgaGFzIGJlZW4gcGxhY2VkIG91dCBvZiBwb3NpdGlvbiBhZGQgYSB3YXJuaW5nIGNsYXNzXG4gICAgICAgICAgICBjb25zdCB3YXJuaW5nTWVzc2FnZSA9IHBvc2l0aW9uc1twb3NpdGlvbk51bWJlcl0gIT09IHRlYW1PYmplY3QucGxheWVyc1twbGF5ZXJOdW1iZXJdLnBvc2l0aW9uID8gJ3dhcm5pbmcnIDogJyc7XG5cbiAgICAgICAgICAgIC8vIEFwcGVuZCBwbGF5ZXIgb24gdG8gdGhlIHBpdGNoIG1hcCB3aXRoIGNsYXNzZXMgdGhhdCBpbmRpY2F0ZSB0aGUgcGxheWVyJ3Mgc3RhdHVzLGUuZy4gcmVkIGNhcmQsIHllbGxvdyBjYXJkIG9yIG91dCBvZiBwb3NpaXRvblxuICAgICAgICAgICAgJCgnLnRlYW0tZGlzcGxheScpLmFwcGVuZChcbiAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPSdwbGF5ZXItYmxvY2sgJHt3YXJuaW5nTWVzc2FnZX0gJHsodGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0uc3RhdHVzKX0nPiR7dGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0ubmFtZX08L3NwYW4+YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRlYW1PYmplY3QucGxheWVyc1twbGF5ZXJOdW1iZXJdLmNob3NlblBvc2l0aW9uID0gcG9zaXRpb25zW3Bvc2l0aW9uTnVtYmVyXTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgcGxheWVyTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLnRlYW0tZGlzcGxheScpLmFwcGVuZCgnPGRpdiBjbGFzcz1cInNlcGVyYXRlLXBsYXllcnNcIj4nKTtcbiAgICAgICAgcG9zaXRpb25OdW1iZXIrKztcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAvLyBUaHJvd3MgYW4gZXJyb3Igd2hlbiBmZXdlciB0aGFuIDExIHBsYXllcnMgYXJlIHNlbGVjdGVkLiBJdCBkaXNwbGF5cyBhIHdhcm5pbmcuIERvIG5vdCB3YW50IHRvIHByZXZlbnQgc2VsZWN0aW9ucyBhcyB0aGVyZSBhcmUgbGVnaXRtYXRlIHJlYXNvbnMgd2h5IGZld2VyIHRoYW4gMTEgcGxheWVycyBtYXkgYmUgc2VsZWN0ZWQsIGUuZy4gcmVkIGNhcmRzIG9yIGluanVyaWVzXG4gICAgICAkKCcudGVhbS1kaXNwbGF5JykuYXBwZW5kKGA8cCBjbGFzcz0ndGVhbS1zZWxlY3Rpb24td2FybmluZyBzZXBlcmF0ZS1wbGF5ZXJzJz5MZXNzIHRoYW4gMTEgcGxheWVycyBzZWxlY3RlZCE8L3A+YCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hvb3NlUGxheWVycyh0ZWFtT2JqZWN0LCBzZWxlY3RlZFBsYXllcikge1xuICAgIGNvbnN0ICRzZWxlY3RlZFBsYXllciA9ICQoYCMke3NlbGVjdGVkUGxheWVyfWApO1xuXG4gICAgLy8gVG9nZ2xlIHNlbGVjdGVkIHBsYXllcnMgcGxheWluZyBzdGF0dXMgKHRydWUvZmFsc2UpXG4gICAgdGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXS5wbGF5aW5nID0gIXRlYW1PYmplY3QucGxheWVyc1tzZWxlY3RlZFBsYXllcl0ucGxheWluZztcblxuICAgIHJldmVhbFRlYW0odGVhbVRhY3RpY3MpO1xuXG4gICAgaWYgKHRlYW1PYmplY3QucGxheWVyc1tzZWxlY3RlZFBsYXllcl0ucGxheWluZykge1xuICAgICAgJHNlbGVjdGVkUGxheWVyLmh0bWwoJyYjMTAwMDQ7Jyk7XG4gICAgICBpZiAoZ2FtZVN0YXJ0ZWQpIHtcbiAgICAgICAgJHNlbGVjdGVkUGxheWVyLnBhcmVudCgpLmNzcyh7J2JhY2tncm91bmQnOiAnZ3JlZW4nfSk7XG4gICAgICAgIGNvbnN0IHBsYXllck9uID0gdGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXTtcbiAgICAgICAgc3Vic3RpdHV0ZSh0ZWFtT2JqZWN0LCBwbGF5ZXJPbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICRzZWxlY3RlZFBsYXllci5odG1sKCcmIzEwMDA3OycpO1xuICAgICAgaWYgKGdhbWVTdGFydGVkKSB7XG4gICAgICAgICRzZWxlY3RlZFBsYXllci5wYXJlbnQoKS5jc3Moeydwb2ludGVyLWV2ZW50cyc6ICdub25lJywgJ2JhY2tncm91bmQnOiAncmVkJ30pO1xuICAgICAgICBjb25zdCBwbGF5ZXJPZmYgPSB0ZWFtT2JqZWN0LnBsYXllcnNbc2VsZWN0ZWRQbGF5ZXJdO1xuICAgICAgICBzdWJzdGl0dXRlKHRlYW1PYmplY3QsIHBsYXllck9mZik7XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHN1YnN0aXR1dGUodGVhbU9iamVjdCwgcGxheWVyKSB7XG4gICAgaWYgKHRlYW1PYmplY3Quc3VicyA8IDcpIHtcbiAgICAgIGlmICghcGxheWVyLnBsYXlpbmcpIHtcbiAgICAgICAgJChgIyR7dGVhbU9iamVjdC5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1hcnJvdy1yaWdodCcgc3R5bGU9J2NvbG9yOnJlZDsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke3BsYXllci5uYW1lfSBzdWJzdGl0dXRlZDxici8+YCk7XG4gICAgICAgIHRlYW1PYmplY3Quc3VicyArPSAxO1xuICAgICAgICBwbGF5ZXIucGxheWluZyA9IGZhbHNlO1xuICAgICAgICBwbGF5ZXIuc3RhdHVzID0gJ3N1YmJlZC1vZmYnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChgIyR7dGVhbU9iamVjdC5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1hcnJvdy1yaWdodCcgc3R5bGU9J2NvbG9yOmdyZWVuOycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7cGxheWVyLm5hbWV9IHN1YnN0aXR1dGVkPGJyLz5gKTtcbiAgICAgICAgdGVhbU9iamVjdC5zdWJzICs9IDE7XG4gICAgICAgIHBsYXllci5wbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgcGxheWVyLnN0YXR1cyA9ICdzdWJiZWQtb24nO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnWW91IGhhdmUgaGFkIDMgc3VicyEnKTtcbiAgICB9XG4gIH1cblxuICAvLyBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cblxuICBmdW5jdGlvbiB0aW1lQ29udHJvbCgpIHtcbiAgICBpZihtYXRjaFRpbWUgPT09IDQ0KSB7XG4gICAgICAkY29tbWVudGFyeUJveC50ZXh0KGBUaGF0J3MgaGFsZi10aW1lIWApO1xuICAgICAgcnVuID0gIXJ1bjtcbiAgICAgICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BsYXknKTtcbiAgICB9XG5cbiAgICBpZihtYXRjaFRpbWUgPT09IDkwKSB7XG4gICAgICAkY29tbWVudGFyeUJveC50ZXh0KGBUaGF0J3MgZnVsbC10aW1lIWApO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklEKTtcbiAgICAgICRwcmltYXJ5QnV0dG9uLnRleHQoJ0ZpbmlzaCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXRjaFRpbWUrKztcbiAgICAgICRtYXRjaFRpbWUudGV4dChtYXRjaFRpbWUpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gZ2VuUmFuZG9tVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbHVlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlKCkge1xuXG4gICAgY29uc3QgaG9tZUJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lQmFyJyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHR3byB0ZWFtcyBjcmVhdGl2aXR5IHNjb3JlcyBhbmQgY292ZXJ0IHRoZW0gaW50byBhIHBlcmNlbnRhZ2Ugb3V0IG9mIDEwMCAtIHRoaXMgaXMgZm9yIHRoZSBwb3NzZXNzaW9uIGJhci5cbiAgICAvLyBJdCArLy0gYSBzbWFsbCBsb3cgbGV2ZWwgaW50ZWdlciB0byBrZWVwIGl0IG1vdmluZyBjb250aW5vdXNseVxuICAgIHdpZHRoID0gKGhvbWVUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSAvIChob21lVGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykgKyBhd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykpICogMTAwKSArIChNYXRoLnJhbmRvbSgpIDwgMC41ID8gLWdlblJhbmRvbVZhbHVlKDYpIDogZ2VuUmFuZG9tVmFsdWUoNikpO1xuXG4gICAgaG9tZUJhci5zdHlsZS53aWR0aCA9IHdpZHRoICsgJyUnO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0VGVhbSgpIHtcbiAgICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSB2YWx1ZXMgZnJvbSBob21lIGFuZCBhd2F5IHRlYW0gdXNpbmcgdGhlaXIgYXZlcmFnZSBjcmVhdGl2aXR5IHNjb3JlcyBmcm9tIHBsYXllcnMgb24gdGhlIHBpdGNoXG4gICAgLy8gVGhlIGhpZ2hlciBhIHRlYW1zIGNyZWF0aXZpdHkgc2NvcmUsIHRoZSBtb3JlIGNoYW5jZXMgdGhleSB3aWxsIGNyZWF0ZVxuICAgIC8vIDI0LjA1LjIwMTcgLSBhZGRlZCBhIEZpdG5lc3MgdmFsdWUgZm9yIGV2ZXJ5IHBsYXllciwgd2hpY2ggZGVjcmVhc2VzIHRocm91Z2ggdGhlIGdhbWUuIFRoaXMgaXMgbm93IGFkZGVkIHRvIHRoZSByYW5kb20gY3JlYXRpdml0eSBzY29yZSB0byBkZXRlcm1pbmUsIHdoaWNoIHRlYW0gaG9tZS9hd2F5IGdldHMgdGhlIGNoYW5jZS5cbiAgICBjb25zdCBob21lUmFuZG9tID0gIGdlblJhbmRvbVZhbHVlKGhvbWVUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSArIGhvbWVUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2ZpdG5lc3MnKSk7XG4gICAgY29uc3QgYXdheVJhbmRvbSA9ICBnZW5SYW5kb21WYWx1ZShhd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5JykgKyBhd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdmaXRuZXNzJykpO1xuXG4gICAgaWYgKGhvbWVSYW5kb20gPj0gYXdheVJhbmRvbSkge1xuICAgICAgcmV0dXJuIFtob21lVGVhbSwgYXdheVRlYW1dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW2F3YXlUZWFtLCBob21lVGVhbV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0dXBFdmVudChhdHRhY2tpbmdUZWFtKSB7XG4gICAgJGNvbW1lbnRhcnlCb3guY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXR0YWNraW5nVGVhbS5jb2xvcnNbMF0pO1xuICAgICRjb21tZW50YXJ5Qm94LmNzcygnY29sb3InLCBhdHRhY2tpbmdUZWFtLmNvbG9yc1sxXSk7XG4gICAgaWYgKGdlblJhbmRvbVZhbHVlKDIwKSAlIDQgPT09IDApe1xuICAgICAgYXR0YWNraW5nVGVhbS5pbmNyZWFzZVZhbHVlcygzLCdhdHRhY2snLFsnbWlkZmllbGRlcicsICdzdHJpa2VyJ10pO1xuICAgICAgYXR0YWNraW5nVGVhbS5pbmNyZWFzZVZhbHVlcygzLCdjcmVhdGl2aXR5JyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgIC8vICcnID09PSBObyBwbGF5ZXIgcGFzc2VkIGluXG4gICAgICAkY29tbWVudGFyeUJveC50ZXh0KGdlbmVyYXRlQ29tbWVudGFyeSgnY2hhbmNlJywnJykpO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8gUkVNT1ZFXG4gIC8vIGZ1bmN0aW9uIHNlbGVjdFBsYXllcih0ZWFtKSB7XG4gIC8vICAgY29uc3QgZ2VuUmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZWFtLnBsYXllcnMubGVuZ3RoKTtcbiAgLy8gICByZXR1cm4gdGVhbS5wbGF5ZXJzW2dlblJhbmRvbUluZGV4XTtcbiAgLy8gfVxuXG4gIGZ1bmN0aW9uIGdvYWxDaGFuY2UoYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbSkge1xuICAgIC8vIFJlZmFjdG9yIHRoaXNcbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllcigpO1xuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignZGVmZW5kZXInKTtcblxuICAgIGlmIChnZW5SYW5kb21WYWx1ZShhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrKSA+IGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kZWZlbmNlKSkge1xuXG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ2dvYWwnLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgICAgdXBkYXRlU2NvcmUoYXR0YWNraW5nVGVhbSk7XG5cbiAgICAgIC8vIFJlZmFjdG9yIHRoZXNlIG1lc3NhZ2VzIC0gdXNlIGEgZnVuY3Rpb24gd2hpY2ggcGFzc2VzIGluIHBsYXllciwgdGVhbU9iamVjdCwgY29sb3IgYW5kIGljb24gbmFtZVxuICAgICAgJChgIyR7YXR0YWNraW5nVGVhbS5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1mdXRib2wtbycgc3R5bGU9J2NvbG9yOndoaXRlOycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7YXR0YWNraW5nUGxheWVyLm5hbWV9IHNjb3JlZDxici8+YCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRGlzY2lwbGluZShhdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtKSB7XG5cbiAgICAvLyBSZWZhY3RvclxuICAgIC8vIEFUVEFDS0lORyBURUFNIFJFRFVOREFOVFxuICAgIC8vIHRlYW1TdHJpbmcgY2FuIGJlIHN1YnN0aXR1dGVkIGZvciBkZWZlbmRpbmdUZWFtLnBsYWNlXG4gICAgY29uc3QgZGVmZW5kaW5nUGxheWVyID0gZGVmZW5kaW5nVGVhbS5yYW5kb21QbGF5ZXIoKTtcblxuXG4gICAgLy8gVGFrZXMgbWF0Y2ggdGltZSBpbiBhY2NvdW50LCB3aGljaCBkZWNyZWFzZXMgdGhlIGxpa2VsaWhvb2Qgb2YgYm9va2luZ3MgaGFwcGVuaW5nIGVhcmxpZXIgaW4gdGhlIGdhbWUuXG4gICAgaWYgKChnZW5SYW5kb21WYWx1ZShkZWZlbmRpbmdQbGF5ZXIuZGlzY2lwbGluZSkgKyAoMTAwLW1hdGNoVGltZSkpIDwgOTAgJiYgZGVmZW5kaW5nUGxheWVyLnN0YXR1cyAhPT0gJ2VqZWN0ZWQnKSB7XG5cbiAgICAgIC8vIEFscmVhZHkgYm9va2VkPyBTZW5kIGhpbSBvZmYhXG4gICAgICBpZiAoZGVmZW5kaW5nUGxheWVyLnN0YXR1cyA9PT0gJ3llbGxvdycpIHtcbiAgICAgICAgLy8gUmVmYWN0b3IgY3JlYXRlIGEgY2xhc3Mgb3IgcGFzcyBpbiBhcyBhbiBvYmplY3QgLSBvbmUgbGluZVxuICAgICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnI0ZGMDAwMCcpO1xuICAgICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2NvbG9yJywgJyNGRkZGRkYnKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoMjAsJ2RlZmVuY2UnLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoMjAsJ2F0dGFjaycsWydzdHJpa2VyJywnbWlkZmllbGRlcicsICdkZWZlbmRlcicsICdnb2Fsa2VlcGVyJ10pO1xuICAgICAgICBkZWZlbmRpbmdUZWFtLnJlZHVjZVZhbHVlcygyMFxuICAgICAgICAgICwnY3JlYXRpdml0eScsWydzdHJpa2VyJywnbWlkZmllbGRlcicsICdkZWZlbmRlcicsICdnb2Fsa2VlcGVyJ10pO1xuXG4gICAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnc2Vjb25kWWVsbG93JywgZGVmZW5kaW5nUGxheWVyKTtcblxuICAgICAgICAvLyBSZWZhY3RvciB0aGVzZSBtZXNzYWdlcyAtIHVzZSBhIGZ1bmN0aW9uIHdoaWNoIHBhc3NlcyBpbiBwbGF5ZXIsIHRlYW1PYmplY3QsIGNvbG9yIGFuZCBpY29uIG5hbWVcbiAgICAgICAgJChgIyR7ZGVmZW5kaW5nVGVhbS5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUgZXZlbnQtaXRlbScgc3R5bGU9J2NvbG9yOiByZWQ7JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtkZWZlbmRpbmdQbGF5ZXIubmFtZX0gc2VudCBvZmY8YnIvPmApO1xuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIuc3RhdHVzID0gJ2VqZWN0ZWQnO1xuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIucGxheWluZyA9IGZhbHNlO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZWZhY3RvciBjcmVhdGUgYSBjbGFzcyBvciBwYXNzIGluIGFzIGFuIG9iamVjdCAtIG9uZSBsaW5lXG4gICAgICAgICRjb21tZW50YXJ5Qm94LmNzcygnYmFja2dyb3VuZC1jb2xvcicsICd5ZWxsb3cnKTtcbiAgICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsICcjMDAwMDAwJyk7XG4gICAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgneWVsbG93JywgZGVmZW5kaW5nUGxheWVyKTtcbiAgICAgICAgZGVmZW5kaW5nUGxheWVyLmRlZmVuY2UgLT0gODtcblxuICAgICAgICAkKGAjJHtkZWZlbmRpbmdUZWFtLnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgXG4gICAgICAgICAgPGkgY2xhc3M9J2ZhIGZhLXNxdWFyZSBldmVudC1pdGVtJyBzdHlsZT0nY29sb3I6IHllbGxvdzsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2RlZmVuZGluZ1BsYXllci5uYW1lfSBib29rZWQ8YnIvPmApO1xuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIuc3RhdHVzID0gJ3llbGxvdyc7XG4gICAgICAgIGRlZmVuZGluZ1BsYXllci5maXRuZXNzIC09IGdlblJhbmRvbVZhbHVlKDEwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVJbmp1cnkoYXR0YWNraW5nVGVhbSkge1xuICAgIGNvbnN0IGF0dGFja2luZ1BsYXllciA9IGF0dGFja2luZ1RlYW0ucmFuZG9tUGxheWVyKCk7XG5cbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMTAxKSAlIDQwID09PSAwKSB7XG5cbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnaW5qdXJ5JywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke2F0dGFja2luZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtcGx1cycgc3R5bGU9J2NvbG9yOiBncmVlbjsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBpbmp1cmVkPGJyLz5gKTtcbiAgICAgIGlmIChhdHRhY2tpbmdUZWFtLnBsYWNlID09PSAnYXdheScgJiYgY3B1TW9kZSkge1xuICAgICAgICBhdHRhY2tpbmdQbGF5ZXIucGxheWluZyA9ICFhdHRhY2tpbmdQbGF5ZXIucGxheWluZztcbiAgICAgICAgc3Vic3RpdHV0ZShhd2F5VGVhbSwgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICAgY29uc3QgYWRkUGxheWVyID0gYXdheVRlYW0ucmFuZG9tU3Vic3RpdHV0ZShhdHRhY2tpbmdQbGF5ZXIucG9zaXRpb24pO1xuICAgICAgICBhZGRQbGF5ZXIucGxheWluZyA9ICFhZGRQbGF5ZXIucGxheWluZztcbiAgICAgICAgc3Vic3RpdHV0ZShhd2F5VGVhbSwgYWRkUGxheWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dGFja2luZ1BsYXllci5maXRuZXNzID0gMCArIGdlblJhbmRvbVZhbHVlKDMwKTtcbiAgICAgICAgYXR0YWNraW5nUGxheWVyLnN0YXR1cyA9ICdpbmp1cmVkJztcbiAgICAgICAgYXR0YWNraW5nUGxheWVyLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIuZml0bmVzcyAtPSBnZW5SYW5kb21WYWx1ZSgxNSk7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIuZGVmZW5jZSAtPSBnZW5SYW5kb21WYWx1ZSgxMCk7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrIC09IGdlblJhbmRvbVZhbHVlKDEwKTtcbiAgICAgIC8vIFJlZmFjdG9yIC1cbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnbmVhck1pc3MnLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRnJlZWtpY2soYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbSkge1xuICAgIGNvbnN0IGF0dGFja2luZ1BsYXllciA9IGF0dGFja2luZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignbWlkZmllbGRlcicpO1xuICAgIGNvbnN0IGRlZmVuZGluZ1ZhbHVlID0gKGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyQnlQb3NpdGlvbignZ29hbGtlZXBlcicpLmRlZmVuY2UgKyBkZWZlbmRpbmdUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2RlZmVuZGVyJykpO1xuXG4gICAgaWYgKGF0dGFja2luZ1BsYXllci5hdHRhY2sgPiBkZWZlbmRpbmdWYWx1ZSkge1xuICAgICAgdXBkYXRlU2NvcmUoYXR0YWNraW5nVGVhbSk7XG5cbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnZnJlZWtpY2snLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgICAgJChgIyR7YXR0YWNraW5nVGVhbS5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1mdXRib2wtbycgc3R5bGU9J2NvbG9yOndoaXRlOycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7YXR0YWNraW5nUGxheWVyLm5hbWV9IHNjb3JlZDxici8+YCk7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrICs9IDU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnd2FzdGVkRnJlZWtpY2snLCBhdHRhY2tpbmdQbGF5ZXIpO1xuICAgICAgYXR0YWNraW5nUGxheWVyLmNyZWF0aXZpdHkgLT0gNTtcbiAgICAgIGF0dGFja2luZ1RlYW0ucmVkdWNlVmFsdWVzKGdlblJhbmRvbVZhbHVlKDEwKSwgJ2F0dGFjaycsIFsnc3RyaWtlcicsICdtaWRmaWVsZGVyJ10pO1xuICAgICAgYXR0YWNraW5nVGVhbS5yZWR1Y2VWYWx1ZXMoZ2VuUmFuZG9tVmFsdWUoMTApLCAnY3JlYXRpdml0eScsIFsnc3RyaWtlcicsICdtaWRmaWVsZGVyJ10pO1xuXG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZVBlbmFsdHkoYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbSkge1xuXG4gICAgY29uc3QgYXR0YWNraW5nUGxheWVyID0gYXR0YWNraW5nVGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKCdzdHJpa2VyJyk7XG4gICAgY29uc3QgZGVmZW5kaW5nUGxheWVyID0gZGVmZW5kaW5nVGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKCdnb2Fsa2VlcGVyJyk7XG4gICAgY29uc3QgYm9va2VkUGxheWVyID0gZGVmZW5kaW5nVGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKCdkZWZlbmRlcicpO1xuICAgIC8vIEJvb2sgdGhlIHBsYXllcj9cbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMTAwKSA+IDI1KSB7XG4gICAgICBib29rZWRQbGF5ZXIuc3RhdHVzID0gJ3llbGxvdyc7XG4gICAgICAkKGAjJHtkZWZlbmRpbmdUZWFtLnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLXNxdWFyZSBldmVudC1pdGVtJyBzdHlsZT0nY29sb3I6IHllbGxvdzsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2Jvb2tlZFBsYXllci5uYW1lfSBib29rZWQ8YnIvPmApO1xuICAgIH1cblxuICAgIGlmICgoZ2VuUmFuZG9tVmFsdWUoYXR0YWNraW5nUGxheWVyLmF0dGFjaykqMikgPiBnZW5SYW5kb21WYWx1ZShkZWZlbmRpbmdQbGF5ZXIuZGVmZW5jZSkpIHtcblxuICAgICAgdXBkYXRlU2NvcmUoYXR0YWNraW5nVGVhbSk7XG5cbiAgICAgIC8vICRjb21tZW50YXJ5Qm94LnRleHQoYCR7YXR0YWNraW5nUGxheWVyLm5hbWV9J3MgY2xpbmljYWwgZnJvbSB0aGUgc3BvdCEgR29hbCFgKTtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgncGVuYWx0eScsIGF0dGFja2luZ1BsYXllcik7XG4gICAgICAkKGAjJHthdHRhY2tpbmdUZWFtLnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLWZ1dGJvbC1vJyBzdHlsZT0nY29sb3I6d2hpdGUnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBzY29yZXMgcGVuYWx0eTxici8+YCk7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrICs9IDU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnbWlzc2VkUGVuYWx0eScsIGF0dGFja2luZ1BsYXllcik7XG4gICAgICAkKGAjJHthdHRhY2tpbmdUZWFtLnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLWZ1dGJvbC1vJyBzdHlsZT0nY29sb3I6cmVkJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0gbWlzc2VkIHBlbmFsdHk8YnIvPmApO1xuICAgICAgZGVmZW5kaW5nUGxheWVyLmRlZmVuY2UgKz0gMTA7XG4gICAgICBhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrIC09IDEwO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0cmFpZ2h0UmVkKGRlZmVuZGluZ1RlYW0pIHtcbiAgICBjb25zdCBkZWZlbmRpbmdQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllcigpO1xuICAgIGlmIChnZW5SYW5kb21WYWx1ZShkZWZlbmRpbmdQbGF5ZXIuZGlzY2lwbGluZSkgKyAoMTAwLW1hdGNoVGltZSkgPCAyNSkge1xuICAgICAgZGVmZW5kaW5nUGxheWVyLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgIGRlZmVuZGluZ1BsYXllci5zdGF0dXMgPSAnZWplY3RlZCc7XG5cbiAgICAgIC8vICRjb21tZW50YXJ5Qm94LnRleHQoJ1RoZSByZWZlcmVlIGdpdmVzIGhpbSBhIHN0cmFpZ2h0IHJlZCEnKTtcbiAgICAgIGdlbmVyYXRlQ29tbWVudGFyeSgnc3RyYWlnaHRSZWQnLCBkZWZlbmRpbmdQbGF5ZXIpO1xuICAgICAgJChgIyR7ZGVmZW5kaW5nVGVhbS5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUnIHN0eWxlPScgY29sb3I6IHJlZDsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2RlZmVuZGluZ1BsYXllci5uYW1lfSBzZW50IG9mZjxici8+YCk7XG4gICAgICAvLyBpZiAoZGVmZW5kaW5nVGVhbS5wbGFjZSA9PT0gJ2hvbWUnKSBwYXVzZVBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb25maWdUZWFtKHRlYW0sIHNlbGVjdG9yKSB7XG4gICAgLy8gUmVmYWN0b3IgYWxsIHRlYW1zIGludG8gb25lIG9iamVjdCwgdGhlbiBwYXNzIGluIG9iamVjdFtzZWxlY3Rvcl0gPT4gc2F2ZSBhYm91dCAyMCBsaW5lcyBvZiBjb2RlXG4gICAgaWYgKGhvbWVUZWFtID09PSBudWxsKSB7XG4gICAgICAkKCcuaG9tZS10ZWFtICAudGVhbS1uYW1lJykudGV4dChzZWxlY3Rvcik7XG4gICAgICBzd2l0Y2ggKHNlbGVjdG9yKSB7XG4gICAgICAgIGNhc2UgJ1RvdHRlbmhhbSc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBzcHVycztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIFVuaXRlZCc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBtYW5Vbml0ZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xpdmVycG9vbCc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBsaXZlcnBvb2w7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01hbiBDaXR5JzpcbiAgICAgICAgICBob21lVGVhbSA9IG1hbkNpdHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0V2ZXJ0b24nOlxuICAgICAgICAgIGhvbWVUZWFtID0gZXZlcnRvbjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQ2hlbHNlYSc6XG4gICAgICAgICAgaG9tZVRlYW0gPSBjaGVsc2VhO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdMZWljZXN0ZXInOlxuICAgICAgICAgIGhvbWVUZWFtID0gbGVpY2VzdGVyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnNlbmFsJzpcbiAgICAgICAgICBob21lVGVhbSA9IGFyc2VuYWw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBob21lVGVhbS5wbGFjZSA9ICdob21lJztcbiAgICAgICQoJy5ob21lLXRlYW0tbG9nbycpLmF0dHIoJ3NyYycsIGBpbWFnZXMvJHtob21lVGVhbS5uYW1lfS5wbmdgKTtcbiAgICAgICQoJy5ob21lLXRlYW0tbG9nbycpLnNob3coKTtcbiAgICAgICQoJy5ob21lLXRlYW0sICNob21lQmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgaG9tZVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICQoJy5ob21lLXRlYW0nKS5jc3MoJ2NvbG9yJywgaG9tZVRlYW0uY29sb3JzWzFdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnLmF3YXktdGVhbSAudGVhbS1uYW1lJykudGV4dChzZWxlY3Rvcik7XG4gICAgICBzd2l0Y2ggKHNlbGVjdG9yKSB7XG4gICAgICAgIGNhc2UgJ1RvdHRlbmhhbSc6XG4gICAgICAgICAgYXdheVRlYW0gPSBzcHVycztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIFVuaXRlZCc6XG4gICAgICAgICAgYXdheVRlYW0gPSBtYW5Vbml0ZWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xpdmVycG9vbCc6XG4gICAgICAgICAgYXdheVRlYW0gPSBsaXZlcnBvb2w7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01hbiBDaXR5JzpcbiAgICAgICAgICBhd2F5VGVhbSA9IG1hbkNpdHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0V2ZXJ0b24nOlxuICAgICAgICAgIGF3YXlUZWFtID0gZXZlcnRvbjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQ2hlbHNlYSc6XG4gICAgICAgICAgYXdheVRlYW0gPSBjaGVsc2VhO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdMZWljZXN0ZXInOlxuICAgICAgICAgIGF3YXlUZWFtID0gbGVpY2VzdGVyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnNlbmFsJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IGFyc2VuYWw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBhd2F5VGVhbS5wbGFjZSA9ICdhd2F5JztcbiAgICAgICQoJy5hd2F5LXRlYW0tbG9nbycpLmF0dHIoJ3NyYycsIGBpbWFnZXMvJHthd2F5VGVhbS5uYW1lfS5wbmdgKTtcbiAgICAgICQoJy5hd2F5LXRlYW0tbG9nbycpLnNob3coKTtcbiAgICAgICQoJy5sb2dvLWRpc3BsYXkgc3BhbicpLnNob3coKTtcbiAgICAgICQoJy5hd2F5LXRlYW0sIC5wb3NzZXNzaW9uLWJhcicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGF3YXlUZWFtLmNvbG9yc1swXSk7XG4gICAgICAkKCcuYXdheS10ZWFtJykuY3NzKCdjb2xvcicsIGF3YXlUZWFtLmNvbG9yc1sxXSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVDb21tZW50YXJ5KHNjZW5hcmlvLCBwbGF5ZXIpIHtcbiAgICBjb25zdCBjb21tZW50YXJ5ID0ge1xuICAgICAgZ29hbDogWydHb2FsIScsICdIZVxcJ3Mgc2NvcmVkIScsIGBUaGF0J3MgYSBncmVhdCBmaW5pc2ghYCwgYFdoYXQgYSBnb2FsIGJ5ICR7cGxheWVyLm5hbWV9YCwgYCR7cGxheWVyLm5hbWV9IGZpbmlzaGVzIG9mZiB0aGUgbW92ZSFgXSxcbiAgICAgIGZyZWVraWNrOiBbYEl0J3MgYSBmcmVla2lja2AsIGAke3BsYXllci5uYW1lfSB0byB0YWtlIHRoZSBmcmVla2lja2AsIGBIZSBsaW5lcyB1cCB0aGUgZnJlZWtpY2tgLCBgVGhpcyBpcyBhIGNoYW5jZSB0byBnZXQgYSBjcm9zcyBpbmBdLFxuICAgICAgd2FzdGVkRnJlZWtpY2s6IFtgJHtwbGF5ZXIubmFtZX0gbG9zZXMgcG9zc2Vzc2lvbmAsIGBUaGF0J3MgZW5kZWQgdXAgaW4gcm93IFpgLCBgVGhlIGF0dGFjayBhbW91bnRzIHRvIG5vdGhpbmdgLCBgJHtwbGF5ZXIubmFtZX0gaGFzIHdhc3RlZCB0aGF0IG9wcG9ydHVuaXR5YCwgYCR7cGxheWVyLm5hbWV9J3MgZWZmb3J0IGdvZXMgb3ZlciB0aGUgYmFyYCwgYEhlIGhhbmRzIGJhY2sgcG9zc2Vzc2lvbiB0byB0aGUgb3RoZXIgdGVhbWBdLFxuICAgICAgeWVsbG93OiBbYEhlJ3MgZ29pbmcgaW4gdGhlIGJvb2tgLCBgT3VjaCEgJHtwbGF5ZXIubmFtZX0gd2lsbCBnZXQgYSB5ZWxsb3cgZm9yIHRoYXRgLCBgVGhhdCdzIGEgYm9va2luZ2AsIGBJdCdzIGEgeWVsbG93IWAsIGBUaGUgcmVmIGlzIHRha2luZyBoaXMgbmFtZWBdLFxuICAgICAgc2Vjb25kWWVsbG93OiBbYEhlJ3MgYWxyZWFkeSBiZWVuIGJvb2tlZC4uLmAsIGBUaGF0J3MgYSBzZWNvbmQgeWVsbG93YCwgYCR7cGxheWVyLm5hbWV9IGlzIHNob3duIGEgcmVkIWAsIGAke3BsYXllci5uYW1lfSBpcyBvZmZgXSxcbiAgICAgIHN0cmFpZ2h0UmVkOiBbYCR7cGxheWVyLm5hbWV9IGlzIHNob3duIGEgc3RyYWlnaHQgcmVkIWAsIGAke3BsYXllci5uYW1lfSBpcyBvZmZgLCBgVGhlIHJlZiBoYXMgZ2l2ZW4gaGltIHN0cmFpZ2h0IHJlZCFgXSxcbiAgICAgIHBlbmFsdHk6IFtgVGhlIHJlZmVyZWUgcG9pbnRzIHRvIHRoZSBzcG90YCwgYFRoYXQncyBhIHBlbmFsdHlgLCBgJHtwbGF5ZXIubmFtZX0gaXMgZm91bGVkIGluIHRoZSBhcmVhYCwgYFRoZSByZWYgYmxvd3MgaGlzIHdoaXN0bGUuIFBlbmFsdHkuYF0sXG4gICAgICBtaXNzZWRQZW5hbHR5OiBbYFNhdmVkIWAsIGBJdCdzIG92ZXIgdGhlIGJhcmAsIGAke3BsYXllci5uYW1lfSBoYXMgbWlzc2VkIGl0IWAsIGBPaCBkZWFyISAke3BsYXllci5uYW1lfSdzIHB1dCBpdCB3aWRlJ2BdLFxuICAgICAgaW5qdXJ5OiBbYCR7cGxheWVyLm5hbWV9J3MgaXMgZ29pbmcgb2ZmYCxgJHtwbGF5ZXIubmFtZX0gaXMgaW5qdXJlZGAsYCR7cGxheWVyLm5hbWV9IGNhbid0IGNvbnRpbnVlYF0sXG4gICAgICBjaGFuY2U6IFtgVGhlIGJhbGwgaXMgd2FzdGVkYCwgYFBvc3Nlc3Npb24gaXMgc2xvcHBpbHkgZ2l2ZW4gYXdheWAsIGBUaGF0IGlzIHdhc3RlZGAsIGBUaGUgcmVmZXJlZSBwdWxscyBiYWNrIHBsYXlgLCBgVGhlIGJhbGwgZ29lcyBvdXQgZm9yIGEgdGhyb3dgLCBgR29vZCBpbnRlcmNlcHRpb24hYCwgYEhlJ3Mgcm9iYmVkIGhpbSBvZiBwb3NzZXNpb25gLCBgVGhhdCB3YXMgYSB3YXl3YXJkIGJhbGxgLCBgSGUgY2FuJ3QgcXVpdGUgZ2V0IG9uIHRoZSBlbmQgb2YgdGhhdCBvbmVgXSxcbiAgICAgIG5lYXJNaXNzOiBbYCR7cGxheWVyLm5hbWV9IGlzIGxpbXBpbmcsIGJ1dCBoZSdsbCBiZSBva2F5YCwgYFRoYXQncyBhIHNvcmUgb25lLmAsIGAke3BsYXllci5uYW1lfSBsb29rcyB0byBiZSBzdHJ1Z2dsaW5nYCwgYFRoZXJlJ3MgYSBuYXN0eSBjb21pbmcgdG9nZXRoZXJgLCBgVGhlIHJlZmVyZWUgd2F2ZXMgcGxheSBvbmBdXG4gICAgfTtcbiAgICBjb25zdCByYW5kb21JbmRleCA9IGdlblJhbmRvbVZhbHVlKGNvbW1lbnRhcnlbc2NlbmFyaW9dLmxlbmd0aCk7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNvbW1lbnRhcnlbc2NlbmFyaW9dW3JhbmRvbUluZGV4XTtcbiAgICAkY29tbWVudGFyeUJveC50ZXh0KGAke21lc3NhZ2V9YCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjb3JlKHRlYW1PYmplY3QpIHtcbiAgICBsZXQgc2NvcmUgPSBudWxsO1xuICAgIGxldCBnZXRTY29yZSA9IG51bGw7XG4gICAgaWYgKHRlYW1PYmplY3QucGxhY2UgPT09ICdob21lJykge1xuICAgICAgZ2V0U2NvcmUgPSAkaG9tZVNjb3JlLnRleHQoKTtcbiAgICAgIHNjb3JlID0gcGFyc2VGbG9hdChnZXRTY29yZSkgKyAxO1xuICAgICAgJGhvbWVTY29yZS50ZXh0KHNjb3JlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2V0U2NvcmUgPSAkYXdheVNjb3JlLnRleHQoKTtcbiAgICAgIHNjb3JlID0gcGFyc2VGbG9hdChnZXRTY29yZSkgKyAxO1xuICAgICAgJGF3YXlTY29yZS50ZXh0KHNjb3JlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByYW5kb21Qb3NpdGlvbigpIHtcbiAgICBjb25zdCByYW5kb21JbmRleCA9IGdlblJhbmRvbVZhbHVlKHBvc2l0aW9ucy5sZW5ndGgpICsgMTtcbiAgICBjb25zdCBjaG9zZW5Qb3NpdGlvbiA9IHBvc2l0aW9uc1tyYW5kb21JbmRleF07XG4gICAgcmV0dXJuIFtjaG9zZW5Qb3NpdGlvbl07XG4gIH1cbn0pO1xuIl19
