"use strict";var _slicedToArray=function(){function e(e,a){var t=[],s=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(s=(i=o.next()).done)&&(t.push(i.value),!a||t.length!==a);s=!0);}catch(e){r=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(r)throw n}}return t}return function(a,t){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(function(){function e(e){F&&(F=!F),P.text("Play"),$(".match-setup, .match-engine").hide(),$(".team-setup").show(),a(e),x=e,t(x)}function a(e){$(".team-panel").html(""),$(".formation").val(e.formation),e.players.sort(function(e,a){return C.indexOf(e.position)<C.indexOf(a.position)?-1:1});for(var a=0;a<e.players.length;a++){var t=e.players[a],s=t.playing?"&#10004;":"&#10007;";$(".team-panel").append('<p class="player-line '+t.position+" "+t.status+"\" id='"+t.name+"'>\n          <span class=\"starting "+t.status+'" id="'+a+'">'+s+'</span>\n          <span class="player-position ">'+t.position+'</span>\n          <span class="player-name">'+t.name+'</span>\n          <span class="player-stat" data-sort="'+t.attack+'" style="background-color: rgba(0,128,0,'+t.attack/100+')">'+t.attack+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.defence/100+')">'+t.defence+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.creativity/100+'")>'+t.creativity+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.defence/100+')">'+t.defence+'</span>\n          <span class="player-stat" style="background-color: rgba(0,128,0,'+t.fitness/100+')">'+t.fitness+"</span>\n        </p>")}}function t(e){$(".team-display").html("");var a=["1"].concat(e.formation.split("-")),t=0,s=0;try{a.map(function(a){for(var r=parseFloat(a),n=0;n<r;){if(e.players[t].playing||"ejected"===e.players[t].status){var i=C[s]!==e.players[t].position?"warning":"";$(".team-display").append("<span class='player-block "+i+" "+e.players[t].status+"'>"+e.players[t].name+"</span>"),e.players[t].chosenPosition=C[s],n++}t++}$(".team-display").append('<div class="seperate-players">'),s++})}catch(e){$(".team-display").append("<p class='team-selection-warning seperate-players'>Less than 11 players selected!</p>")}}function s(e,a){var s=$("#"+a);if(e.players[a].playing=!e.players[a].playing,t(x),e.players[a].playing){if(s.html("&#10004;"),H){s.parent().css({background:"green"});var n=e.players[a];r(e,n)}}else if(s.html("&#10007;"),H){s.parent().css({"pointer-events":"none",background:"red"});var i=e.players[a];r(e,i)}}function r(e,a){e.subs<7?a.playing?($("#"+e.place+"Events").append("<i class='fa fa-arrow-right' style='color:green;' aria-hidden='true'></i> "+E+" mins: "+a.name+" substituted<br/>"),e.subs+=1,a.playing=!0,a.status="subbed-on"):($("#"+e.place+"Events").append("<i class='fa fa-arrow-right' style='color:red;' aria-hidden='true'></i> "+E+" mins: "+a.name+" substituted<br/>"),e.subs+=1,a.playing=!1,a.status="subbed-off"):console.log("You have had 3 subs!")}function n(){44===E&&(w.text("That's half-time!"),F=!F,P.text("Play")),90===E?(w.text("That's full-time!"),clearInterval(I),P.text("Finish")):(E++,b.text(E))}function i(e){return Math.floor(Math.random()*e)}function o(){var e=document.getElementById("homeBar");B=M.averagePlayerValues("creativity")/(M.averagePlayerValues("creativity")+j.averagePlayerValues("creativity"))*100+(Math.random()<.5?-i(3):i(3)),e.style.width=B+"%"}function l(){return i(M.averagePlayerValues("creativity"))+M.averagePlayerValues("fitness")>=i(j.averagePlayerValues("creativity"))+j.averagePlayerValues("fitness")?[M,j]:[j,M]}function c(e){w.css("background-color",e.colors[0]),w.css("color",e.colors[1]),i(20)%4==0&&(e.increaseValues(3,"attack",["midfielder","striker"]),e.increaseValues(3,"creativity",["midfielder","striker"]),w.text(g("chance","")))}function d(e,a){var t=e.randomPlayer(),s=a.randomPlayerByPosition("defender");i(t.attack)>i(s.defence)&&(g("goal",t),k(e),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:white;' aria-hidden='true'></i> "+E+" mins: "+t.name+" scored<br/>"))}function p(e,a){var t=a.randomPlayer();i(t.discipline)+(100-E)<90&&"ejected"!==t.status&&("yellow"===t.status?(w.css("background-color","#FF0000"),w.css("color","#FFFFFF"),a.reduceValues(20,"defence",["striker","midfielder","defender","goalkeeper"]),a.reduceValues(20,"attack",["striker","midfielder","defender","goalkeeper"]),a.reduceValues(20,"creativity",["striker","midfielder","defender","goalkeeper"]),g("secondYellow",t),$("#"+a.place+"Events").append("<i class='fa fa-square event-item' style='color: red;' aria-hidden='true'></i> "+E+" mins: "+t.name+" sent off<br/>"),t.status="ejected",t.playing=!1):(w.css("background-color","yellow"),w.css("color","#000000"),g("yellow",t),t.defence-=8,$("#"+a.place+"Events").append("\n          <i class='fa fa-square event-item' style='color: yellow;' aria-hidden='true'></i> "+E+" mins: "+t.name+" booked<br/>"),t.status="yellow",t.fitness-=i(10)))}function u(e){var a=e.randomPlayer();if(i(101)%40==0)if(g("injury",a),$("#"+e.place+"Events").append("<i class='fa fa-plus' style='color: green;' aria-hidden='true'></i> "+E+" mins: "+a.name+" injured<br/>"),"away"===e.place&&A){a.playing=!a.playing,r(j,a);var t=j.randomSubstitute(a.position);t.playing=!t.playing,r(j,t)}else a.fitness=0+i(30),a.status="injured",a.playing=!1;else a.fitness-=i(15),a.defence-=i(10),a.attack-=i(10),g("nearMiss",a)}function m(e,a){var t=e.randomPlayerByPosition("midfielder"),s=a.randomPlayerByPosition("goalkeeper").defence+a.averagePlayerValues("defender");t.attack>s?(k(e),g("freekick",t),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:white;' aria-hidden='true'></i> "+E+" mins: "+t.name+" scored<br/>"),t.attack+=5):(g("wastedFreekick",t),t.creativity-=5,e.reduceValues(i(3),"attack",["striker","midfielder"]),e.reduceValues(i(3),"creativity",["striker","midfielder"]))}function y(e,a){var t=e.randomPlayerByPosition("striker"),s=a.randomPlayerByPosition("goalkeeper"),r=a.randomPlayerByPosition("defender");i(100)>25&&(r.status="yellow",$("#"+a.place+"Events").append("<i class='fa fa-square event-item' style='color: yellow;' aria-hidden='true'></i> "+E+" mins: "+r.name+" booked<br/>")),2*i(t.attack)>i(s.defence)?(k(e),g("penalty",t),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:white' aria-hidden='true'></i> "+E+" mins: "+t.name+" scores penalty<br/>"),t.attack+=5):(g("missedPenalty",t),$("#"+e.place+"Events").append("<i class='fa fa-futbol-o' style='color:red' aria-hidden='true'></i> "+E+" mins: "+t.name+" missed penalty<br/>"),s.defence+=10,t.attack-=10)}function f(e){var a=e.randomPlayer();i(a.discipline)+(100-E)<25&&(a.playing=!1,a.status="ejected",g("straightRed",a),$("#"+e.place+"Events").append("<i class='fa fa-square' style=' color: red;' aria-hidden='true'></i> "+E+" mins: "+a.name+" sent off<br/>"))}function h(e,a){if(null===M){switch($(".home-team  .team-name").text(a),a){case"Tottenham":M=spurs;break;case"Man United":M=manUnited;break;case"Liverpool":M=liverpool;break;case"Man City":M=manCity;break;case"Everton":M=everton;break;case"Chelsea":M=chelsea;break;case"Leicester":M=leicester;break;case"Arsenal":M=arsenal}M.place="home",$(".home-team-logo").attr("src","images/"+M.name+".png"),$(".home-team-logo").show(),$(".home-team, #homeBar").css("background-color",M.colors[0]),$(".home-team").css("color",M.colors[1])}else{switch($(".away-team .team-name").text(a),a){case"Tottenham":j=spurs;break;case"Man United":j=manUnited;break;case"Liverpool":j=liverpool;break;case"Man City":j=manCity;break;case"Everton":j=everton;break;case"Chelsea":j=chelsea;break;case"Leicester":j=leicester;break;case"Arsenal":j=arsenal}j.place="away",$(".away-team-logo").attr("src","images/"+j.name+".png"),$(".away-team-logo").show(),$(".logo-display span").show(),$(".away-team, .possession-bar").css("background-color",j.colors[0]),$(".away-team").css("color",j.colors[1])}}function g(e,a){var t={goal:["Goal!","He's scored!","That's a great finish!","What a goal by "+a.name,a.name+" finishes off the move!"],freekick:["It's a freekick",a.name+" to take the freekick","He lines up the freekick","This is a chance to get a cross in"],wastedFreekick:[a.name+" loses possession","That's ended up in row Z","The attack amounts to nothing",a.name+" has wasted that opportunity",a.name+"'s effort goes over the bar","He hands back possession to the other team"],yellow:["He's going in the book","Ouch! "+a.name+" will get a yellow for that","That's a booking","It's a yellow!","The ref is taking his name"],secondYellow:["He's already been booked...","That's a second yellow",a.name+" is shown a red!",a.name+" is off"],straightRed:[a.name+" is shown a straight red!",a.name+" is off","The ref has given him straight red!"],penalty:["The referee points to the spot","That's a penalty",a.name+" is fouled in the area","The ref blows his whistle. Penalty."],missedPenalty:["Saved!","It's over the bar",a.name+" has missed it!","Oh dear! "+a.name+"'s put it wide'"],injury:[a.name+"'s is going off",a.name+" is injured",a.name+" can't continue"],chance:["The ball is wasted","Possession is sloppily given away","That is wasted","The referee pulls back play","The ball goes out for a throw","Good interception!","He's robbed him of possesion","That was a wayward ball","He can't quite get on the end of that one"],nearMiss:[a.name+" is limping, but he'll be okay","That's a sore one.",a.name+" looks to be struggling","There's a nasty coming together","The referee waves play on"]},s=i(t[e].length),r=t[e][s];w.text(""+r)}function k(e){var a=null,t=null;"home"===e.place?(t=T.text(),a=parseFloat(t)+1,T.text(a)):(t=V.text(),a=parseFloat(t)+1,V.text(a))}function v(){var e=i(C.length)+1;return[C[e]]}var b=$(".changing-minutes"),w=$("#commentaryBox"),P=$(".primary-button"),T=$(".home-team .score"),V=$(".away-team .score"),x=null,E=0,F=!1,B=50,M=null,j=null,H=!1,A=!0,C=["goalkeeper","defender","midfielder","striker"],I=setInterval(function(){if(F){var e=i(100)+1;console.log(E+": "+e);var a=l(),t=_slicedToArray(a,2),s=t[0],h=t[1];if(c(s),e%17==0&&(s.increaseValues(i(3),"attack",["midfielder","striker"]),s.increaseValues(i(3),"creativity",["midfielder","striker"]),h.reduceValues(i(3),"defence",["midfielder","defender","goalkeeper"]),d(s,h)),e%(i(30)+90)==0&&(h.reduceValues(i(10),"defence",["midfielder","defender","goalkeeper"]),y(s,h)),e%90==0&&(f(h),h.reduceValues(20,"defence",["striker","midfielder","defender","goalkeeper"]),h.reduceValues(20,"attack",["striker","midfielder","defender","goalkeeper"]),h.reduceValues(20,"creativity",["striker","midfielder","defender","goalkeeper"])),e%22==0&&(s.increaseValues(5,"attack",["midfielder","striker"]),s.increaseValues(5,"creativity",["midfielder","striker"]),m(s,h)),e%18==0&&p(s,h),e%25==0&&(u(s),h.reduceValues(3,"creativity",["striker","midfielder","defender","goalkeeper"])),A&&e%10==0&&j.subs<6&&E>50){var g=v(),k=_slicedToArray(g,1),b=k[0],w=j.randomPlayerByPosition(b,"subbed-on"),$=j.randomSubstitute(b);w&&$&&(w.playing=!w.playing,r(j,w),$.playing=!$.playing,r(j,$))}var P=v();h.reduceValues(i(5),"fitness",P),console.log("Home team: "+M.averagePlayerValues("creativity")),console.log("Away team: "+j.averagePlayerValues("creativity")),o(),n()}},500);$(".team-input").on("click",function(e){var a=e.target.innerHTML;null===M?(h(M,a),$(".title-message").text("Home team selected. Chose your opponent."),$(e.target).attr("disabled",!0),$("#homeTeam").attr("disabled",!1)):(h(j,a),$(".title-message").text("Opponent selected. Edit tactics or proceed."),$(".primary-button, #awayTeam").attr("disabled",!1))}),$("#playerMode").on("click",function(){A=!A}),$(".team-panel").on("click",function(e){var a=e.target.id;s(x,a)}),P.on("click",function(){"Finish"===P.text()&&window.location.reload(),F=!F,$("#match-setup, .info-message, .team-setup, .game-logo").hide(),$("#match-engine, .away-team, .home-team, .timer, .button-bar").show(),F?(P.text("Pause"),H=!0):P.text("Play")}),$("#homeTeam").on("click",function(){e(M)}),$("#awayTeam").on("click",function(){e(j)}),$(".go-back").on("click",function(){$(".team-setup").hide(),$(".match-setup").show()}),$(".formation").on("change",function(e){var a=e.target.value;x.formation=a,t(x)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwic2hvd1RhY3RpY3NQYWdlIiwidGVhbU9iamVjdCIsInJ1biIsInJldmVhbFRlYW0iLCJ0ZWFtVGFjdGljcyIsImhpZGUiLCJzaG93Iiwic2V0dXBUYWN0aWNzIiwiJHByaW1hcnlCdXR0b24iLCJodG1sIiwidmFsIiwiZm9ybWF0aW9uIiwiYSIsImIiLCJwb3NpdGlvbnMiLCJpbmRleE9mIiwicG9zaXRpb24iLCJpIiwicGxheWVycyIsImxlbmd0aCIsInBsYXllciIsInBsYXlpbmciLCJhcHBlbmQiLCJzdGF0dXMiLCJuYW1lIiwic3RhcnRpbmdFbGV2ZW4iLCJhdHRhY2siLCJkZWZlbmNlIiwiY3JlYXRpdml0eSIsImZpdG5lc3MiLCJjb25jYXQiLCJwb3NpdGlvbk51bWJlciIsInNwbGl0IiwicGxheWVyTnVtYmVyIiwibWFwIiwiYXJyYXlJdGVtIiwiaXRlcmF0aW9ucyIsIndhcm5pbmdNZXNzYWdlIiwiY2hvc2VuUG9zaXRpb24iLCJlcnIiLCIkc2VsZWN0ZWRQbGF5ZXIiLCJjaG9vc2VQbGF5ZXJzIiwic2VsZWN0ZWRQbGF5ZXIiLCJzdWJzdGl0dXRlIiwiZ2FtZVN0YXJ0ZWQiLCJjc3MiLCJiYWNrZ3JvdW5kIiwicGxheWVyT24iLCJwYXJlbnQiLCJwb2ludGVyLWV2ZW50cyIsInBsYXllck9mZiIsInBsYWNlIiwibWF0Y2hUaW1lIiwic3VicyIsImNvbnNvbGUiLCJ0aW1lQ29udHJvbCIsIiRjb21tZW50YXJ5Qm94IiwidGltZXJJRCIsImNsZWFySW50ZXJ2YWwiLCJ0ZXh0IiwiZ2VuUmFuZG9tVmFsdWUiLCJNYXRoIiwiJG1hdGNoVGltZSIsInZhbHVlIiwid2lkdGgiLCJob21lVGVhbSIsImF2ZXJhZ2VQbGF5ZXJWYWx1ZXMiLCJtb3ZlIiwiaG9tZUJhciIsInNlbGVjdFRlYW0iLCJnZXRFbGVtZW50QnlJZCIsImhvbWVSYW5kb20iLCJyYW5kb20iLCJzdHlsZSIsImF0dGFja2luZ1RlYW0iLCJhd2F5VGVhbSIsImluY3JlYXNlVmFsdWVzIiwic2V0dXBFdmVudCIsImNvbG9ycyIsImdvYWxDaGFuY2UiLCJkZWZlbmRpbmdUZWFtIiwiYXR0YWNraW5nUGxheWVyIiwicmFuZG9tUGxheWVyIiwiZGVmZW5kaW5nUGxheWVyIiwicmFuZG9tUGxheWVyQnlQb3NpdGlvbiIsImhhbmRsZURpc2NpcGxpbmUiLCJnZW5lcmF0ZUNvbW1lbnRhcnkiLCJ1cGRhdGVTY29yZSIsInJlZHVjZVZhbHVlcyIsImRpc2NpcGxpbmUiLCJhZGRQbGF5ZXIiLCJyYW5kb21TdWJzdGl0dXRlIiwiZGVmZW5kaW5nVmFsdWUiLCJoYW5kbGVGcmVla2ljayIsImJvb2tlZFBsYXllciIsInRlYW0iLCJzZWxlY3RvciIsInN0cmFpZ2h0UmVkIiwic3B1cnMiLCJsaXZlcnBvb2wiLCJjb25maWdUZWFtIiwibWFuVW5pdGVkIiwibWFuQ2l0eSIsImV2ZXJ0b24iLCJjaGVsc2VhIiwibGVpY2VzdGVyIiwiYXJzZW5hbCIsImNvbW1lbnRhcnkiLCJnb2FsIiwiZnJlZWtpY2siLCJ3YXN0ZWRGcmVla2ljayIsInllbGxvdyIsInBlbmFsdHkiLCJtaXNzZWRQZW5hbHR5IiwiYXR0ciIsImluanVyeSIsImNoYW5jZSIsIm5lYXJNaXNzIiwic2NlbmFyaW8iLCJnZXRTY29yZSIsIiRob21lU2NvcmUiLCJzY29yZSIsInBhcnNlRmxvYXQiLCIkYXdheVNjb3JlIiwicmFuZG9tSW5kZXgiLCJtZXNzYWdlIiwicmFuZG9tUG9zaXRpb24iLCJjcHVNb2RlIiwic2V0SW50ZXJ2YWwiLCJldmVudFZhbHVlIiwibG9nIiwiaGFuZGxlSW5qdXJ5IiwiX3JhbmRvbVBvc2l0aW9uIiwiX3JhbmRvbVBvc2l0aW9uMiIsIl9zbGljZWRUb0FycmF5IiwicmVtb3ZlUGxheWVyIiwicG9zaXRpb25Gb3JGaXRuZXNzUmVkdWN0aW9uIiwib24iLCJlIiwidXNlclRlYW0iLCJ0YXJnZXQiLCJpbm5lckhUTUwiLCJpZCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2Fk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Y0FBQUEsR0FBZ0IyRSxTQUFoQixTQUFBK0QsR0FERixHQUFBUSxHQUFBUixFQUFBRSxPQUFBN0UsS0FXRTNELEdBQVlPLFVBQVl1SSxFQVB4Qi9JLEVBQUZDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBjb25zdCAkbWF0Y2hUaW1lID0gJCgnLmNoYW5naW5nLW1pbnV0ZXMnKTtcbiAgY29uc3QgJGNvbW1lbnRhcnlCb3ggPSAkKCcjY29tbWVudGFyeUJveCcpO1xuICBjb25zdCAkcHJpbWFyeUJ1dHRvbiA9ICQoJy5wcmltYXJ5LWJ1dHRvbicpO1xuICBjb25zdCAkaG9tZVNjb3JlID0gJCgnLmhvbWUtdGVhbSAuc2NvcmUnKTtcbiAgY29uc3QgJGF3YXlTY29yZSA9ICQoJy5hd2F5LXRlYW0gLnNjb3JlJyk7XG5cbiAgbGV0IHRlYW1UYWN0aWNzID0gbnVsbDtcbiAgbGV0IG1hdGNoVGltZSA9IDA7XG4gIGxldCBydW4gPSBmYWxzZTtcbiAgbGV0IHdpZHRoID0gNTA7XG4gIGxldCBob21lVGVhbSA9IG51bGw7XG4gIGxldCBhd2F5VGVhbSA9IG51bGw7XG4gIGxldCBnYW1lU3RhcnRlZCA9IGZhbHNlO1xuICBsZXQgY3B1TW9kZSA9IHRydWU7XG4gIGNvbnN0IHBvc2l0aW9ucyA9IFsnZ29hbGtlZXBlcicsICdkZWZlbmRlcicsICdtaWRmaWVsZGVyJywgJ3N0cmlrZXInXTtcblxuICAvLyBNQVRDSCBMT0dJQ1xuICBjb25zdCB0aW1lcklEID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJ1bikge1xuICAgICAgY29uc3QgZXZlbnRWYWx1ZSA9IGdlblJhbmRvbVZhbHVlKDEwMCkgKyAxO1xuICAgICAgY29uc29sZS5sb2coYCR7bWF0Y2hUaW1lfTogJHtldmVudFZhbHVlfWApO1xuXG4gICAgICAvLyBSYW5kb20oQXZlcmFnZSBUZWFtIENyZWF0aXZpdHkpICsgRml0bmVzcyA9PiBIaWdoZXIgc2NvcmUgZGV0ZXJtaW5lcyB0aGUgYXR0YWNraW5nIHRlYW1cbiAgICAgIGNvbnN0IFthdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtXSA9IHNlbGVjdFRlYW0oKTtcblxuICAgICAgLy8gU3R5bGUgY29tbWVudGFyeUJveCBpbiBhdHRhY2tpbmcgdGVhbSBjb2xvcnMsIGluY3JlYXNlIHBsYXllcnMgYXR0YWNraW5nIGFuZCBjcmVhdGl2aXR5IHZhbHVlc1xuICAgICAgc2V0dXBFdmVudChhdHRhY2tpbmdUZWFtKTtcblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAxNyA9PT0gMCkge1xuICAgICAgICAvLyBSYW5kb20gKFN0cmlrZXIsIE1pZGZpZWxkZXIpIHZzLiBHb2Fsa2VlcGVyID4gUmFuZFRoZWlyQXR0YWNrIHZzLiBSYW5kR29hbGtlZXBlclxuICAgICAgICBhdHRhY2tpbmdUZWFtLmluY3JlYXNlVmFsdWVzKGdlblJhbmRvbVZhbHVlKDMpLCdhdHRhY2snLFsnbWlkZmllbGRlcicsICdzdHJpa2VyJ10pO1xuICAgICAgICBhdHRhY2tpbmdUZWFtLmluY3JlYXNlVmFsdWVzKGdlblJhbmRvbVZhbHVlKDMpLCdjcmVhdGl2aXR5JyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoZ2VuUmFuZG9tVmFsdWUoMyksJ2RlZmVuY2UnLFsnbWlkZmllbGRlcicsICdkZWZlbmRlcicsICdnb2Fsa2VlcGVyJ10pO1xuICAgICAgICBnb2FsQ2hhbmNlKGF0dGFja2luZ1RlYW0sIGRlZmVuZGluZ1RlYW0pO1xuXG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudFZhbHVlICUgKGdlblJhbmRvbVZhbHVlKDMwKSArIDkwKSA9PT0gMCkge1xuICAgICAgICAvLyBTdHJpa2VyIHZzLiBHb2Fsa2VlcGVyID4gUmFuZFRoZWlyQXR0YWNrIHZzLiBSYW5kR29hbGtlZXBlclBlbmFsdHlcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoZ2VuUmFuZG9tVmFsdWUoMTApLCdkZWZlbmNlJyxbJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgICAgaGFuZGxlUGVuYWx0eShhdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSA5MCA9PT0gMCkge1xuICAgICAgICAvLyBSYW5kb20gUGxheWVyID0+IERpc2NpcGxpbmUgPiByYW5kb21cbiAgICAgICAgc3RyYWlnaHRSZWQoZGVmZW5kaW5nVGVhbSk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKDIwLCdkZWZlbmNlJyxbJ3N0cmlrZXInLCdtaWRmaWVsZGVyJywgJ2RlZmVuZGVyJywgJ2dvYWxrZWVwZXInXSk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKDIwLCdhdHRhY2snLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoMjAsJ2NyZWF0aXZpdHknLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgIH1cbiAgICAgIC8vXG4gICAgICBpZiAoZXZlbnRWYWx1ZSAlIDIyID09PSAwKSB7XG4gICAgICAgIC8vIFN0cmlrZXIgdnMuIEdvYWxrZWVwZXIgPiBSYW5kVGhlaXJGcmVla2ljayB2cy4gUmFuZEdvYWxrZWVwZXJQZW5hbHR5XG4gICAgICAgIGF0dGFja2luZ1RlYW0uaW5jcmVhc2VWYWx1ZXMoNSwnYXR0YWNrJyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgICAgYXR0YWNraW5nVGVhbS5pbmNyZWFzZVZhbHVlcyg1LCdjcmVhdGl2aXR5JyxbJ21pZGZpZWxkZXInLCAnc3RyaWtlciddKTtcbiAgICAgICAgaGFuZGxlRnJlZWtpY2soYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbSk7XG5cbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAxOCA9PT0gMCkge1xuICAgICAgICAvLyBSYW5kb21QbGF5ZXIgPT4gZGlzY2lwbGluZSArIG1hdGNodGltZSByYW5kIHZzLiByYW5kb21cbiAgICAgICAgaGFuZGxlRGlzY2lwbGluZShhdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50VmFsdWUgJSAyNSA9PT0gMCkge1xuICAgICAgICBoYW5kbGVJbmp1cnkoYXR0YWNraW5nVGVhbSk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKDMsJ2NyZWF0aXZpdHknLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgcGxheWluZyBDUFUgbW9kZSwgYXV0byBnZW5lcmF0ZSBzdWJzdGl0dWl0b25zXG4gICAgICBpZihjcHVNb2RlKSB7XG4gICAgICAgIGlmIChldmVudFZhbHVlICUgMTAgPT09IDAgJiYgYXdheVRlYW0uc3VicyA8IDYgJiYgbWF0Y2hUaW1lID4gNTApIHtcbiAgICAgICAgICBjb25zdCBbY2hvc2VuUG9zaXRpb25dID0gcmFuZG9tUG9zaXRpb24oKTtcbiAgICAgICAgICBjb25zdCByZW1vdmVQbGF5ZXIgPSBhd2F5VGVhbS5yYW5kb21QbGF5ZXJCeVBvc2l0aW9uKGNob3NlblBvc2l0aW9uLCAnc3ViYmVkLW9uJyk7XG4gICAgICAgICAgY29uc3QgYWRkUGxheWVyID0gYXdheVRlYW0ucmFuZG9tU3Vic3RpdHV0ZShjaG9zZW5Qb3NpdGlvbik7XG5cbiAgICAgICAgICAvLyBDaGVja2VkIHRoYXQgdGhlcmUgaXMgYSBwbGF5ZXIgaW4gdGhhdCBwb3NpdGlvbiBhdmFpbGFibGUgdG8gY29tZSBvbi4gSWYgbm90LCBkb24ndCBydW4gdGhlIHN1YnN0aXR1dGlvblxuICAgICAgICAgIGlmIChyZW1vdmVQbGF5ZXIgJiYgYWRkUGxheWVyKSB7XG4gICAgICAgICAgICByZW1vdmVQbGF5ZXIucGxheWluZyA9ICFyZW1vdmVQbGF5ZXIucGxheWluZztcbiAgICAgICAgICAgIHN1YnN0aXR1dGUoYXdheVRlYW0sIHJlbW92ZVBsYXllcik7XG4gICAgICAgICAgICBhZGRQbGF5ZXIucGxheWluZyA9ICFhZGRQbGF5ZXIucGxheWluZztcbiAgICAgICAgICAgIHN1YnN0aXR1dGUoYXdheVRlYW0sIGFkZFBsYXllcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZSBmaXRuZXNzIG9mIHBsYXllcnMgaW4gYSByYW5kb20gcG9zaXRpb25cbiAgICAgIGNvbnN0IHBvc2l0aW9uRm9yRml0bmVzc1JlZHVjdGlvbiA9IHJhbmRvbVBvc2l0aW9uKCk7XG4gICAgICBkZWZlbmRpbmdUZWFtLnJlZHVjZVZhbHVlcyhnZW5SYW5kb21WYWx1ZSg1KSwnZml0bmVzcycscG9zaXRpb25Gb3JGaXRuZXNzUmVkdWN0aW9uKTtcblxuICAgICAgLy8gTW92ZSB0aGUgcG9zc2Vzc2lvbiBiYXJcbiAgICAgIGNvbnNvbGUubG9nKGBIb21lIHRlYW06ICR7aG9tZVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpfWApO1xuICAgICAgY29uc29sZS5sb2coYEF3YXkgdGVhbTogJHthd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdjcmVhdGl2aXR5Jyl9YCk7XG4gICAgICBtb3ZlKCk7XG4gICAgICAvLyBVcGRhdGUgdGhlIHRpbWVyXG4gICAgICB0aW1lQ29udHJvbCgpO1xuICAgIH1cblxuICB9LDUwMCk7XG5cbiAgLy8gRXZlbnQgTGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUZWFtIHNlbGVjdGlvblxuICAkKCcudGVhbS1pbnB1dCcpLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgLy8gUkVGQUNUT1I6IG1ha2Ugc2VsZWN0b3JzIGluICR2YXJpYWJsZXMsIHR1cm4gY2xpY2sgaW50byBuYW1lZCBmdW5jdGlvblxuICAgIGNvbnN0IHVzZXJUZWFtID0gZS50YXJnZXQuaW5uZXJIVE1MO1xuICAgIGlmIChob21lVGVhbSA9PT0gbnVsbCkge1xuICAgICAgY29uZmlnVGVhbShob21lVGVhbSwgdXNlclRlYW0pO1xuICAgICAgJCgnLnRpdGxlLW1lc3NhZ2UnKS50ZXh0KCdIb21lIHRlYW0gc2VsZWN0ZWQuIENob3NlIHlvdXIgb3Bwb25lbnQuJyk7XG4gICAgICAkKGUudGFyZ2V0KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgJCgnI2hvbWVUZWFtJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZ1RlYW0oYXdheVRlYW0sIHVzZXJUZWFtKTtcbiAgICAgICQoJy50aXRsZS1tZXNzYWdlJykudGV4dCgnT3Bwb25lbnQgc2VsZWN0ZWQuIEVkaXQgdGFjdGljcyBvciBwcm9jZWVkLicpO1xuICAgICAgJCgnLnByaW1hcnktYnV0dG9uLCAjYXdheVRlYW0nKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFRvZ2dsZSBjb21wdXRlciBtb2RlIChwbGF5aW5nIGFnYWluc3QgdGhlIGNvbXB1dGVyKVxuICAkKCcjcGxheWVyTW9kZScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjcHVNb2RlID0gIWNwdU1vZGU7XG4gIH0pO1xuXG5cbiAgLy8gVG9nZ2xlIHllcy9ubyBwbGF5aW5nXG4gICQoJy50ZWFtLXBhbmVsJykub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllciA9IGUudGFyZ2V0LmlkO1xuICAgIGNob29zZVBsYXllcnModGVhbVRhY3RpY3MsIHNlbGVjdGVkUGxheWVyKTtcbiAgfSk7XG5cbiAgJHByaW1hcnlCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuXG4gICAgaWYgKCRwcmltYXJ5QnV0dG9uLnRleHQoKSA9PT0gJ0ZpbmlzaCcpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gICAgcnVuID0gIXJ1bjtcbiAgICAkKCcjbWF0Y2gtc2V0dXAsIC5pbmZvLW1lc3NhZ2UsIC50ZWFtLXNldHVwLCAuZ2FtZS1sb2dvJykuaGlkZSgpO1xuICAgICQoJyNtYXRjaC1lbmdpbmUsIC5hd2F5LXRlYW0sIC5ob21lLXRlYW0sIC50aW1lciwgLmJ1dHRvbi1iYXInKS5zaG93KCk7XG4gICAgaWYgKHJ1bikge1xuICAgICAgJHByaW1hcnlCdXR0b24udGV4dCgnUGF1c2UnKTtcbiAgICAgIGdhbWVTdGFydGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHByaW1hcnlCdXR0b24udGV4dCgnUGxheScpO1xuICAgIH1cblxuICB9KTtcblxuICAkKCcjaG9tZVRlYW0nKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgc2hvd1RhY3RpY3NQYWdlKGhvbWVUZWFtKTtcbiAgfSk7XG5cbiAgJCgnI2F3YXlUZWFtJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHNob3dUYWN0aWNzUGFnZShhd2F5VGVhbSk7XG4gIH0pO1xuXG4gICQoJy5nby1iYWNrJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICQoJy50ZWFtLXNldHVwJykuaGlkZSgpO1xuICAgICQoJy5tYXRjaC1zZXR1cCcpLnNob3coKTtcbiAgfSk7XG5cbiAgJCgnLmZvcm1hdGlvbicpLm9uKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgIGNvbnN0IG5ld0Zvcm1hdGlvbiA9IGUudGFyZ2V0LnZhbHVlO1xuICAgIHRlYW1UYWN0aWNzLmZvcm1hdGlvbiA9IG5ld0Zvcm1hdGlvbjtcbiAgICByZXZlYWxUZWFtKHRlYW1UYWN0aWNzKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gc2hvd1RhY3RpY3NQYWdlKHRlYW1PYmplY3QpIHtcbiAgICBpZiAocnVuKSB7XG4gICAgICBydW4gPSAhcnVuO1xuICAgIH1cblxuICAgICRwcmltYXJ5QnV0dG9uLnRleHQoJ1BsYXknKTtcbiAgICAkKCcubWF0Y2gtc2V0dXAsIC5tYXRjaC1lbmdpbmUnKS5oaWRlKCk7XG4gICAgJCgnLnRlYW0tc2V0dXAnKS5zaG93KCk7XG4gICAgc2V0dXBUYWN0aWNzKHRlYW1PYmplY3QpO1xuICAgIHRlYW1UYWN0aWNzID0gdGVhbU9iamVjdDtcbiAgICByZXZlYWxUZWFtKHRlYW1UYWN0aWNzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldHVwVGFjdGljcyh0ZWFtT2JqZWN0KSB7XG4gICAgJCgnLnRlYW0tcGFuZWwnKS5odG1sKCcnKTtcbiAgICAkKCcuZm9ybWF0aW9uJykudmFsKHRlYW1PYmplY3QuZm9ybWF0aW9uKTtcblxuICAgIC8vIFNvcnRzIHBsYXllcnMgaW4gb3JkZXIgb2YgcG9zaXRpb24gW0dLLCBEZWYsIE1pZCwgQXR0XVxuICAgIHRlYW1PYmplY3QucGxheWVycy5zb3J0KGZ1bmN0aW9uKGEsYil7XG4gICAgICByZXR1cm4gcG9zaXRpb25zLmluZGV4T2YoYS5wb3NpdGlvbikgPCBwb3NpdGlvbnMuaW5kZXhPZihiLnBvc2l0aW9uKSA/IC0xIDogMTtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVhbU9iamVjdC5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSB0ZWFtT2JqZWN0LnBsYXllcnNbaV07XG5cbiAgICAgIC8vIElmIHN0YXJ0IGdpdmUgYW4gSFRNTCB0aWNrLCBlbHNlIGdpdmUgYW4gSFRNTCBjcm9zc1xuICAgICAgY29uc3Qgc3RhcnRpbmdFbGV2ZW4gPSBwbGF5ZXIucGxheWluZyA/ICcmIzEwMDA0OycgOiAnJiMxMDAwNzsnO1xuXG4gICAgICAvLyBCdWlsZCB0YWJsZSBvZiBzcXVhZCBwbGF5ZXJzIC0gaW5zZXJ0IHJlbGV2YW50IGNsYXNzIHRvIHJlZmxlY3QgcGxheWVyIHN0YXR1cywgZS5nLiBzZW50IG9mZiwgeWVsbG93LCBpbmp1cmVkLCBzdWJzdGl0dXRlZFxuICAgICAgJCgnLnRlYW0tcGFuZWwnKS5hcHBlbmQoXG4gICAgICAgIGA8cCBjbGFzcz1cInBsYXllci1saW5lICR7cGxheWVyLnBvc2l0aW9ufSAke3BsYXllci5zdGF0dXN9XCIgaWQ9JyR7cGxheWVyLm5hbWV9Jz5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXJ0aW5nICR7cGxheWVyLnN0YXR1c31cIiBpZD1cIiR7aX1cIj4ke3N0YXJ0aW5nRWxldmVufTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1wb3NpdGlvbiBcIj4ke3BsYXllci5wb3NpdGlvbn08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItbmFtZVwiPiR7cGxheWVyLm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIiBkYXRhLXNvcnQ9XCIke3BsYXllci5hdHRhY2t9XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMTI4LDAsJHtwbGF5ZXIuYXR0YWNrLzEwMH0pXCI+JHtwbGF5ZXIuYXR0YWNrfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMTI4LDAsJHtwbGF5ZXIuZGVmZW5jZS8xMDB9KVwiPiR7cGxheWVyLmRlZmVuY2V9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicGxheWVyLXN0YXRcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwxMjgsMCwke3BsYXllci5jcmVhdGl2aXR5LzEwMH1cIik+JHtwbGF5ZXIuY3JlYXRpdml0eX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbGF5ZXItc3RhdFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDEyOCwwLCR7cGxheWVyLmRlZmVuY2UvMTAwfSlcIj4ke3BsYXllci5kZWZlbmNlfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInBsYXllci1zdGF0XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMTI4LDAsJHtwbGF5ZXIuZml0bmVzcy8xMDB9KVwiPiR7cGxheWVyLmZpdG5lc3N9PC9zcGFuPlxuICAgICAgICA8L3A+YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXZlYWxUZWFtKHRlYW1PYmplY3QpIHtcbiAgICAkKCcudGVhbS1kaXNwbGF5JykuaHRtbCgnJyk7XG5cbiAgICAvLyBTcGxpdCBmb3JtYXRpb24gaW50byBhbiBhcnJheVxuICAgIGNvbnN0IGZvcm1hdGlvbiA9IFsnMSddLmNvbmNhdCh0ZWFtT2JqZWN0LmZvcm1hdGlvbi5zcGxpdCgnLScpKTtcblxuICAgIGxldCBwbGF5ZXJOdW1iZXIgPSAwO1xuICAgIGxldCBwb3NpdGlvbk51bWJlciA9IDA7XG5cbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IHRvIG1hcCB0aHJvdWdoIHRoZSBmb3JtYXRpb24gYXJyYXksIGUuZy4gWzEsNCwyLDJdIChpbmNsdXNpdmUgb2YgZ29hbGtlZXBlcilcbiAgICAgIGZvcm1hdGlvbi5tYXAoKGFycmF5SXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gcGFyc2VGbG9hdChhcnJheUl0ZW0pO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwbGF5ZXJzIHdoaWxlIGkgKGluaXRpYWxseSAwKSBpcyBsZXNzIHRoYW4gdGhlIG51bWJlciBvZiBwb3NpdGlvbnMgcmVxdWlyZWRcbiAgICAgICAgd2hpbGUgKGkgPCBpdGVyYXRpb25zKSB7XG4gICAgICAgICAgLy8gSWYgcGxheWVyLnBsYXlpbmcgPT09IHRydWUgT1IgaWYgcGxheWVyLnN0YXR1cyBpcyAnZWplY3RlZCcgKHNlbnQgb2ZmKS4gUGxheWVycyB3aXRoIHJlZCBjYXJkcyBjb250aW51ZSB0byBiZSBhZGRlZCB0byB0aGUgdGVhbSBzaGVldCwgc28gdGhhdCB0aGV5IGNhbm5vdCBiZSByZW1vdmVkL3JlcGxhY2VkLiBBIGNsYXNzIG9mIC5yZWQgaXMgYWRkZWQsIHdoaWNoIGRpYWJsZWRzIHRoZSBhYmlsaXR5IHRvIHN1YnN0aXR1dGUgdGhlbS4gUGxheWVycyB3aXRoIGEgc3RhdHVzIG9mICdlamVjdGVkJyBoYXZlIGEgLnBsYXlpbmcgdmFsdWUgb2YgZmFsc2UgLSB0aGV5IG5vIGxvbmdlciBpbmZsdWVuY2UgZXZlbnRzLlxuICAgICAgICAgIGlmICh0ZWFtT2JqZWN0LnBsYXllcnNbcGxheWVyTnVtYmVyXS5wbGF5aW5nIHx8IHRlYW1PYmplY3QucGxheWVyc1twbGF5ZXJOdW1iZXJdLnN0YXR1cyA9PT0gJ2VqZWN0ZWQnKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHBsYXllciBoYXMgYmVlbiBwbGFjZWQgb3V0IG9mIHBvc2l0aW9uIGFkZCBhIHdhcm5pbmcgY2xhc3NcbiAgICAgICAgICAgIGNvbnN0IHdhcm5pbmdNZXNzYWdlID0gcG9zaXRpb25zW3Bvc2l0aW9uTnVtYmVyXSAhPT0gdGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0ucG9zaXRpb24gPyAnd2FybmluZycgOiAnJztcblxuICAgICAgICAgICAgLy8gQXBwZW5kIHBsYXllciBvbiB0byB0aGUgcGl0Y2ggbWFwIHdpdGggY2xhc3NlcyB0aGF0IGluZGljYXRlIHRoZSBwbGF5ZXIncyBzdGF0dXMsZS5nLiByZWQgY2FyZCwgeWVsbG93IGNhcmQgb3Igb3V0IG9mIHBvc2lpdG9uXG4gICAgICAgICAgICAkKCcudGVhbS1kaXNwbGF5JykuYXBwZW5kKFxuICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9J3BsYXllci1ibG9jayAke3dhcm5pbmdNZXNzYWdlfSAkeyh0ZWFtT2JqZWN0LnBsYXllcnNbcGxheWVyTnVtYmVyXS5zdGF0dXMpfSc+JHt0ZWFtT2JqZWN0LnBsYXllcnNbcGxheWVyTnVtYmVyXS5uYW1lfTwvc3Bhbj5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGVhbU9iamVjdC5wbGF5ZXJzW3BsYXllck51bWJlcl0uY2hvc2VuUG9zaXRpb24gPSBwb3NpdGlvbnNbcG9zaXRpb25OdW1iZXJdO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwbGF5ZXJOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICAkKCcudGVhbS1kaXNwbGF5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic2VwZXJhdGUtcGxheWVyc1wiPicpO1xuICAgICAgICBwb3NpdGlvbk51bWJlcisrO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgIC8vIFRocm93cyBhbiBlcnJvciB3aGVuIGZld2VyIHRoYW4gMTEgcGxheWVycyBhcmUgc2VsZWN0ZWQuIEl0IGRpc3BsYXlzIGEgd2FybmluZy4gRG8gbm90IHdhbnQgdG8gcHJldmVudCBzZWxlY3Rpb25zIGFzIHRoZXJlIGFyZSBsZWdpdG1hdGUgcmVhc29ucyB3aHkgZmV3ZXIgdGhhbiAxMSBwbGF5ZXJzIG1heSBiZSBzZWxlY3RlZCwgZS5nLiByZWQgY2FyZHMgb3IgaW5qdXJpZXNcbiAgICAgICQoJy50ZWFtLWRpc3BsYXknKS5hcHBlbmQoYDxwIGNsYXNzPSd0ZWFtLXNlbGVjdGlvbi13YXJuaW5nIHNlcGVyYXRlLXBsYXllcnMnPkxlc3MgdGhhbiAxMSBwbGF5ZXJzIHNlbGVjdGVkITwvcD5gKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaG9vc2VQbGF5ZXJzKHRlYW1PYmplY3QsIHNlbGVjdGVkUGxheWVyKSB7XG4gICAgY29uc3QgJHNlbGVjdGVkUGxheWVyID0gJChgIyR7c2VsZWN0ZWRQbGF5ZXJ9YCk7XG5cbiAgICAvLyBUb2dnbGUgc2VsZWN0ZWQgcGxheWVycyBwbGF5aW5nIHN0YXR1cyAodHJ1ZS9mYWxzZSlcbiAgICB0ZWFtT2JqZWN0LnBsYXllcnNbc2VsZWN0ZWRQbGF5ZXJdLnBsYXlpbmcgPSAhdGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXS5wbGF5aW5nO1xuXG4gICAgcmV2ZWFsVGVhbSh0ZWFtVGFjdGljcyk7XG5cbiAgICBpZiAodGVhbU9iamVjdC5wbGF5ZXJzW3NlbGVjdGVkUGxheWVyXS5wbGF5aW5nKSB7XG4gICAgICAkc2VsZWN0ZWRQbGF5ZXIuaHRtbCgnJiMxMDAwNDsnKTtcbiAgICAgIGlmIChnYW1lU3RhcnRlZCkge1xuICAgICAgICAkc2VsZWN0ZWRQbGF5ZXIucGFyZW50KCkuY3NzKHsnYmFja2dyb3VuZCc6ICdncmVlbid9KTtcbiAgICAgICAgY29uc3QgcGxheWVyT24gPSB0ZWFtT2JqZWN0LnBsYXllcnNbc2VsZWN0ZWRQbGF5ZXJdO1xuICAgICAgICBzdWJzdGl0dXRlKHRlYW1PYmplY3QsIHBsYXllck9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgJHNlbGVjdGVkUGxheWVyLmh0bWwoJyYjMTAwMDc7Jyk7XG4gICAgICBpZiAoZ2FtZVN0YXJ0ZWQpIHtcbiAgICAgICAgJHNlbGVjdGVkUGxheWVyLnBhcmVudCgpLmNzcyh7J3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLCAnYmFja2dyb3VuZCc6ICdyZWQnfSk7XG4gICAgICAgIGNvbnN0IHBsYXllck9mZiA9IHRlYW1PYmplY3QucGxheWVyc1tzZWxlY3RlZFBsYXllcl07XG4gICAgICAgIHN1YnN0aXR1dGUodGVhbU9iamVjdCwgcGxheWVyT2ZmKTtcblxuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gc3Vic3RpdHV0ZSh0ZWFtT2JqZWN0LCBwbGF5ZXIpIHtcbiAgICBpZiAodGVhbU9iamVjdC5zdWJzIDwgNykge1xuICAgICAgaWYgKCFwbGF5ZXIucGxheWluZykge1xuICAgICAgICAkKGAjJHt0ZWFtT2JqZWN0LnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLWFycm93LXJpZ2h0JyBzdHlsZT0nY29sb3I6cmVkOycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7cGxheWVyLm5hbWV9IHN1YnN0aXR1dGVkPGJyLz5gKTtcbiAgICAgICAgdGVhbU9iamVjdC5zdWJzICs9IDE7XG4gICAgICAgIHBsYXllci5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHBsYXllci5zdGF0dXMgPSAnc3ViYmVkLW9mZic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGAjJHt0ZWFtT2JqZWN0LnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLWFycm93LXJpZ2h0JyBzdHlsZT0nY29sb3I6Z3JlZW47JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtwbGF5ZXIubmFtZX0gc3Vic3RpdHV0ZWQ8YnIvPmApO1xuICAgICAgICB0ZWFtT2JqZWN0LnN1YnMgKz0gMTtcbiAgICAgICAgcGxheWVyLnBsYXlpbmcgPSB0cnVlO1xuICAgICAgICBwbGF5ZXIuc3RhdHVzID0gJ3N1YmJlZC1vbic7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdZb3UgaGF2ZSBoYWQgMyBzdWJzIScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuXG4gIGZ1bmN0aW9uIHRpbWVDb250cm9sKCkge1xuICAgIGlmKG1hdGNoVGltZSA9PT0gNDQpIHtcbiAgICAgICRjb21tZW50YXJ5Qm94LnRleHQoYFRoYXQncyBoYWxmLXRpbWUhYCk7XG4gICAgICBydW4gPSAhcnVuO1xuICAgICAgJHByaW1hcnlCdXR0b24udGV4dCgnUGxheScpO1xuICAgIH1cblxuICAgIGlmKG1hdGNoVGltZSA9PT0gOTApIHtcbiAgICAgICRjb21tZW50YXJ5Qm94LnRleHQoYFRoYXQncyBmdWxsLXRpbWUhYCk7XG4gICAgICBjbGVhckludGVydmFsKHRpbWVySUQpO1xuICAgICAgJHByaW1hcnlCdXR0b24udGV4dCgnRmluaXNoJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdGNoVGltZSsrO1xuICAgICAgJG1hdGNoVGltZS50ZXh0KG1hdGNoVGltZSk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBnZW5SYW5kb21WYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsdWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmUoKSB7XG5cbiAgICBjb25zdCBob21lQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbWVCYXInKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgdHdvIHRlYW1zIGNyZWF0aXZpdHkgc2NvcmVzIGFuZCBjb3ZlcnQgdGhlbSBpbnRvIGEgcGVyY2VudGFnZSBvdXQgb2YgMTAwIC0gdGhpcyBpcyBmb3IgdGhlIHBvc3Nlc3Npb24gYmFyLlxuICAgIC8vIEl0ICsvLSBhIHNtYWxsIGxvdyBsZXZlbCBpbnRlZ2VyIHRvIGtlZXAgaXQgbW92aW5nIGNvbnRpbm91c2x5XG4gICAgd2lkdGggPSAoaG9tZVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpIC8gKGhvbWVUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSArIGF3YXlUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSkgKiAxMDApICsgKE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtZ2VuUmFuZG9tVmFsdWUoMykgOiBnZW5SYW5kb21WYWx1ZSgzKSk7XG5cbiAgICBob21lQmFyLnN0eWxlLndpZHRoID0gd2lkdGggKyAnJSc7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3RUZWFtKCkge1xuICAgIC8vIEdlbmVyYXRlIGEgcmFuZG9tIHZhbHVlcyBmcm9tIGhvbWUgYW5kIGF3YXkgdGVhbSB1c2luZyB0aGVpciBhdmVyYWdlIGNyZWF0aXZpdHkgc2NvcmVzIGZyb20gcGxheWVycyBvbiB0aGUgcGl0Y2hcbiAgICAvLyBUaGUgaGlnaGVyIGEgdGVhbXMgY3JlYXRpdml0eSBzY29yZSwgdGhlIG1vcmUgY2hhbmNlcyB0aGV5IHdpbGwgY3JlYXRlXG4gICAgLy8gMjQuMDUuMjAxNyAtIGFkZGVkIGEgRml0bmVzcyB2YWx1ZSBmb3IgZXZlcnkgcGxheWVyLCB3aGljaCBkZWNyZWFzZXMgdGhyb3VnaCB0aGUgZ2FtZS4gVGhpcyBpcyBub3cgYWRkZWQgdG8gdGhlIHJhbmRvbSBjcmVhdGl2aXR5IHNjb3JlIHRvIGRldGVybWluZSwgd2hpY2ggdGVhbSBob21lL2F3YXkgZ2V0cyB0aGUgY2hhbmNlLlxuICAgIGNvbnN0IGhvbWVSYW5kb20gPSAgZ2VuUmFuZG9tVmFsdWUoaG9tZVRlYW0uYXZlcmFnZVBsYXllclZhbHVlcygnY3JlYXRpdml0eScpKSArIGhvbWVUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2ZpdG5lc3MnKTtcbiAgICBjb25zdCBhd2F5UmFuZG9tID0gIGdlblJhbmRvbVZhbHVlKGF3YXlUZWFtLmF2ZXJhZ2VQbGF5ZXJWYWx1ZXMoJ2NyZWF0aXZpdHknKSkgKyBhd2F5VGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdmaXRuZXNzJyk7XG5cbiAgICBpZiAoaG9tZVJhbmRvbSA+PSBhd2F5UmFuZG9tKSB7XG4gICAgICByZXR1cm4gW2hvbWVUZWFtLCBhd2F5VGVhbV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbYXdheVRlYW0sIGhvbWVUZWFtXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cEV2ZW50KGF0dGFja2luZ1RlYW0pIHtcbiAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBhdHRhY2tpbmdUZWFtLmNvbG9yc1swXSk7XG4gICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsIGF0dGFja2luZ1RlYW0uY29sb3JzWzFdKTtcbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoMjApICUgNCA9PT0gMCl7XG4gICAgICBhdHRhY2tpbmdUZWFtLmluY3JlYXNlVmFsdWVzKDMsJ2F0dGFjaycsWydtaWRmaWVsZGVyJywgJ3N0cmlrZXInXSk7XG4gICAgICBhdHRhY2tpbmdUZWFtLmluY3JlYXNlVmFsdWVzKDMsJ2NyZWF0aXZpdHknLFsnbWlkZmllbGRlcicsICdzdHJpa2VyJ10pO1xuICAgICAgLy8gJycgPT09IE5vIHBsYXllciBwYXNzZWQgaW5cbiAgICAgICRjb21tZW50YXJ5Qm94LnRleHQoZ2VuZXJhdGVDb21tZW50YXJ5KCdjaGFuY2UnLCcnKSk7XG4gICAgfVxuICB9XG5cblxuICBmdW5jdGlvbiBnb2FsQ2hhbmNlKGF0dGFja2luZ1RlYW0sIGRlZmVuZGluZ1RlYW0pIHtcbiAgICAvLyBSZWZhY3RvciB0aGlzXG4gICAgY29uc3QgYXR0YWNraW5nUGxheWVyID0gYXR0YWNraW5nVGVhbS5yYW5kb21QbGF5ZXIoKTtcbiAgICBjb25zdCBkZWZlbmRpbmdQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2RlZmVuZGVyJyk7XG5cbiAgICBpZiAoZ2VuUmFuZG9tVmFsdWUoYXR0YWNraW5nUGxheWVyLmF0dGFjaykgPiBnZW5SYW5kb21WYWx1ZShkZWZlbmRpbmdQbGF5ZXIuZGVmZW5jZSkpIHtcblxuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdnb2FsJywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgIHVwZGF0ZVNjb3JlKGF0dGFja2luZ1RlYW0pO1xuXG4gICAgICAvLyBSZWZhY3RvciB0aGVzZSBtZXNzYWdlcyAtIHVzZSBhIGZ1bmN0aW9uIHdoaWNoIHBhc3NlcyBpbiBwbGF5ZXIsIHRlYW1PYmplY3QsIGNvbG9yIGFuZCBpY29uIG5hbWVcbiAgICAgICQoYCMke2F0dGFja2luZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdjb2xvcjp3aGl0ZTsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBzY29yZWQ8YnIvPmApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZURpc2NpcGxpbmUoYXR0YWNraW5nVGVhbSwgZGVmZW5kaW5nVGVhbSkge1xuXG4gICAgLy8gUmVmYWN0b3JcbiAgICAvLyBBVFRBQ0tJTkcgVEVBTSBSRURVTkRBTlRcbiAgICAvLyB0ZWFtU3RyaW5nIGNhbiBiZSBzdWJzdGl0dXRlZCBmb3IgZGVmZW5kaW5nVGVhbS5wbGFjZVxuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyKCk7XG5cblxuICAgIC8vIFRha2VzIG1hdGNoIHRpbWUgaW4gYWNjb3VudCwgd2hpY2ggZGVjcmVhc2VzIHRoZSBsaWtlbGlob29kIG9mIGJvb2tpbmdzIGhhcHBlbmluZyBlYXJsaWVyIGluIHRoZSBnYW1lLlxuICAgIGlmICgoZ2VuUmFuZG9tVmFsdWUoZGVmZW5kaW5nUGxheWVyLmRpc2NpcGxpbmUpICsgKDEwMC1tYXRjaFRpbWUpKSA8IDkwICYmIGRlZmVuZGluZ1BsYXllci5zdGF0dXMgIT09ICdlamVjdGVkJykge1xuXG4gICAgICAvLyBBbHJlYWR5IGJvb2tlZD8gU2VuZCBoaW0gb2ZmIVxuICAgICAgaWYgKGRlZmVuZGluZ1BsYXllci5zdGF0dXMgPT09ICd5ZWxsb3cnKSB7XG4gICAgICAgIC8vIFJlZmFjdG9yIGNyZWF0ZSBhIGNsYXNzIG9yIHBhc3MgaW4gYXMgYW4gb2JqZWN0IC0gb25lIGxpbmVcbiAgICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNGRjAwMDAnKTtcbiAgICAgICAgJGNvbW1lbnRhcnlCb3guY3NzKCdjb2xvcicsICcjRkZGRkZGJyk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKDIwLCdkZWZlbmNlJyxbJ3N0cmlrZXInLCdtaWRmaWVsZGVyJywgJ2RlZmVuZGVyJywgJ2dvYWxrZWVwZXInXSk7XG4gICAgICAgIGRlZmVuZGluZ1RlYW0ucmVkdWNlVmFsdWVzKDIwLCdhdHRhY2snLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcbiAgICAgICAgZGVmZW5kaW5nVGVhbS5yZWR1Y2VWYWx1ZXMoMjBcbiAgICAgICAgICAsJ2NyZWF0aXZpdHknLFsnc3RyaWtlcicsJ21pZGZpZWxkZXInLCAnZGVmZW5kZXInLCAnZ29hbGtlZXBlciddKTtcblxuICAgICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3NlY29uZFllbGxvdycsIGRlZmVuZGluZ1BsYXllcik7XG5cbiAgICAgICAgLy8gUmVmYWN0b3IgdGhlc2UgbWVzc2FnZXMgLSB1c2UgYSBmdW5jdGlvbiB3aGljaCBwYXNzZXMgaW4gcGxheWVyLCB0ZWFtT2JqZWN0LCBjb2xvciBhbmQgaWNvbiBuYW1lXG4gICAgICAgICQoYCMke2RlZmVuZGluZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtc3F1YXJlIGV2ZW50LWl0ZW0nIHN0eWxlPSdjb2xvcjogcmVkOycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7ZGVmZW5kaW5nUGxheWVyLm5hbWV9IHNlbnQgb2ZmPGJyLz5gKTtcbiAgICAgICAgZGVmZW5kaW5nUGxheWVyLnN0YXR1cyA9ICdlamVjdGVkJztcbiAgICAgICAgZGVmZW5kaW5nUGxheWVyLnBsYXlpbmcgPSBmYWxzZTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVmYWN0b3IgY3JlYXRlIGEgY2xhc3Mgb3IgcGFzcyBpbiBhcyBhbiBvYmplY3QgLSBvbmUgbGluZVxuICAgICAgICAkY29tbWVudGFyeUJveC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAneWVsbG93Jyk7XG4gICAgICAgICRjb21tZW50YXJ5Qm94LmNzcygnY29sb3InLCAnIzAwMDAwMCcpO1xuICAgICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3llbGxvdycsIGRlZmVuZGluZ1BsYXllcik7XG4gICAgICAgIGRlZmVuZGluZ1BsYXllci5kZWZlbmNlIC09IDg7XG5cbiAgICAgICAgJChgIyR7ZGVmZW5kaW5nVGVhbS5wbGFjZX1FdmVudHNgKS5hcHBlbmQoYFxuICAgICAgICAgIDxpIGNsYXNzPSdmYSBmYS1zcXVhcmUgZXZlbnQtaXRlbScgc3R5bGU9J2NvbG9yOiB5ZWxsb3c7JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHtkZWZlbmRpbmdQbGF5ZXIubmFtZX0gYm9va2VkPGJyLz5gKTtcbiAgICAgICAgZGVmZW5kaW5nUGxheWVyLnN0YXR1cyA9ICd5ZWxsb3cnO1xuICAgICAgICBkZWZlbmRpbmdQbGF5ZXIuZml0bmVzcyAtPSBnZW5SYW5kb21WYWx1ZSgxMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlSW5qdXJ5KGF0dGFja2luZ1RlYW0pIHtcbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllcigpO1xuXG4gICAgaWYgKGdlblJhbmRvbVZhbHVlKDEwMSkgJSA0MCA9PT0gMCkge1xuXG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ2luanVyeScsIGF0dGFja2luZ1BsYXllcik7XG4gICAgICAkKGAjJHthdHRhY2tpbmdUZWFtLnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLXBsdXMnIHN0eWxlPSdjb2xvcjogZ3JlZW47JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+PC9pPiAke21hdGNoVGltZX0gbWluczogJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0gaW5qdXJlZDxici8+YCk7XG4gICAgICBpZiAoYXR0YWNraW5nVGVhbS5wbGFjZSA9PT0gJ2F3YXknICYmIGNwdU1vZGUpIHtcbiAgICAgICAgYXR0YWNraW5nUGxheWVyLnBsYXlpbmcgPSAhYXR0YWNraW5nUGxheWVyLnBsYXlpbmc7XG4gICAgICAgIHN1YnN0aXR1dGUoYXdheVRlYW0sIGF0dGFja2luZ1BsYXllcik7XG4gICAgICAgIGNvbnN0IGFkZFBsYXllciA9IGF3YXlUZWFtLnJhbmRvbVN1YnN0aXR1dGUoYXR0YWNraW5nUGxheWVyLnBvc2l0aW9uKTtcbiAgICAgICAgYWRkUGxheWVyLnBsYXlpbmcgPSAhYWRkUGxheWVyLnBsYXlpbmc7XG4gICAgICAgIHN1YnN0aXR1dGUoYXdheVRlYW0sIGFkZFBsYXllcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdHRhY2tpbmdQbGF5ZXIuZml0bmVzcyA9IDAgKyBnZW5SYW5kb21WYWx1ZSgzMCk7XG4gICAgICAgIGF0dGFja2luZ1BsYXllci5zdGF0dXMgPSAnaW5qdXJlZCc7XG4gICAgICAgIGF0dGFja2luZ1BsYXllci5wbGF5aW5nID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgYXR0YWNraW5nUGxheWVyLmZpdG5lc3MgLT0gZ2VuUmFuZG9tVmFsdWUoMTUpO1xuICAgICAgYXR0YWNraW5nUGxheWVyLmRlZmVuY2UgLT0gZ2VuUmFuZG9tVmFsdWUoMTApO1xuICAgICAgYXR0YWNraW5nUGxheWVyLmF0dGFjayAtPSBnZW5SYW5kb21WYWx1ZSgxMCk7XG4gICAgICAvLyBSZWZhY3RvciAtXG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ25lYXJNaXNzJywgYXR0YWNraW5nUGxheWVyKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUZyZWVraWNrKGF0dGFja2luZ1RlYW0sIGRlZmVuZGluZ1RlYW0pIHtcbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ21pZGZpZWxkZXInKTtcbiAgICBjb25zdCBkZWZlbmRpbmdWYWx1ZSA9IChkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2dvYWxrZWVwZXInKS5kZWZlbmNlICsgZGVmZW5kaW5nVGVhbS5hdmVyYWdlUGxheWVyVmFsdWVzKCdkZWZlbmRlcicpKTtcblxuICAgIGlmIChhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrID4gZGVmZW5kaW5nVmFsdWUpIHtcbiAgICAgIHVwZGF0ZVNjb3JlKGF0dGFja2luZ1RlYW0pO1xuXG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ2ZyZWVraWNrJywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke2F0dGFja2luZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdjb2xvcjp3aGl0ZTsnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBzY29yZWQ8YnIvPmApO1xuICAgICAgYXR0YWNraW5nUGxheWVyLmF0dGFjayArPSA1O1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5lcmF0ZUNvbW1lbnRhcnkoJ3dhc3RlZEZyZWVraWNrJywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgIGF0dGFja2luZ1BsYXllci5jcmVhdGl2aXR5IC09IDU7XG4gICAgICBhdHRhY2tpbmdUZWFtLnJlZHVjZVZhbHVlcyhnZW5SYW5kb21WYWx1ZSgzKSwgJ2F0dGFjaycsIFsnc3RyaWtlcicsICdtaWRmaWVsZGVyJ10pO1xuICAgICAgYXR0YWNraW5nVGVhbS5yZWR1Y2VWYWx1ZXMoZ2VuUmFuZG9tVmFsdWUoMyksICdjcmVhdGl2aXR5JywgWydzdHJpa2VyJywgJ21pZGZpZWxkZXInXSk7XG5cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlUGVuYWx0eShhdHRhY2tpbmdUZWFtLCBkZWZlbmRpbmdUZWFtKSB7XG5cbiAgICBjb25zdCBhdHRhY2tpbmdQbGF5ZXIgPSBhdHRhY2tpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ3N0cmlrZXInKTtcbiAgICBjb25zdCBkZWZlbmRpbmdQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2dvYWxrZWVwZXInKTtcbiAgICBjb25zdCBib29rZWRQbGF5ZXIgPSBkZWZlbmRpbmdUZWFtLnJhbmRvbVBsYXllckJ5UG9zaXRpb24oJ2RlZmVuZGVyJyk7XG4gICAgLy8gQm9vayB0aGUgcGxheWVyP1xuICAgIGlmIChnZW5SYW5kb21WYWx1ZSgxMDApID4gMjUpIHtcbiAgICAgIGJvb2tlZFBsYXllci5zdGF0dXMgPSAneWVsbG93JztcbiAgICAgICQoYCMke2RlZmVuZGluZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtc3F1YXJlIGV2ZW50LWl0ZW0nIHN0eWxlPSdjb2xvcjogeWVsbG93OycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7Ym9va2VkUGxheWVyLm5hbWV9IGJvb2tlZDxici8+YCk7XG4gICAgfVxuXG4gICAgaWYgKChnZW5SYW5kb21WYWx1ZShhdHRhY2tpbmdQbGF5ZXIuYXR0YWNrKSoyKSA+IGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kZWZlbmNlKSkge1xuXG4gICAgICB1cGRhdGVTY29yZShhdHRhY2tpbmdUZWFtKTtcblxuICAgICAgLy8gJGNvbW1lbnRhcnlCb3gudGV4dChgJHthdHRhY2tpbmdQbGF5ZXIubmFtZX0ncyBjbGluaWNhbCBmcm9tIHRoZSBzcG90ISBHb2FsIWApO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdwZW5hbHR5JywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke2F0dGFja2luZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdjb2xvcjp3aGl0ZScgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7YXR0YWNraW5nUGxheWVyLm5hbWV9IHNjb3JlcyBwZW5hbHR5PGJyLz5gKTtcbiAgICAgIGF0dGFja2luZ1BsYXllci5hdHRhY2sgKz0gNTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdtaXNzZWRQZW5hbHR5JywgYXR0YWNraW5nUGxheWVyKTtcbiAgICAgICQoYCMke2F0dGFja2luZ1RlYW0ucGxhY2V9RXZlbnRzYCkuYXBwZW5kKGA8aSBjbGFzcz0nZmEgZmEtZnV0Ym9sLW8nIHN0eWxlPSdjb2xvcjpyZWQnIGFyaWEtaGlkZGVuPSd0cnVlJz48L2k+ICR7bWF0Y2hUaW1lfSBtaW5zOiAke2F0dGFja2luZ1BsYXllci5uYW1lfSBtaXNzZWQgcGVuYWx0eTxici8+YCk7XG4gICAgICBkZWZlbmRpbmdQbGF5ZXIuZGVmZW5jZSArPSAxMDtcbiAgICAgIGF0dGFja2luZ1BsYXllci5hdHRhY2sgLT0gMTA7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RyYWlnaHRSZWQoZGVmZW5kaW5nVGVhbSkge1xuICAgIGNvbnN0IGRlZmVuZGluZ1BsYXllciA9IGRlZmVuZGluZ1RlYW0ucmFuZG9tUGxheWVyKCk7XG4gICAgaWYgKGdlblJhbmRvbVZhbHVlKGRlZmVuZGluZ1BsYXllci5kaXNjaXBsaW5lKSArICgxMDAtbWF0Y2hUaW1lKSA8IDI1KSB7XG4gICAgICBkZWZlbmRpbmdQbGF5ZXIucGxheWluZyA9IGZhbHNlO1xuICAgICAgZGVmZW5kaW5nUGxheWVyLnN0YXR1cyA9ICdlamVjdGVkJztcblxuICAgICAgLy8gJGNvbW1lbnRhcnlCb3gudGV4dCgnVGhlIHJlZmVyZWUgZ2l2ZXMgaGltIGEgc3RyYWlnaHQgcmVkIScpO1xuICAgICAgZ2VuZXJhdGVDb21tZW50YXJ5KCdzdHJhaWdodFJlZCcsIGRlZmVuZGluZ1BsYXllcik7XG4gICAgICAkKGAjJHtkZWZlbmRpbmdUZWFtLnBsYWNlfUV2ZW50c2ApLmFwcGVuZChgPGkgY2xhc3M9J2ZhIGZhLXNxdWFyZScgc3R5bGU9JyBjb2xvcjogcmVkOycgYXJpYS1oaWRkZW49J3RydWUnPjwvaT4gJHttYXRjaFRpbWV9IG1pbnM6ICR7ZGVmZW5kaW5nUGxheWVyLm5hbWV9IHNlbnQgb2ZmPGJyLz5gKTtcbiAgICAgIC8vIGlmIChkZWZlbmRpbmdUZWFtLnBsYWNlID09PSAnaG9tZScpIHBhdXNlUGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbmZpZ1RlYW0odGVhbSwgc2VsZWN0b3IpIHtcbiAgICAvLyBSZWZhY3RvciBhbGwgdGVhbXMgaW50byBvbmUgb2JqZWN0LCB0aGVuIHBhc3MgaW4gb2JqZWN0W3NlbGVjdG9yXSA9PiBzYXZlIGFib3V0IDIwIGxpbmVzIG9mIGNvZGVcbiAgICBpZiAoaG9tZVRlYW0gPT09IG51bGwpIHtcbiAgICAgICQoJy5ob21lLXRlYW0gIC50ZWFtLW5hbWUnKS50ZXh0KHNlbGVjdG9yKTtcbiAgICAgIHN3aXRjaCAoc2VsZWN0b3IpIHtcbiAgICAgICAgY2FzZSAnVG90dGVuaGFtJzpcbiAgICAgICAgICBob21lVGVhbSA9IHNwdXJzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNYW4gVW5pdGVkJzpcbiAgICAgICAgICBob21lVGVhbSA9IG1hblVuaXRlZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTGl2ZXJwb29sJzpcbiAgICAgICAgICBob21lVGVhbSA9IGxpdmVycG9vbDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIENpdHknOlxuICAgICAgICAgIGhvbWVUZWFtID0gbWFuQ2l0eTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRXZlcnRvbic6XG4gICAgICAgICAgaG9tZVRlYW0gPSBldmVydG9uO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdDaGVsc2VhJzpcbiAgICAgICAgICBob21lVGVhbSA9IGNoZWxzZWE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xlaWNlc3Rlcic6XG4gICAgICAgICAgaG9tZVRlYW0gPSBsZWljZXN0ZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fyc2VuYWwnOlxuICAgICAgICAgIGhvbWVUZWFtID0gYXJzZW5hbDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGhvbWVUZWFtLnBsYWNlID0gJ2hvbWUnO1xuICAgICAgJCgnLmhvbWUtdGVhbS1sb2dvJykuYXR0cignc3JjJywgYGltYWdlcy8ke2hvbWVUZWFtLm5hbWV9LnBuZ2ApO1xuICAgICAgJCgnLmhvbWUtdGVhbS1sb2dvJykuc2hvdygpO1xuICAgICAgJCgnLmhvbWUtdGVhbSwgI2hvbWVCYXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBob21lVGVhbS5jb2xvcnNbMF0pO1xuICAgICAgJCgnLmhvbWUtdGVhbScpLmNzcygnY29sb3InLCBob21lVGVhbS5jb2xvcnNbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcuYXdheS10ZWFtIC50ZWFtLW5hbWUnKS50ZXh0KHNlbGVjdG9yKTtcbiAgICAgIHN3aXRjaCAoc2VsZWN0b3IpIHtcbiAgICAgICAgY2FzZSAnVG90dGVuaGFtJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IHNwdXJzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNYW4gVW5pdGVkJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IG1hblVuaXRlZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTGl2ZXJwb29sJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IGxpdmVycG9vbDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFuIENpdHknOlxuICAgICAgICAgIGF3YXlUZWFtID0gbWFuQ2l0eTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRXZlcnRvbic6XG4gICAgICAgICAgYXdheVRlYW0gPSBldmVydG9uO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdDaGVsc2VhJzpcbiAgICAgICAgICBhd2F5VGVhbSA9IGNoZWxzZWE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xlaWNlc3Rlcic6XG4gICAgICAgICAgYXdheVRlYW0gPSBsZWljZXN0ZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fyc2VuYWwnOlxuICAgICAgICAgIGF3YXlUZWFtID0gYXJzZW5hbDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGF3YXlUZWFtLnBsYWNlID0gJ2F3YXknO1xuICAgICAgJCgnLmF3YXktdGVhbS1sb2dvJykuYXR0cignc3JjJywgYGltYWdlcy8ke2F3YXlUZWFtLm5hbWV9LnBuZ2ApO1xuICAgICAgJCgnLmF3YXktdGVhbS1sb2dvJykuc2hvdygpO1xuICAgICAgJCgnLmxvZ28tZGlzcGxheSBzcGFuJykuc2hvdygpO1xuICAgICAgJCgnLmF3YXktdGVhbSwgLnBvc3Nlc3Npb24tYmFyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgYXdheVRlYW0uY29sb3JzWzBdKTtcbiAgICAgICQoJy5hd2F5LXRlYW0nKS5jc3MoJ2NvbG9yJywgYXdheVRlYW0uY29sb3JzWzFdKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZW5lcmF0ZUNvbW1lbnRhcnkoc2NlbmFyaW8sIHBsYXllcikge1xuICAgIGNvbnN0IGNvbW1lbnRhcnkgPSB7XG4gICAgICBnb2FsOiBbJ0dvYWwhJywgJ0hlXFwncyBzY29yZWQhJywgYFRoYXQncyBhIGdyZWF0IGZpbmlzaCFgLCBgV2hhdCBhIGdvYWwgYnkgJHtwbGF5ZXIubmFtZX1gLCBgJHtwbGF5ZXIubmFtZX0gZmluaXNoZXMgb2ZmIHRoZSBtb3ZlIWBdLFxuICAgICAgZnJlZWtpY2s6IFtgSXQncyBhIGZyZWVraWNrYCwgYCR7cGxheWVyLm5hbWV9IHRvIHRha2UgdGhlIGZyZWVraWNrYCwgYEhlIGxpbmVzIHVwIHRoZSBmcmVla2lja2AsIGBUaGlzIGlzIGEgY2hhbmNlIHRvIGdldCBhIGNyb3NzIGluYF0sXG4gICAgICB3YXN0ZWRGcmVla2ljazogW2Ake3BsYXllci5uYW1lfSBsb3NlcyBwb3NzZXNzaW9uYCwgYFRoYXQncyBlbmRlZCB1cCBpbiByb3cgWmAsIGBUaGUgYXR0YWNrIGFtb3VudHMgdG8gbm90aGluZ2AsIGAke3BsYXllci5uYW1lfSBoYXMgd2FzdGVkIHRoYXQgb3Bwb3J0dW5pdHlgLCBgJHtwbGF5ZXIubmFtZX0ncyBlZmZvcnQgZ29lcyBvdmVyIHRoZSBiYXJgLCBgSGUgaGFuZHMgYmFjayBwb3NzZXNzaW9uIHRvIHRoZSBvdGhlciB0ZWFtYF0sXG4gICAgICB5ZWxsb3c6IFtgSGUncyBnb2luZyBpbiB0aGUgYm9va2AsIGBPdWNoISAke3BsYXllci5uYW1lfSB3aWxsIGdldCBhIHllbGxvdyBmb3IgdGhhdGAsIGBUaGF0J3MgYSBib29raW5nYCwgYEl0J3MgYSB5ZWxsb3chYCwgYFRoZSByZWYgaXMgdGFraW5nIGhpcyBuYW1lYF0sXG4gICAgICBzZWNvbmRZZWxsb3c6IFtgSGUncyBhbHJlYWR5IGJlZW4gYm9va2VkLi4uYCwgYFRoYXQncyBhIHNlY29uZCB5ZWxsb3dgLCBgJHtwbGF5ZXIubmFtZX0gaXMgc2hvd24gYSByZWQhYCwgYCR7cGxheWVyLm5hbWV9IGlzIG9mZmBdLFxuICAgICAgc3RyYWlnaHRSZWQ6IFtgJHtwbGF5ZXIubmFtZX0gaXMgc2hvd24gYSBzdHJhaWdodCByZWQhYCwgYCR7cGxheWVyLm5hbWV9IGlzIG9mZmAsIGBUaGUgcmVmIGhhcyBnaXZlbiBoaW0gc3RyYWlnaHQgcmVkIWBdLFxuICAgICAgcGVuYWx0eTogW2BUaGUgcmVmZXJlZSBwb2ludHMgdG8gdGhlIHNwb3RgLCBgVGhhdCdzIGEgcGVuYWx0eWAsIGAke3BsYXllci5uYW1lfSBpcyBmb3VsZWQgaW4gdGhlIGFyZWFgLCBgVGhlIHJlZiBibG93cyBoaXMgd2hpc3RsZS4gUGVuYWx0eS5gXSxcbiAgICAgIG1pc3NlZFBlbmFsdHk6IFtgU2F2ZWQhYCwgYEl0J3Mgb3ZlciB0aGUgYmFyYCwgYCR7cGxheWVyLm5hbWV9IGhhcyBtaXNzZWQgaXQhYCwgYE9oIGRlYXIhICR7cGxheWVyLm5hbWV9J3MgcHV0IGl0IHdpZGUnYF0sXG4gICAgICBpbmp1cnk6IFtgJHtwbGF5ZXIubmFtZX0ncyBpcyBnb2luZyBvZmZgLGAke3BsYXllci5uYW1lfSBpcyBpbmp1cmVkYCxgJHtwbGF5ZXIubmFtZX0gY2FuJ3QgY29udGludWVgXSxcbiAgICAgIGNoYW5jZTogW2BUaGUgYmFsbCBpcyB3YXN0ZWRgLCBgUG9zc2Vzc2lvbiBpcyBzbG9wcGlseSBnaXZlbiBhd2F5YCwgYFRoYXQgaXMgd2FzdGVkYCwgYFRoZSByZWZlcmVlIHB1bGxzIGJhY2sgcGxheWAsIGBUaGUgYmFsbCBnb2VzIG91dCBmb3IgYSB0aHJvd2AsIGBHb29kIGludGVyY2VwdGlvbiFgLCBgSGUncyByb2JiZWQgaGltIG9mIHBvc3Nlc2lvbmAsIGBUaGF0IHdhcyBhIHdheXdhcmQgYmFsbGAsIGBIZSBjYW4ndCBxdWl0ZSBnZXQgb24gdGhlIGVuZCBvZiB0aGF0IG9uZWBdLFxuICAgICAgbmVhck1pc3M6IFtgJHtwbGF5ZXIubmFtZX0gaXMgbGltcGluZywgYnV0IGhlJ2xsIGJlIG9rYXlgLCBgVGhhdCdzIGEgc29yZSBvbmUuYCwgYCR7cGxheWVyLm5hbWV9IGxvb2tzIHRvIGJlIHN0cnVnZ2xpbmdgLCBgVGhlcmUncyBhIG5hc3R5IGNvbWluZyB0b2dldGhlcmAsIGBUaGUgcmVmZXJlZSB3YXZlcyBwbGF5IG9uYF1cbiAgICB9O1xuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gZ2VuUmFuZG9tVmFsdWUoY29tbWVudGFyeVtzY2VuYXJpb10ubGVuZ3RoKTtcbiAgICBjb25zdCBtZXNzYWdlID0gY29tbWVudGFyeVtzY2VuYXJpb11bcmFuZG9tSW5kZXhdO1xuICAgICRjb21tZW50YXJ5Qm94LnRleHQoYCR7bWVzc2FnZX1gKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlU2NvcmUodGVhbU9iamVjdCkge1xuICAgIGxldCBzY29yZSA9IG51bGw7XG4gICAgbGV0IGdldFNjb3JlID0gbnVsbDtcbiAgICBpZiAodGVhbU9iamVjdC5wbGFjZSA9PT0gJ2hvbWUnKSB7XG4gICAgICBnZXRTY29yZSA9ICRob21lU2NvcmUudGV4dCgpO1xuICAgICAgc2NvcmUgPSBwYXJzZUZsb2F0KGdldFNjb3JlKSArIDE7XG4gICAgICAkaG9tZVNjb3JlLnRleHQoc2NvcmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZXRTY29yZSA9ICRhd2F5U2NvcmUudGV4dCgpO1xuICAgICAgc2NvcmUgPSBwYXJzZUZsb2F0KGdldFNjb3JlKSArIDE7XG4gICAgICAkYXdheVNjb3JlLnRleHQoc2NvcmUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmRvbVBvc2l0aW9uKCkge1xuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gZ2VuUmFuZG9tVmFsdWUocG9zaXRpb25zLmxlbmd0aCkgKyAxO1xuICAgIGNvbnN0IGNob3NlblBvc2l0aW9uID0gcG9zaXRpb25zW3JhbmRvbUluZGV4XTtcbiAgICByZXR1cm4gW2Nob3NlblBvc2l0aW9uXTtcbiAgfVxufSk7XG4iXX0=
